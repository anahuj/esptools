

continue overall check in GLOB

Fix compiler warnings.

Todo:
References: ACHR, ACRE, PGRE, REFR % check common subrecords, check screenshots for common data
LAND
NAVI
NAVM % ok
WRLD/OFST + CELL/XCLC problem

 ---*---


INFO/TPIC
XXXX TPIC formid 0x0202320c (33698316)
formid = 33698316 / formid = 0x0202320c
DIAL/EDID 13
0LingChoice2

 -*-

check MiniHideout.esp for the following refs:

REFR / 0.100000 unknown / 0.150000 unknown

refsearch 0x0104927e (dec17076862) in Wasteland, MiniHideoutSecretRoom, 268435455, 268435455
Chunk name: NAME
REFR/NAME 4
Base Object FormID 23
Chunk name: XPRM
REFR/XPRM 32
Bounds X 2588.410156 % Not displayed in Editor
Bounds Y 1.000000 % Not displayed in Editor
Bounds Z 500.000000 % Not displayed in Editor
Color R 0.098039
Color G 0.098039
Color B 0.098039
0.100000 unknown
Primitive Type 3 % 1 Box 2 Sphere 3 Plane

refsearch 0x01033b9d (dec16989085) in Wasteland, MiniHideout, 268435455, 268435455
Chunk name: NAME
REFR/NAME 4
Base Object FormID 23
Chunk name: XPRM
REFR/XPRM 32
Bounds X 1000.320862 % Not displayed in Editor
Bounds Y 1.000000 % Not displayed in Editor
Bounds Z 250.000000 % Not displayed in Editor
Color R 0.098039
Color G 0.098039
Color B 0.098039
0.100000 unknown
Primitive Type 3 % 1 Box 2 Sphere 3 Plane


refsearch 0x0102e4ff (dec16966911) in Wasteland, MiniHideout, 268435455, 268435455
Chunk name: NAME
REFR/NAME 4
Base Object FormID 16966910
Chunk name: XPRM
REFR/XPRM 32
Bounds X 127.588547 % Not displayed in Editor
Bounds Y 70.949249 % Not displayed in Editor
Bounds Z 70.000000 % Not displayed in Editor
Color R 0.800000
Color G 0.298039
Color B 0.200000
0.150000 unknown
Primitive Type 1 % 1 Box 2 Sphere 3 Plane

refsearch 0x0102d0eb (dec16961771) in Wasteland, MiniHideout, 268435455, 268435455
Chunk name: NAME
REFR/NAME 4
Base Object FormID 16961770
Chunk name: XPRM
REFR/XPRM 32
Bounds X 96.000038 % Not displayed in Editor
Bounds Y 96.000130 % Not displayed in Editor
Bounds Z 32.000000 % Not displayed in Editor
Color R 0.800000
Color G 0.300000
Color B 0.200000
0.150000 unknown
Primitive Type 1 % 1 Box 2 Sphere 3 Plane

 -*-

check MiniHideout.esp for keyunknowns

WEAP test again Actor Value
WEAP test again Alternate flag

ok
MGEF Base Effect / the unnamed flag

ok
AMMO Ignores normal weapon resistance flag??

ok
CREA / Traits Creature Type


ok but two first groups are not entirely clear
NAVI/NVCI / what are the three connection groups? Check examples.

ok
NAVM / see at the end of NAVM section


 ---*---

ok
check Condition Functions screenshots / ALCH CPTH ENCH DIAL(INFO) IDLE INFO MESG PACK PERK QUST QUST(INFO) SPEL TERM

ok
check test_navmesh* / near capture_20090111_175526.png

ok
DEST DSTD DSTF DMDL DMDT:
Activator % ok
Ammo % ok
Armor % ok
Armor Addon % ok
Book % ok
Container % ok
Creature % ok
Door % ok
Furniture % ok
Ingestible % ok
Key % ok
Light % ok
Misc Item % ok
Movable Static % ok
Projectile % ok
Talking Activator % ok
Terminal % ok
Tree % ok
Weapon % ok

 ---*---

ok
Terminal / create esps for Base Hack Difficulty values, see section

 ---*---

ok
Script MQ05PipeSpeakerActivatorScript / SCHR last number = 1

ok
Terminal MQ06VaultTecTerminalSubMenuVault76nfo
schrunknown2 = 1 after Item Text "Equipment Issuances"
schrunknown2 = 1 after Item Text "Personnel Assignments"
schrunknown2 = 0 after Item Text "Project Goals"

 ---*---

ok
ARMA / more equip types, see list of unknowns at the end of this doc

ok
CELL LincolnMemorial / has XCET % recheck with Cell Window

ok
CELL MegatonCratersideSupply / XRNK % test off limits flag and required rank

ok
Faction MegatonCratersideSupplyFaction % has two RNAMs

ok
INFO/SNDD % only SNDD has ref to TenpennySong1; quest is RadioTenpenny; Response Text "Song 1"; INFO formid 0x0001e5af

ok
Door CitadelDoorARingToLab / click Edit button, try edit the rows

ok
EFSH / create esps for modes

ok
Object Effect ENCH / EnchAntSting has unknown flag

ok
Faction MetroRobotFaction / DATA 1 = 0
Faction MQ09EnclaveRobotFaction / DATA 1 = 1
Faction LyonsPrideFaction / has CNAM = 1.0 DATA 1 = 0, try change Crime Gold Multiplier
Faction WellingtonFaction / has CNAM = 1.0 DATA 1 = 1

 ---*---

ARMA PowerArmor51bRightHand / DNAM short = 500

CELL LincolnMemorial / has XCET

CELL MegatonCratersideSupply / XRNK

Climate / wheather types: what is the third column, Global something

Creature fortBMisterGutsySteel has KFFZ
Creature fortBMisterGutsySteel has 1 in DATA after Health
Creature CapitolBuildingLvlSupermutantMiniGun has 0 in DATA after Health
Creature / more Use Animation types
Creature MQ09ControlRoomSentryBot has:
 Attack Damage 232
 3

Debris InsectGoreBits01 / screenhots, click on each list item
 Model Filename "Gore\InsectBit03.NIF"
 0
Other list items have 1.


 ---*---

ok
Activator flags

ok
Activator MQ11JeffersonVertibirdLandingCONTROLTrigger / has DMDL

ok
Armor Addon / modulates voice flag


 ---*---

Oblivion CS / condition functions:
??? O- CanPayCrimeGold
??? O- GetCrimeGold
??? O- GetDoorDefaultOpen
??? Om GetFriendHit <Actor> % [TARGET]
??? O- GetInvestmentGold
??? O- GetIsPlayerBirthsign <Birthsign>
??? O- GetPCFactionSteal <Faction>
??? O- GetPCFactionSubmitAuthority <Faction>
??? O- GetPCFame
??? O- GetPCInfamy
??? O- GetPCMiscStat <Integer> % 0
??? O- GetPlayerControlsDisabled
??? O- GetPlayerInSEWorld
??? O- GetWeaponSkillType
??? O- HasVampireFed
??? O- IsCurrentFurnitureObj <Furniture>
??? O- IsPlayerInJail
??? O- IsTurnArrest
??? O- IsYielding

IDLE condition functions redo:
??? OF IsTorchOut % I skipped this, must redo
??? F GetPlayerControlsDisabled % two strange parameters, see capture_20090106_202137.png % XXXX caused program failure and exit

redo: add extra point to middle; keep the point added to the first parameter
Imagespace Modifier / try edit the animation curves, add points increasingly

 ---*---

ok
Ingestible ALCH / create esps for Effect Item window

Ingestible Effect Item / add all condition functions

Package / Eat / Allow Search flag

Package / date PSDT

Package / list sorted by Target Data "Type", create esps for Object Type if listis not enough

DCworld18
WRLD/PNAM 2
1100,0100 % two highest bits are unknown

DCWorld18 / check the cell location value ranges

0x000c0c72 AlexandriaArms01 / Bound Contents tab, add ref to it

AMMO / create esp for playable flag

BPTD:
Scale floats
Explodable Absolute flag
Severable Explosion Type
Severable Generic Debris
Severable Debris Count
Pose Matching

Load Screen / create esp for Displays in Main Menu flag

LandTexture / create esps for material types

Base Effect MGEF / create esps

Movable Static / create esps

check all form types which has destrutctible object button

NPC / create esps for stats tab
NPC / actor effect list tab
NPC / animation tab
NPC / Blood impact data set

Package / Dialogue flags
Package / create esps for all package types

Perk / screenshots of perk list

Perk / create esps for DATA(3): entry point, function, number of tabs

Perk / EPFT?

Projectile / types (ok: 1 Missile 2 Lobber 4 Beam 8 Flame)

Race

World Space



CREA AI Data / create esps for training skills
CREA AI Data / create esp for Autocalc Services
CREA Actor Effect List / create esps for Use Animation (ok: Attack3 Attack3Down Attack3IS)
CREA Blood / Impact Material Type (ok: 5 Wood 6 Organic 7 Cloth 8 Water)

% see below
refsearch 0x00060a45 (dec395845) in Wasteland, , 0, 0
refsearch 0x0009cffb (dec643067) in , Vault101d, 268435455, 268435455
refsearch 0x000b8714 (dec755476) in , Vault101ReactorMS16, 268435455, 268435455
refsearch 0x000b8716 (dec755478) in , Vault101ReactorMS16, 268435455, 268435455
refsearch 0x000692c8 (dec430792) in , Vault101d, 268435455, 268435455
refsearch 0x0003b28a (dec242314) in , RooseveltHS01, 268435455, 268435455
refsearch 0x000cc232 (dec836146) in DCworld18, , 0, 0
refsearch 0x00032cb3 (dec208051) in Wasteland, , 3, 5
refsearch 0x000ca6fc (dec829180) in Wasteland, , 0, 0
refsearch 0x000651da (dec414170) in Wasteland, , 0, 0


0x00060a45 REFR/INAM = 212191
0x0009cffb REFR/XACT = 5 % ok revealed nothing

unknown bit in flag 1:
0x000b8714 % A % ok Turn Off Fire
0x000b8716 % A % ok Turn Off Fire
0x0007e952 % B NPC
0x000692c8 % C
0x0003b28a % C but no XMBR

0x0003d75b FFRadioCache08 / XRDO % check Exterior Position edit button % ok
0x000523c1 GermPoliceHQ01 / XRGD % get screenshot % ok but not useful

CREA create esps


ok
Check condition function parameters and lists:
GetActorValue
GetFriendHit
GetIsUsedItemEquipType
GetIsUsedItemType
GetPCMiscStat

Creature/CREA % have screenshots, see creature section

Navmesh / AgathasHouseInterior / create esps for more examples
two wall edges, two cover edges, two ledge edges
inner triangle cover?

REFR / check all tabs of
0x000c0c72 AlexandriaArms01
(./searchrefrincell 0x000c0c72)

REFR / XRMR values:
0x0001c24f Tenpenny01 / XRMR 1 0
0x0001c250 Tenpenny01 / XRMR 1 1
0x0003a838 SpringvaleSchool01 / XRMR 6 1
0x0009e501 Vault101d / XRMR 0 1
0x000a6f09 CapitolBuilding01 / XRMR 3 0
0x000b3795 FortC01 / XRMR 3 1
0x000c3593 DunwichBuilding01 / XRMR 2 0
0x000c359c DunwichBuilding01 / XRMR 2 1

REFR
0x00003a43 MegatonCratersideSupply / XLOC
0x00017362 Tenpenny01 / XACT
0x0001c250 Tenpenny01 / XLRM but see the XRMR refs first
0x0001c26b Tenpenny01 / XPOD XPRM with primitive type 3
0x0001d294 MegatonMainGate / RCLR
0x0001dfff MegatonWaterProcessingPlant / XPWR
0x00032cb3 FFEnclaveCamp16 / XLOD
0x000392fd FFRadioCache08 / XAPD XAPR
0x0003d75b FFRadioCache08 / XRDO
0x0003dcf5 TaftTunnel01 / XLOC
0x0004092e Tenpenny01Attack / XLOC
0x0004b87c RedRacer03 / XLOC nothing special
0x0004cb15 FortC02 / XLOC
0x00058784 DunwichBuilding01 / XAMT XAMC
0x0006486c Tenpenny01 / XSED
0x00067930 Tenpenny03 / XLOC
0x000692c8 Vault101d / XMBR
0x0006bc9f MegatonWaterProcessingPlant / XLTW
0x00070ac9 Tenpenny01 / SCHR INAM XPPA XPRD
0x0007d2dd ChryslusBuilding02 / XOCP XORD
0x000a3099 FortC02 / XRAD
0x000b03ff MamaDolces01 / XRDS XLTW
0x000b4220 Tenpenny01 / XLOC nothing special
0x000b42a5 MamaDolces01 / XOCP
0x000c605f RedRacer03 / XLCM
0x000cc232 ChevyChaseSpawnBox / XRGB XRGD

0x00059b4f SpringvaleSchool01 / XTRI 1
0x000abc07 JuryStStation01 / XTRI 2
0x000c22bb Tenpenny03 / XTRI 3
0x000a0a7b DunwichBuilding02 / XTRI 5
0x00059bae TLHendersonHouse / XTRI 12
0x000b302d MamaDolces01 / XTRI 22
0x000651da zDCWorld03B / XTRI 23
0x0007b74f MetroCenter07 / XTRI 27

ACHR
0x00003b5d MegatonJerichosHouse / XEZN
0x00017a07 Tenpenny01 / XMRC
0x000210e7 CitadelBRing / XIBS
0x000302d0 MetroCenter02 / XRDS
0x00044b1e FortBannister01 / XLCM XESP
0x0006c48e RedRacer03 / XLCM XLKR
0x000c71ef RedRacer03 / XRGD XRGB
0x000ca6fc zDCWorld03B / XLCM XPRD XPPA INAM SCHR TNAM4 XLKR

PGRE
0x000523a5 FFRadioCache08
0x000523c1 GermPoliceHQ01 / XRGD
0x000523c7 FloodedSewer01 / XPWR
0x00052609 FFEnclaveCamp01 / XESP
0x0005c288 FortBannister01 / XOWN


All above REFRs sorted by cell:
0x000c0c72 AlexandriaArms01
0x000a6f09 CapitolBuilding01 / XRMR 3 0
0x000cc232 DCWorld18 (8,-10) / XRGB XRGD % ok but nothing revealed
0x0007d2dd ChryslusBuilding02 / XOCP XORD % have screenshot already
0x000210e7 CitadelBRing / XIBS % ok
0x00058784 DunwichBuilding01 / XAMT XAMC % ok
0x000c3593 DunwichBuilding01 / XRMR 2 0 % ok
0x000c359c DunwichBuilding01 / XRMR 2 1 % ok
0x000a0a7b DunwichBuilding02 / XTRI 5 % ok
0x00052609 FFEnclaveCamp01 / XESP % ok
0x00032cb3 Wasteland (3,5) / XLOD % ok
0x000523a5 FFRadioCache08 % skipped
0x000392fd FFRadioCache08 / XAPD XAPR % ok
0x0003d75b FFRadioCache08 / XRDO % ok but check Exterior Position edit button
0x000523c7 FloodedSewer01 / XPWR % ok
0x00044b1e FortBannister01 / XLCM XESP % ok
0x0005c288 FortBannister01 / XOWN % ok
0x000b3795 FortC01 / XRMR 3 1 % skipped
0x0004cb15 FortC02 / XLOC % ok
0x000a3099 FortC02 / XRAD % ok
0x000523c1 GermPoliceHQ01 / XRGD % get screenshot
0x000abc07 JuryStStation01 / XTRI 2 % primtype = 3 but editor displays box greyed-out
0x000b42a5 MamaDolces01 / XOCP      % primtype = 3
0x000b03ff MamaDolces01 / XRDS XLTW % XXXX Radius = -1.254456 (254.75 displayed)
0x000b302d MamaDolces01 / XTRI 22 % skipped
0x00003a43 MegatonCratersideSupply / XLOC % ok
0x00003b5d MegatonJerichosHouse / XEZN % ok
0x0001d294 MegatonMainGate / RCLR % ok
0x0006bc9f MegatonWaterProcessingPlant / XLTW % ok
0x0001dfff MegatonWaterProcessingPlant / XPWR % Editor shows no Refracted By tab
0x000302d0 MetroCenter02 / XRDS % Has Radius -73.365005 but Editor has no Extra tab or the like
0x0007b74f MetroCenter07 / XTRI 27
0x000c605f RedRacer03 / XLCM % has XLCM but Editor does not display it; inherited?
0x0006c48e RedRacer03 / XLCM XLKR
0x0004b87c RedRacer03 / XLOC nothing special
0x000c71ef RedRacer03 / XRGD XRGB
0x0003a838 SpringvaleSchool01 / XRMR 6 1
0x00059b4f SpringvaleSchool01 / XTRI 1
0x0003dcf5 TaftTunnel01 / XLOC
0x0004092e Tenpenny01Attack / XLOC
0x00070ac9 Tenpenny01 / SCHR INAM XPPA XPRD % ok
0x00017362 Tenpenny01 / XACT
0x000b4220 Tenpenny01 / XLOC nothing special
0x0001c250 Tenpenny01 / XLRM but see the XRMR refs first
0x00017a07 Tenpenny01 / XMRC
0x0001c26b Tenpenny01 / XPOD XPRM with primitive type 3
0x0001c24f Tenpenny01 / XRMR 1 0
0x0001c250 Tenpenny01 / XRMR 1 1
0x0006486c Tenpenny01 / XSED % XSED still unknown
0x00067930 Tenpenny03 / XLOC
0x000c22bb Tenpenny03 / XTRI 3
0x00059bae TLHendersonHouse / XTRI 12
0x000692c8 Vault101d / XMBR
0x0009e501 Vault101d / XRMR 0 1
0x000ca6fc zDCWorld03B / XLCM XPRD XPPA INAM SCHR TNAM4 XLKR % not found
0x000651da zDCWorld03B / XTRI 23 % not found



 ---*---

ok
Check sides of every blue cover in AgathasHouseInterior

Test NavMesh Generation Import Option for non-REFRs

REFR Primitive tab Collision Layer / more values, create
an esp for Transparent as well after creating other esps

REFR Extra tab / where are Radius and Ammo Count stored?

NavMesh / Draw Cover
   Selecting an open edge and pressing "e" will open the cover menu. Here
   you can set details on edge cover and the cover type. Edge cover is
   represented by a black bar on the side of the cover rectangle when in
   Draw Cover mode.


 ---*---

ok but perhaps we should sample the Value-FOV function better
Package BrockServeSister / create esps for multiple FOV values

ok
Perk / EPFT function id? One perk has 1 for add value and another
has 1 for multiply value

ok, from wav, from lips file flags had no effect on esp
INFO / response text / use emotion animation flag, from wav flag

ok
Wheather / ImageSpace Modifier / only Day has been verified

ok
Wheather / Cloud layers / edit the filenames so that they can be seen

ok
NPC AI Data / Mood UNDEFINED ?= Mood Neutral, Mood types % see NPC section

ok
NPC AI Data / Confidence types % see NPC section

ok
IDLE FurnitureIdles / ANAM has a FormID to IDLE; hierarchy?

ok
Reference flags

ok
Reference formid = 94335 / formid = 0x0001707f / has XTEL and XNDP
Wasteland/AnacostiaCrossingExterior + MetroGateLoad (Door)

NavMesh / edit or create new from scratch

 ---*---

Check screenshots of Effects for Actor Values; have screenshots already

ok
Package BrockServeSister / screenshot of every condition, the last
int in CTDA seems to be Reference etc. FormID. Here: SisterRef.

ok
Perk / for each entry point type, check function choices

ok
Quest:
MQSearch
MS10 / Oasis
MQ06
MQ04

ok, probably not
Ragdoll / Are Foot IK, Look IK, Grab IK any effect? Data was not stored to esp.

ok
Addon Node / create esps and take screenshots

ok
Projectile / Types / Light FormID % ok
Destructible Object Data: VATS Targetable flag % ok
Destructible Object Stage: Replacement Model % could not set
Use MineFragProjectile as a test.

ok, slider had no any effect to esp file
Encounter Zone / Ownership, both NPC and Faction / analyze slider and value
CitadelZone

ok
Terminal:
Alternate colors flag
Dislay Note Add flag
Force Redraw flag

ok but need to recheck L/B/DNAM and other IS modifiers
Wheather:
LNAM
BNAM
DNAM
ImageSpace Modifier FormID % Day is ok, verify others

ok
World Space:
No LOD Noise flag and Can't Wait flags.
Music DEFAULT what is it? % No Music FormID subrecord

ok
Region / Border region, No color flags

ok
Cell / create esps for Common Data Water Height

Weap / change Health and check if EAMT change. % They are separate
Weap / Ammo Use / Aim Arc % ok
Weap / Attack Anim, Animation Type

Armor / create esp for NoseRing

NPC:
create esp for UNDEFINED Mood
create esp for Frenzied Aggression

Object Effect / more types than Weapon and Apparel

Light / verify flags

Quest / create esp for ICON

Quest / screenshots of MS10

IDLE / create esps

Camera Paths / create esp for the flag Must have Camera Shots

Default Objects / click on the list of objects

Talking Activator / Flags, Looping sound

Reference / more examples
Wasteland/AnacostiaCrossingExterior

Condition functions and their parameters / IDLE, Camera Paths etc.

NavMesh of Wasteland/AnacostiaCrossingExterior / expand Type column

NavMesh AnchorageWMEast / edit the NavMesh and create esps


 ---*---

ok
Dialogue/INFO:
check info detail flags are part of info or response text; create esps

ok
Hair / expand full names and check flags

ok
World LOD / click on the list

ok
Light Template (LGTM) / Get values from cell

ok
Cell:
check other tabs of interiors
flags

ok
World Space
flags: PNAM DATA
swaps impact data

ok
Weather:
Wind Speed, Trans Delta, Sun Glare, Sun Damage min and max vals.
Cloud Speed min and max vals.
Does change of Time change imagespace modifier in MegatonFalloutDecay?
What else changes?

ok
Terminal MS18StatesmanHotelFrontDesk / has TNAM, click through menu items

ok
Placeable Water / test flags Refracts, Actors, Dead Bodies, Dynamic Objects, Underwater fog

ok
Encounter Zone CitadelZone / has -1

ok
Door / verify flags

ok
Door CitadelDoorARingToLab

ok
Projectile / check destruction data
FusionCarBatteryProjectile
MineFragProjectile
check if esp need to be created for destruction data

ok
Projectile / create esp for Supersonic (on) + Hitscan (off) flags and Light

ok
Imagespace Modifier:
check if red colored values are time-animated; move the time slider.
click the X buttons.
create esp for curves with increasing number of points.

ok
Imagespace:
DefaultImageSpaceExterior
VaultImageSpace01

ok
Explosion AmmoBoxExplosion / verify sounds

ok
Explosion / Sound Levels

ok
Effect Shader / modes

ok
Camera Shot / CamTargetHitOnShoot has data size 36 instead of 40

ok
AddOn Node / what is the last column "2..." "1..."?
Can the node index and particle system caps be edited?

ok
Water Type / Noise gen: how many layers? do they have own parameter sets?

ok
Texture Set / check how the bottom of window changes for all maps

ok
Texture Set / check the examples listed in the doc section

ok
Sound / Attenuation tab + Loop start and end

ok
Message
DCWorld11GeneratorLowSkillMsg screenshots
MegatonBombDisarmSuccessMsg
Auto-display flag

ok
CSTY melee alert ok flag, ignore flags, simple-weapon values,
flee flag, max targeting fov

ok
WEAP flags, skill, reach, fire rate, ammo use, #projectiles,
limb dmg mult, burst shot, long burst, resist, on hit, fixed,
override flags, crit on death flag, embedded weapon
flag (MisterHandyFlamer2HL), sight usage, aim arc,
hand grip, attack anim, animation type, detection sound level,
animation multipliers and flags, has scope (),

ok
Armor Addon: create esp files for flags

ok
Armor: create esp files for flags

ok
Ingestible: click results, take screenshots

ok
NPC
AI Data / Assistance and Mood esps
AI Data / Aggression, etc. types
Blood: Impact Material Types

ok
Actor Effect: edit the effects, take screenshots

ok
Leveled Character

ok
RGDL create esp files for pose matching sliders

ok
RGDL more example screenshots

ok
RACE screenshots of Asian and AsianChild, both male and female

ok
RACE Face Data: click the edit buttons

ok
QUST Conversation Info: try edit response text by double clicking

ok
PERK screenshots of Entry Point types

ok
PACK BrockServeSister
screenshots of conditions; double click to edit

ok
PACK DemoProtectronTurnOn screenshots; IDLB

ok
PACK create esp for FOV

ok
PACK more flags
create esp files for enable fallout behavior
create esp files for Use Weapon tab flags

ok but explanation for MODS is not complete
Head Part: screenshot of
BeardChopperFull / Doom Rider
BeardMustacheCurlyFull / The Comrade

ok but c.g.m. could not be modified
FACT create esp for special combat flag and for crime gold multiplier

ok
EYES create esps for Can Be Male and Can Be Female

ok
CLAS create esps for flags

test_bodypart.esp has only TES4; toggling IK Data on caused no
changed data 
BrahminBodyPartData / edit the body parts, take screenshots

check new int in the header

What records are not in Fallout3?

verify COED subrecord

ok
Check that records are named correctly:
grep '\"..../' parsebuffer_*.c|more
parsebuffer_achr.c:      printf("ACHR/EDID %i\n",n);
parsebuffer_achr.c:      printf("ACHR/NAME %i\n",n);

============================================================================

ACHR
Character reference


ACHR/DATA
ACHR/EDID
ACHR/INAM
ACHR/NAME
ACHR/SCHR
ACHR/TNAM
ACHR/XESP
ACHR/XEZN
ACHR/XIBS
ACHR/XLCM
ACHR/XLKR
ACHR/XMRC
ACHR/XPPA
ACHR/XPRD
ACHR/XRDS
ACHR/XRGB
ACHR/XRGD unknown
ACHR/XSCL


============================================================================

ACRE
Creature reference

ACRE/DATA
ACRE/EDID
ACRE/INAM
ACRE/NAME
ACRE/SCHR
ACRE/TNAM
ACRE/XAPD
ACRE/XAPR
ACRE/XEMI
ACRE/XESP
ACRE/XEZN
ACRE/XLCM
ACRE/XLKR
ACRE/XMRC
ACRE/XOWN
ACRE/XPPA
ACRE/XPRD
ACRE/XRDS
ACRE/XRGB
ACRE/XRGD
ACRE/XSCL

============================================================================

ok
ACTI
Activator

capture_20081215_214336.png
capture_20090202_230413.png

Todo:
Verify flags % ok
DMDL % ok


NavMesh Generation Import Option
Collision Geometry
Filter
Bounding Box
Ground

Flags: % in the record header?
Dangerous                        % nowhere
Random Anim Start
Has Tree LOD
Has Platform/Language Specific Textures % only ARMO verified

============================================================================

ok
ADDN
AddOn Node

capture_20081215_210500.png
capture_20090106_205716.png

Todo:
Master Particle System Cap; first short in DNAM? yes % ok
Second short in DNAM. % ok see below

Note:
FireSmall01 has Master Particle System Cap disabled
and second short = 0.
Decided that the second short must be 0 Disabled 1 Enabled.
But it cannot be set in the editor.

FireSmall01 / 0 / Effects\ExplosionFireSmall01.NIF
MPSFireMed01 / 1 / MPS\MPSFireMed01.NIF

All Addon Nodes with 1 have models from MPS directory.
MPS = Master Particle System.
These NIF files have node "BSMasterParticleSystem".

Conclusion: If the NIF has node "BSMasterParticleSystem", then
the second short should be set to 1.


============================================================================

final check
ALCH
Ingestible

capture_20081215_194724.png
capture_20081226_005011.png
capture_20090201_103236.png

Todo:
DEST % ok

Effect Item's duration type (s,m,h,d) is not stored. The value
just gets larger.

When Morphine was switched to Medicine, the Child Can Use
flag was automatically enabled.

Equip Types are listed at end of this doc.

What Equip Type means? Why a food item has BigGuns equip type?

Results refs to MGEFs.

What are all Actor Values in ALCH/EFIT?

============================================================================

ok
AMMO

capture_20081215_195259.png
capture_20090129_102244.png

AMMO/DATA 13
Speed 1.000000
0000,0000
       ^~Playable

============================================================================

ok
ANIO
Anim Object

capture_20081215_202224.png


============================================================================

continue
ARMA
Armor Addon

capture_20081215_200058.png
capture_20090202_231025.png
capture_20090204_001713.png % DNAM check
capture_20090207_001131.png

Todo:
Second set of flags in BMDT % see Armor % ok not settable, are they used?
First set of flags in BMDT % ok
DNAM % Modulates Voice % partially checked % ok perhaps unused
MODD
MOSD
MODS
MO3S

Not found in the screenshots.
Editor has no field for this kind of values.
ARMA/DNAM values:
0
200
500
1000

ok
ARMA/BMDT 8
0000,0000,0000,0000,0000,0110,0000,0010
0000,0000,0000,0000,0000,0000,1000,0000
0000,0000,0000,0010,0000,0000,0000,0000
                                      ^Head
                                     ^Hair
                                    ^UpperBody
                                   ^LeftHand
                                 ^RightHand
                                ^Weapon
                               ^PipBoy
                              ^Backpack
                           ^Headband
                          ^Hat
                         ^EyeGlasses
                     ^Mask
                 ^BodyAddOn1


Necklace
NoseRing
Earrings
Choker
MouthObject
BodyAddOn2
BodyAddOn3

Equip Types are listed at end of this doc.

Not in the editor: We might have a reduced editor.
ARMA/DATA 12
Value 0
Health 100
Weight 0.000000

What is this:
ARMA/DNAM 4
0
ARMA/MODD 1
4
ARMA/MOSD 1
4

============================================================================

final check
ARMO
Armor

capture_20081215_195414.png
capture_20081226_190037.png
capture_20090106_230528.png

Todo:
Playable flag % ok
NoseRing flag % ok
MODD
MOSD
MODS
MO2S
MO3S
MO4S


The flag Has Platform/Language Specific Textures is in the record header.


ARMO/BMDT 8
0000,0000,0000,0000,0000,0000,0000,0100
0000,0000,0000,0000,0000,0110,0000,0010
0000,0000,0000,0000,0100,0110,0000,0011
0000,0000,0000,0000,0100,1110,0000,0010
0000,0000,0000,0000,0000,0000,0100,0000
0000,0000,0000,0000,0000,0000,0000,1000
                                      ^Head
                                     ^Hair
                                    ^UpperBody
                                   ^LeftHand
                                 ^Hand X
                                ^Foot X
                               ^PipBoy
                              ^
                            ^Amulet X
                           ^Headband
                          ^Hat
                         ^EyeGlasses
                       ^Quiver X
                      ^Shield X
                     ^Mask
                    ^Tail X
                  ^Hide Rings X
                 ^Hide Amulet X
           ^~Playable X  % Where is Playable flag?
          ^Heavy (1) Light (0) X
0
205
205
205

Playable flag is not in the subrecord flags.
Is it in somewhere in the header? Not in the flags1.

Where is Modulates Voice flag? % HelmetEyebot

Check MODD if it contains flags.
1 % Playable & Modulates Voice
1 % Playable
No MODD % P/L Textures % Pipboy
8 % None


Oblivion:
                                      ^Head
                                     ^Hair
                                    ^UpperBody
                                   ^LowerBody
                                 ^Hand
                                ^Foot
                               ^RightRing
                              ^LeftRing
                            ^Amulet
                           ^Weapon
                          ^BackWeapon
                         ^SideWeapon
                       ^Quiver
                      ^Shield
                     ^Torch
                    ^Tail
                  ^Hide Rings
                 ^Hide Amulet
           ^~Playable
          ^Heavy (1) Light (0)


Equip Types are listed at end of this doc.

What is this:
ARMO/MODD 1
1


============================================================================

ok
ASPC
Acoustic Space

capture_20081215_210134.png

Environment Type:
0 None
1 Default
Generic
3 Paddedcell
4 Room
5 Bathroom
6 Livingroom
7 Stoneroom
Auditorium
Concerthall
10 Cave
Arena
12 Hangar
Carpetedhallway
14 Hallway
Stonecorridor
Alley
17 Forest
18 City
Mountains
20 Quarry
Plain
Parkinglot
Sewerpipe
Underwater
25 Smallroom
26 Mediumroom
Largeroom
28 Mediumhall
Largehall
Plate

Environment Type:
0 None
1 Default
2 Generic
3 Paddedcell
4 Room
5 Bathroom
6 Livingroom
7 Stoneroom
8 Auditorium
9 Concerthall
10 Cave
11 Arena
12 Hangar
13 Carpetedhallway
14 Hallway
15 Stonecorridor
16 Alley
17 Forest
18 City
19 Mountains
20 Quarry
21 Plain
22 Parkinglot
23 Sewerpipe
24 Underwater
25 Smallroom
26 Mediumroom
27 Largeroom
28 Mediumhall
29 Largehall
30 Plate

0 None 1 Default 2 Generic 3 Paddedcell 4 Room 5 Bathroom 6 Livingroom 7 Stoneroom 8 Auditorium 9 Concerthall 10 Cave 11 Arena 12 Hangar 13 Carpetedhallway 14 Hallway 15 Stonecorridor 16 Alley 17 Forest 18 City 19 Mountains 20 Quarry 21 Plain 22 Parkinglot 23 Sewerpipe 24 Underwater 25 Smallroom 26 Mediumroom 27 Largeroom 28 Mediumhall 29 Largehall 30 Plate


============================================================================

ok
AVIF

capture_20081215_225735.png
capture_20081215_225947.png % List of AVIFs


ScriptName  Type

ActionPoints Derived Statistic
Aggression Actor Value
Agility Primary Statistic
Assistance Actor Value
Barter Skill
BigGuns Skill
BloodyMess Actor Value
BrainCondition Derived Statistic
CarryWeight Derived Statistic
Chameleon Actor Value
Charisma Primary Statistic
Confidence Actor Value
CritChance Derived Statistic
DamageResist Derived Statistic
DetectLifeRange Actor Value
ElectricResist Actor Value
EmpResist Actor Value
Endurance Primary Statistic
EnduranceCondition Derived Statistic
Energy Actor Value
EnergyResist Actor Value
EnergyWeapons Skill
Explosives Skill
Fatigue Derived Statistic
FireResist Actor Value
FrostResist Actor Value
HealRate Derived Statistic
Health Derived Statistic
IgnoreClippledLimbs Actor Value
Intelligence Primary Statistic
InventoryWeight Actor Value
Invisibility Actor Value
Karma Derived Statistic
LeftAttackCondition Derived Statistic
LeftMobilityCondition Derived Statistic
Lockpick Skill
Luck Primary Statistic
Medicine Skill
MeleeDamage Derived Statistic
MeleeWeapons Skill
Mood Actor Value
NightEye Actor Value
Paralysis Actor Value
Perception Primary Statistic
PerceptionCondition Derived Statistic
PoisonResist Derived Statistic
RadiationRads Actor Value
RadResist Derived Statistic
Repair Skill
Responsibility Actor Value
RightAttackCondition Derived Statistic
RightMobilityCondition Derived Statistic
Science Skill
SmallGuns Skill
Sneak Skill
Speech Skill
SpeedMult Derived Statistic
Strength Primary Statistic
Unarmed Skill
UnarmedDamage Actor Value
Variable01 Actor Value
Variable02 Actor Value
Variable03 Actor Value
Variable04 Actor Value
Variable05 Actor Value
Variable06 Actor Value
Variable07 Actor Value
Variable08 Actor Value
Variable09 Actor Value
Variable10 Actor Value
WaterBreathing Actor Value
XP Derived Statistic


============================================================================

ok
BOOK
Book

capture_20081215_200342.png

Todo:
Add MICO % ok
Add DEST % ok
Add YNAM % ok
Add ZNAM % ok

BOOK/DATA 10
0000,0010
       ^Can't be Taken
Teaches -1 % -1 NONE 0 Barter 1 Big Guns 2 Energy Weapons 3 Explosives 4 Lockpick 5 Medicine 6 Melee Weapons 7 Repair 8 Science 9 Small Guns 10 Sneak 11 Speech 13 Unarmed
-1 NONE
0 Barter
1 Big Guns
2 Energy Weapons
3 Explosives
4 Lockpick
5 Medicine
6 Melee Weapons
7 Repair
8 Science
9 Small Guns
10 Sneak
11 Speech
13 Unarmed




============================================================================

ok
BPTD
Body Part Data

capture_20081215_053525.png
capture_20081215_053841.png % Body Part window
capture_20081225_212356.png
capture_20090129_102516.png

Todo:
Scale floats % ok
Explodable Absolute flag % ok
Severable Explosion Type % ok
Severable Generic Debris % ok
Severable Debris Count % ok
Pose Matching % could not set
Part Type % ok
Nodes % ok, the node names are in the esm/esp files


Chunk name 0: BPTD 1 288469911
flags 1 = 0000,0000,0000,0000,0000,0000,0000,0000
formid = 88115 / formid = 0x00015833
flags 2 = 0000,0000,0010,0111,0100,0010,0001,0001
65551
Chunk name: EDID
BPTD/EDID 20
BrahminBodyPartData
Chunk name: MODL
BPTD/MODL 31
Creatures\Brahmin\Skeleton.nif
Chunk name: BPTN
BPTD/BPTN 6
Heads % Part Name
Chunk name: BPNN
BPTD/BPNN 13
Bip01 Neck2R % Part Node % Node Name
Chunk name: BPNT
BPTD/BPNT 12
Bip01 HeadR % VATS Target
Chunk name: BPNI
BPTD/BPNI 43
BASE Meshes\Creatures\Brahmin\Skeleton.nif % IK Data Start Node
Chunk name: BPND
BPTD/BPND 84
0.500000 % Damage Mult
9
1
20 % Health Perc
25
50 % Hit Chance
50
2
0
111295
87053
0
1.000000
0
0
0
1.000000
0
0
0
0
0
0
0
0
0
1.000000
Chunk name: NAM1
BPTD/NAM1 20
Gore\HeadBits01.NIF
Chunk name: NAM4
BPTD/NAM4 43
BASE Meshes\Creatures\Brahmin\Skeleton.nif
Chunk name: NAM5
BPTD/NAM5 72
f3 f4 0c 67 6e 88 d4 d3  "g.........ts"
73 74 0c 67 73 88 d4 d3  "g.........ts"
65 72 0d 74 38 7a 38 71  "t..........re"
ee df 0e 67 ed e0 f1 fc  "g..........._n"
6e 5f 0e 67 f2 e0 f1 fc  "g..........._n"
65 72 0d 74 38 7a 38 71  "t..........re"
f3 df 0e 67 ed e0 f1 fc  "g..........._s"
73 5f 0e 67 f2 e0 f1 fc  "g..........._s"
65 72 0d 74 38 7a 38 71  "t..........re"


Last part follows:

Chunk name: BPTN
BPTD/BPTN 6
Torso
Chunk name: BPNN
BPTD/BPNN 6
Bip01
Chunk name: BPNT
BPTD/BPNT 13
Bip01 Spine1
Chunk name: BPNI
BPTD/BPNI 43
BASE Meshes\Creatures\Brahmin\Skeleton.nif
Chunk name: BPND
BPTD/BPND 84
1.000000
2
0
70 % Health Perc
26
100 % Hit Chance
0
0
0
0
0
0
1.000000
0
0
0
1.000000
0
0
0
0
0
0
0
0
0
1.000000
Chunk name: NAM1
BPTD/NAM1 1

Chunk name: NAM4
BPTD/NAM4 43
BASE Meshes\Creatures\Brahmin\Skeleton.nif
Chunk name: NAM5
BPTD/NAM5 0
Chunk name: RAGA
BPTD/RAGA 4
415971 formid? % Ragdoll Data FormID / BrahminRagdoll
End of BPTD

 ---*---

Subrecords:

EDID
MODL

% this repeats for every part
BPTN
BPNN
BPNT
BPNI
BPND
NAM1
NAM4
NAM5

RAGA

 ---*---

BPTD/BPND bytes inBrahminBodyPartData:
% order in Fallout3.esm
Bip01 Neck2R      9  1 20 25  50 50 2 0
Bip01 Neck2L      9  2 20 25  50 50 3 0
Bip01 R Thigh    11 11 15 30  30 50 3 0
Bip01 L Thigh    11  8 15 29  30 50 3 0
Bip01 R UpperArm 11 10 15 30  30 50 3 0
Bip01 L UpperArm 11  7 15 29  30 50 3 0
Bip01             2  0 70 26 100  0 0 0

% order in screenshot
Bip01 Neck2R      9  1 20 25  50 50 2 0  0100110  
Bip01 Neck2L      9  2 20 25  50 50 3 0
Bip01 L Thigh    11  8 15 29  30 50 3 0  1000110
Bip01 L UpperArm 11  7 15 29  30 50 3 0
Bip01 R Thigh    11 11 15 30  30 50 3 0
Bip01 R UpperArm 11 10 15 30  30 50 3 0
Bip01             2  0 70 26 100  0 0 0  1000000
                                    ^Explodable/Debris Count
                                 ^^Explosion Chance %
                             ^^^To Hit Chance
                          ^^Actor Value
                       ^^Health Percent
                    ^^Part Type
                 ^^Flags: 1 Severable 2 IK Data 8 Explodable

Part Types:
0 DismemberedLimb0 Torso
1 DismemberedLimb1 Head1
2 DismemberedLimb2 Head2
3 DismemberedLimb3 LeftArm1
4 DismemberedLimb4 LeftArm2
5 DismemberedLimb5 RightArm1
6 DismemberedLimb6 RightArm2
7 DismemberedLimb7 LeftLeg1
8 DismemberedLimb8 LeftLeg2
9 DismemberedLimb9 LeftLeg3
10 DismemberedLimb10 RightLeg1
11 DismemberedLimb11 RightLeg2
12 DismemberedLimb12 RightLeg3
13 DismemberedLimb13 Brain
14 DismemberedLimb14 Weapon

0 DismemberedLimb0 Torso 1 DismemberedLimb1 Head1 2 DismemberedLimb2 Head2 3 DismemberedLimb3 LeftArm1 4 DismemberedLimb4 LeftArm2 5 DismemberedLimb5 RightArm1 6 DismemberedLimb6 RightArm2 7 DismemberedLimb7 LeftLeg1 8 DismemberedLimb8 LeftLeg2 9 DismemberedLimb9 LeftLeg3 10 DismemberedLimb10 RightLeg1 11 DismemberedLimb11 RightLeg2 12 DismemberedLimb12 RightLeg3 13 DismemberedLimb13 Brain 14 DismemberedLimb14 Weapon

VATS target choices maybe are read from the skeleton nif, check.

Actor Values:
NONE % ????
25 PerceptionCondition
26 EnduranceCondition
27 LeftAttackCondition
28 RightAttackCondition
29 LeftMobilityCondition
30 RightMobilityCondition
31 BrainCondition

Severable/Explosion Types:
NONE
AmmoBoxExplosion % these are EXPL records
Artillery
BloatFly
BusLarge

Flags:
IK Data
 Biped Data
 Is Head
 Headtracking
Severable
Explodable
 Explosion Chance % Absolute

Generic Debris:
NONE
% list of DEBR records

Blood Spurt / Decal Impact Data:
NONE
% list of IPDS records

 ---*---

DogBodyPartData / Head:

Bip01 Neck1       1  1 40 25  30  0 0 0  0100100
                                    ^Explodable/Debris Count
                                 ^^Explosion Chance %
                             ^^^Hit Chance
                          ^^Actor Value
                       ^^Health Perc
                    ^^Part Type
                 ^^Flags: 1 Severable 2 IK Data 8 Explodable

Last values of BPND:

191815 Severable Blood Spurt Decal Impact Data FormID
0
2 % Severable Decal Count
1.000000

 ---*---

DefaultBodyPartData / Head:

BPTD/BPND 84
Damage Mult 2.000000
0011,1011
        ^Severable
       ^IK Data
     ^Explodable
Part Type 1
Health Percent 20
Actor Value 25
To Hit Chance 30
Explosion Chance % 30
Explodable Debris Count 3
0
111295 % Explodable Generic Debris FormID
87053 % Explodable Explosion Type FormID
60.000000 % IK Data Tracking Max Angle
1.000000
0
0
0
1.000000
0
0
0
0
4.625123 % Local Rotate Y
0
Severable Blood Spurt Decal Impact Data FormID 191815
Explodable Blood Spurt Decal Impact Data FormID 191815
Severable Decal Count 4
Explodable Decal Count 6
0
0
1.000000

Local Rotate Y
? 4.625123/(2.0*Pi)*360
%2 = 265.0000276288858431806593122

Flags:
0011,1011
        ^Severable
       ^IK Data
      ^Biped Data (Not marked when IK Data = 0)
     ^Explodable
   ^Is Head
  ^Headtracking


Unknown floats 1.0000:
Severable Debris Scale
Explodable Limb Replacement Scale
Explodable Debris Scale

 ---*---


============================================================================

ok
CAMS
Camera Shot

capture_20081215_210631.png
capture_20081226_111029.png

Camera Action:
0 Shoot
1 Fly
2 Hit

Camera Location:
0 Attacker
1 Projectile
2 Target

Camera Target:
0 Attacker
1 Projectile
2 Target


Flags:
0000,0111
0011,0111
0000,0011
0010,0111
0001,0101
0000,1011
        ^Position Follows Location
       ^Rotation Follows Target
      ^Don't Follow Bone
     ^First Person Camera
   ^No Tracer
  ^Start At Time Zero


AttackerActionCam
CAMS/DATA 40
0 % Camera Action
0 % Camera Location
2 % Camera Target
7 % Flags
20.000000 % Time Multipliers Player
1.000000 % Time Multipliers Target
0.100000 % Time Multipliers Global
5.000000 % Max Time
2.250000 % Min Time
0.000000 % Target %% Between Actors % This seems missing when data size is 36


============================================================================

continue
CELL
Cell

capture_20081215_222820.png
capture_20081226_124142.png
capture_20090106_220532.png
capture_20090204_001955.png
capture_20090207_002921.png

Todo:
XCLW % ok but it is water height only for exteriors
XCET
XGLB % not in Fallout3.esm
flags 1 = 0000,0000,0000,0000,0000,0100,0000,0000
                                    ^What is this for CELL? ok Persistent
XRNK % ok Required Rank
IMPF % ok IMPF works also as the flag Swaps Impact Data


Chunk name 0: CELL 2 31990634

Interior has water height 0.0 which cannot be modified.
Exterior with
CELL/XCLW 4
Water Height 340282346638528859811704183484516925440.000000
has default water level 10500.0.
Where this default has been defined?


Flags:
Has Water
No LOD Water % ok
Can't Travel From Here % ok two flags, one for interiors, second for exteriors
Hand Changed % ok
Force Hide Land Quad 1 % Requires Behave like exterior?? No effect in AgathasHouseInterior.
Force Hide Land Quad 2
Force Hide Land Quad 3
Force Hide Land Quad 4
Public Area % ok
Behave Like Exterior
Can't Wait % ok in record header flags

CELL/DATA 1
0000,0001
        ^Can't Travel From Here
       ^Has Water
     ^Oblivion Interior % XXXX what is this in Fallout3?
  ^Public Area
 ^Hand Changed
^Behave Like Exterior

CELL/LNAM 4
0000,0000,0000,0000,0000,0000,1001,1111 % 1     4 5 6   8 9 AlexandriaArms01
0000,0000,0000,0000,0000,0001,1001,1111 % 1     4 5 6 7 8 9 AndaleTheSmithsHouse
0000,0000,0000,0000,0000,0000,0000,0111 % 1     4       8   CapitolBuilding01
0000,0000,0000,0000,0000,0000,0000,1011 % 1       5     8   CapitolBuilding02
0000,0000,0000,0000,0000,0000,1001,1010 % 1       5 6     9 ChryslusBuilding01
0000,0000,0000,0000,0000,0000,1111,1010 % 1 2 3   5 6     9 CitadelLab
0000,0000,0000,0000,0000,0000,0001,1111 % 1     4 5 6   8   CorvegaFactory02
0000,0000,0000,0000,0000,0000,0100,1010 % 1   3   5         FriendshipMetroUtility
                                      ^8 Ambient Color
                                     ^1 Directional Color
                                    ^4 Fog Color
                                   ^5 Fog Near
                                 ^6 Fog Far
                                ^2 Directional Rot
                               ^3 Directional Fade
                              ^9 Clip Distance
                            ^7 Fog Power

Lighting Template Inherit flag:
1 Directional Color
2 Directional Rot
3 Directional Fade
4 Fog Color
5 Fog Near
6 Fog Far
7 Fog Power
8 Ambient Color
9 Clip Distance


CELL/IMPS 12
Type 0 % Stone
Orig Data FormID 191816 % BloodSpoutRedData
New Data FormID 767927 % BloodSpoutRobotData
Chunk name: IMPS
CELL/IMPS 12
Type 1 % Dirt
Orig Data FormID 123773 % BalisticDirtImpact
New Data FormID 680078
Chunk name: IMPS
CELL/IMPS 12
Type 2 % Grass
Orig Data FormID 444004 % BaseBallBatConcImpact
New Data FormID 392513
Chunk name: IMPS
CELL/IMPS 12
Type 3 % Glass
Orig Data FormID 102522 % BallisticGlassImpact
New Data FormID 680077
Chunk name: IMPS
CELL/IMPS 12
Type 4 % Metal
Orig Data FormID 436079 % BBFleshImpact
New Data FormID 436080
Chunk name: IMPS
CELL/IMPS 12
Type 5 % Wood
Orig Data FormID 637516 % EnergyImapctBlue01
New Data FormID 109056
Chunk name: IMPS
CELL/IMPS 12
Type 6 % Organic
Orig Data FormID 825850 % BehemothFireHydrantImpactFlesh
New Data FormID 825851
Chunk name: IMPS
CELL/IMPS 12
Type 7 % Cloth
Orig Data FormID 480425 % AntFleshImpact
New Data FormID 755604
Chunk name: IMPS
CELL/IMPS 12
Type 8 % Water
Orig Data FormID 637151 % CentaurVomitImpact
New Data FormID 517763
Chunk name: IMPS
CELL/IMPS 12
Type 9 % Hollow Metal
Orig Data FormID 444006 % BaseBallBatMetalImpact
New Data FormID 420013
Chunk name: IMPS
CELL/IMPS 12
Type 10 % Organic Bug
Orig Data FormID 517695 % BiteFleshImpact
New Data FormID 168653
Chunk name: IMPS
CELL/IMPS 12
Type 11 % Organic Glow
Orig Data FormID 198333 % BladeMetalCutMedium
New Data FormID 204262
Chunk name: IMPF
CELL/IMPF 300
ConcSolid "myconcsolid"
ConcBroken "myconcbroken"
MetalSolid "mymetalsolid"
MetalHollow "mymetalhollow"
MetalSheet "mymetalsheet"
Wood "mywood"
Sand "mysand"
Dirt "mydirt"
Grass "mygrass"
Water "mywater"

Types:
0 Stone 1 Dirt 2 Grass 3 Glass 4 Metal 5 Wood 6 Organic 7 Cloth 8 Water 9 Hollow Metal 10 Organic Bug 11 Organic Glow


============================================================================

ok
CLAS
Class

capture_20081215_054851.png
capture_20081215_230012.png
capture_20081225_215328.png

Todo:
List tag skills in printout.

Tag Skills:
-1 NONE
32 Barter
33 Big Guns
34 Energy Weapons
35 Explosives
36 Lockpick
37 Medicine
38 Melee Weapons
39 Repair
40 Science
41 Small Guns
42 Sneak
43 Speech
44 % not used?
45 Unarmed

-1 NONE 32 Barter 33 Big Guns 34 Energy Weapons 35 Explosives 36 Lockpick 37 Medicine 38 Melee Weapons 39 Repair 40 Science 41 Small Guns 42 Sneak 43 Speech 45 Unarmed

Flags:
0000,0000,0000,0000,0000,0000,0000,0110
0000,0000,0000,0000,0000,0000,0001,0000
0000,0000,0000,0000,0000,0100,0001,1011
0000,0000,0000,0010,0000,0000,0000,0111
                                      ^Weapons
                                     ^Armor
                                    ^Alcohol
                                   ^Books
                                 ^Food
                                ^Chems
                               ^Stimpacks
                          ^Miscellaneous
                     ^Training
                  ^Recharge
                 ^Repair

Other flags:
Guard % this is value 2 in int prior the flags

Barter Gold % perhaps cannot be changed

============================================================================

continue
CLMT
Climate

capture_20081215_214912.png
capture_20090204_002512.png

Todo:
WLST third value, third column in the list of wheather types % ok


WLST third column is Global but it could not be edited.

Why Earth has Masser and Secunda as well? They are Oblivion moons.


============================================================================

ok
CONT
Container

capture_20081215_215040.png
capture_20090119_173435.png

Todo:
More flags % ok


NavMesh Generation Import Option
Collision Geometry
Filter
Bounding Box
Ground

Flags: % in the record header?
Respawns
Random Anim Start

flags 1 = 0000,0000,0000,0000,0000,0000,0000,0000 % Collision Geometry
flags 1 = 0000,0100,0000,0000,0000,0000,0000,0000 % Filter
flags 1 = 0000,1000,0000,0000,0000,0000,0000,0000 % Bounding Box
flags 1 = 0100,0000,0000,0000,0000,0000,0000,0000 % Ground

============================================================================

ok
CPTH
Camera Path

capture_20081215_233618.png
capture_20090107_001312.png

Todo:
Flag: Must have Camera Shots % ok


Camera Zoom: Default or Disable or Shot List
Flag: Must have Camera Shots
Camera Shot List
Conditions

Tree list of camera paths.

% CZ=Default, MhCS=1
CPTH/EDID 12
PlayerDeath
CPTH/ANAM 8
0
0
CPTH/DATA 1
0

CPTH/EDID 14
MQ08GECKdeath
CPTH/ANAM 8
341165 % Parent Camera Path FormID (for the tree hiearchy)
0
Chunk name: DATA
CPTH/DATA 1
1 % Camera Zoom: 0 Default 1 Disable 2 Shot List
Chunk name: SNAM
CPTH/SNAM 4
826107 formid?

CPTH/EDID 17
WeirdFaceCamLeft
CPTH/ANAM 8
151137 % Parent
820178 % Prev
CPTH/DATA 1
2


Attack Damage 232
3

============================================================================

continue
CREA
Creature

capture_20081215_135715.png
capture_20090124_225720.png % extensive test
capture_20090126_182931.png % more tests
capture_20090204_002616.png
capture_20090204_010206.png

Todo:
Use Animation types % ok not all tested but we were able to guess the rest
NAM6 % ok Traits Height not in CREA
NAM7 % ok Traits Weight not in CREA
KFFZ
Two unknowns in DATA: after Health and after Attack Damage


gecktest20090124
Flags:
CREA/ACBS 24
0000,0000,0000,0000,0000,0011,0100,0000 AudioTemplateDog
0000,0000,0100,0000,0000,0011,0100,0000 01 Can't Open Doors
0000,0100,0100,0000,0000,0011,0100,0000 02 No Knockdowns
0000,0100,0100,0000,0000,0011,0100,0010 03 Essential
0000,0100,0100,0000,0000,0011,0100,1010 04 Respawn
0000,0100,0101,0000,0000,0011,0100,1010 05 No VATS Melee
0000,0100,0111,0000,0000,0011,0100,1010 06 Allow PC Dialogue
0001,0100,0111,0000,0000,0011,0100,1010 07 Allow Pickpocket
0011,0100,0111,0000,0000,0011,0100,1010 08 Is Ghost
1011,0100,0111,0000,0000,0011,0100,1010 09 Invulnerable
1011,0100,0111,0000,0000,0011,0100,1010 10 ---
1011,0100,0111,0000,0000,0011,0100,1010 11
1011,0100,0111,0000,0000,0011,0100,1010 12
1011,0100,0111,0000,0000,0011,1100,1010 13 PC Level Mult
1011,0100,1111,0000,0000,0011,1100,1010 14 Aggro Radius Behavior
1011,0100,1111,0000,0000,0011,1100,1010 15
1011,0100,1111,0000,0000,0011,1100,1010 16
1011,0100,0111,0000,0000,0011,1100,1010 17
1011,0100,0111,0000,0000,0011,1100,1010 18
1011,0100,0111,0000,0000,0011,1100,1010 19
1011,0100,0111,0000,0000,0011,1100,1010 20
1010,0100,0111,0000,0000,0011,1010,1010 21 Flies -Walks % Pickpocket went off
1011,0100,0111,0000,0000,0011,1011,1010 22 Swims % Pickpocket went on
1010,0100,0111,0000,0000,0011,1000,1011 23 Biped % Flies Swims Pickpocket went off
1010,0100,0111,0100,0000,0011,1000,1011 24 No Combat in Water
1010,0100,1111,0000,0000,0011,1000,1010 25 Immobile -Biped % No Combat I.W. went off even the Editor displays it is on
1010,0100,1111,0000,0000,0011,1000,1010 26
1010,1100,0111,0000,0000,0011,1000,1010 26-2 Not Pushable -Immobile
1110,1100,0111,0000,0000,0011,1000,1010 27 No Rotating to Head-track
1110,1100,0111,0010,0000,0011,1000,1010 28 No Left Arm
1110,1100,0111,0011,0000,0011,1000,1010 29 No Right Arm
1110,1100,0111,0011,1000,0011,1000,1010 30 No Head
1110,1100,0111,1011,1000,0011,1000,1010 31 No Shadow
1110,1101,0111,1011,1000,0011,1000,1010 32 Tilt Front/Back
1110,1111,0111,1011,1000,0011,1000,1010 33 Tilt Left/Right
1110,1111,0111,1011,1000,1011,1000,1010 34 -Blood Spray
1110,1111,0111,1011,1001,1011,1000,1010 35 -Blood Decal
1110,1111,0111,1011,1000,0010,1000,1010 36 Blood Spray Blood Decal -
1110,1111,0111,1011,1000,0010,1000,1010 37
1110,1111,0111,1011,1000,0011,1000,1010 38
1110,1111,0111,1011,1000,0011,1000,1010 39
                                      ^Biped
                                     ^Essential
                                   ^Respawn
                                 ^Swims
                                ^Flies
                               ^Walks
                              ^PC Level Mult
                            ^Inherits Sound From == NONE
                           ^No low level processing
                         ^~Blood Spray
                       ^~Blood Decal
                    ^No Head
                  ^No Right Arm
                 ^No Left Arm
                ^No Combat in Water
               ^No Shadow
             ^No VATS Melee
            ^Allow PC Dialogue
           ^Can't Open Doors
          ^AI Data Autocalc Services and Immobile (both tested ok, strange)
        ^Tilt Front/Back
       ^Tilt Left/Right
      ^No Knockdowns
     ^Not Pushable
   ^Allow Pickpocket
  ^Is Ghost
 ^No Rotating to Head-track
^Invulnerable


Traits:

Creature Types:
3 Abomination
0 Animal
5 Feral Ghoul
7 Giant
1 Mutated Animal
2 Mutated Insect
6 Robot
4 Super-Mutant

0 Animal
1 Mutated Animal
2 Mutated Insect
3 Abomination
4 Super-Mutant
5 Feral Ghoul
6 Robot
7 Giant

0 Animal 1 Mutated Animal 2 Mutated Insect 3 Abomination 4 Super-Mutant 5 Feral Ghoul 6 Robot 7 Giant


capture_20090124_232707.png
CREA/DATA 17
Traits Creature Type 3 % 0 Animal 3 Abomination
Stats Combat Skill 51
50
50
52 % Health
0
0
0
12 % Attack Damage
0
1 % Strength
2 % Perception
3 % Endurance
5 % Charisma
6 % Intelligence
7 % Agility
8 % Luck

Stats Level 1123 % 1.123 is displayed. 1.1234 was typed.


AI Data:
Training Skills:
0 Barter
1 Big Guns
2 Energy Weapons
3 Explosives
4 Lockpick
5 Medicine
6 Melee Weapons
7 Repair
8 Science
9 Small Guns
10 Sneak
11 Speech
13 Unarmed % no 12

0 Barter 1 Big Guns 2 Energy Weapons 3 Explosives 4 Lockpick 5 Medicine 6 Melee Weapons 7 Repair 8 Science 9 Small Guns 10 Sneak 11 Speech 13 Unarmed


Animation tab:
Use Animation types:

26 AttackLeft
27*AttackLeftUp
28*AttackLeftDown
29*AttackLeftIS
30*AttackLeftISUp
31*AttackLeftISDown

32 AttackRight
33*AttackRightUp
34*AttackRightDown
35*AttackRightIS
36*AttackRightISUp
37 AttackRightISDown

38 Attack3 % ok
39*Attack3Up
40 Attack3Down
41 Attack3IS
42*Attack3ISUp
43*Attack3ISDown

44 Attack4 % ok
45*Attack4Up
46*Attack4Down
47*Attack4IS
48*Attack4ISUp
49*Attack4ISDown

50 Attack5
51 Attack5Up
52 Attack5Down
53 Attack5IS
54 Attack5ISUp
55 Attack5ISDown

56 Attack6
57*Attack6Up
58*Attack6Down
59*Attack6IS
60*Attack6ISUp
61*Attack6ISDown

62 Attack7
63*Attack7Up
64*Attack7Down
65*Attack7IS
66*Attack7ISUp
67*Attack7ISDown

68 Attack8
69 Attack8Up
70*Attack8Down
71*Attack8IS
72*Attack8ISUp
73*Attack8ISDown

74 AttackLoop
75*AttackLoopUp
76*AttackLoopDown
77*AttackLoopIS
78*AttackLoopISUp
79*AttackLoopISDown

80 AttackSpin
81*AttackSpinUp
82*AttackSpinDown
83*AttackSpinIS
84*AttackSpinISUp
85*AttackSpinISDown

86 AttackSpin2
87*AttackSpin2Up
88*AttackSpin2Down
89*AttackSpin2IS
90*AttackSpin2ISUp
91*AttackSpin2ISDown

92 AttackPower
93 AttackForwardPower
94 AttackBackPower

95 AttackLeftPower
96*AttackRightPower

97 PlaceMine
98 PlaceMineUp
99 PlaceMineDown
100*PlaceMineIS
101*PlaceMineISUp
102*PlaceMineISDown

103 PlaceMine2
104*PlaceMine2Up
105*PlaceMine2Down
106*PlaceMine2IS
107*PlaceMine2ISUp
108*PlaceMine2ISDown

109 AttackThrow
110*AttackThrowUp
111*AttackThrowDown
112*AttackThrowIS
113*AttackThrowISUp
114*AttackThrowISDown

115 AttackThrow2
116*AttackThrow2Up
117*AttackThrow2Down
118*AttackThrow2IS
119*AttackThrow2ISUp
120 AttackThrow2ISDown

121 AttackThrow3
122*AttackThrow3Up
123*AttackThrow3Down
124*AttackThrow3IS
125*AttackThrow3ISUp
126*AttackThrow3ISDown

127 AttackThrow4
128*AttackThrow4Up
129*AttackThrow4Down
130*AttackThrow4IS
131*AttackThrow4ISUp
132*AttackThrow4ISDown

133 AttackThrow5
134*AttackThrow5Up
135*AttackThrow5Down
136*AttackThrow5IS
137*AttackThrow5ISUp
138*AttackThrow5ISDown

167 PipBoy
178 PipBoyChild




Blood tab:
Impact Material Type:
0 Stone
1 Dirt
2 Grass
3 Glass
4 Metal
5 Wood
6 Organic
7 Cloth
8 Water
9 Hollow Metal
10 Organic Bug
11 Organic Glow

0 Stone 1 Dirt 2 Grass 3 Glass 4 Metal 5 Wood 6 Organic 7 Cloth 8 Water 9 Hollow Metal 10 Organic Bug 11 Organic Glow


Creature Sound Types:
0 Left Foot
1 Right Foot
2 Left Back Foot
3 Right Back Foot
4 Idle
5 Aware
6 Attack
7 Hit
8 Death
9 Weapon
10 Movement Loop
11 Conscious Loop

0 Left Foot 1 Right Foot 2 Left Back Foot 3 Right Back Foot 4 Idle 5 Aware 6 Attack 7 Hit 8 Death 9 Weapon 10 Movement Loop 11 Conscious Loop


test_crea39_dest.esp finished DEST and DSTD subrecords.
test_crea41_inv2.esp revealed COED subrecord.

Tested 20090204
Two unknowns in DATA: after Health and after Attack Damage.
Adding packages added only PKID subrecords.
Adding factions did not change the unknowns.


Strange / Adding more factions changed:
 Stats Combat Skill
 Foot Weight
 Count of inventory items
And added:
 Actor Effect FormID 513267 % SPLO


============================================================================

continue
CSTY
Combat Style

capture_20081215_202442.png
capture_20081226_142147.png

Todo:
One unknown int.
CSTD % ok
CSAD % ok


CSTY/CSSD 64
0.000000 % Cover Behavior Cover Search Radius
0.000000
2.000000 % Cover Behavior Wait Timer Min
2.000000 % Cover Behavior Wait Timer Max
10.000000 % Cover Behavior Wait to Fire Timer Min
10.000000 % Cover Behavior Wait to Fire Timer Max
2.000000 % Cover Behavior Fire Timer Min
2.000000 % Cover Behavior Fire Timer Max
1.000000
0.000000
0.000000
1.000000
0.000000
10000.000000 % Misc Combat Radius
1.000000
1.000000

Weapon Restrictions types:
None
Melee Only
Ranged Only

Misc flags:
Ignore Threats % ok
Flee Based On Personal Survival % ok
Cannot Use Stealthboy % ok

Explosive Weapons flags:
Ignore Damaging Self
Ignore Damaging Group
Ignore Damaging Spectators

Flags:
0000,0001
        ^0 Movement 1 %Chance
  ^Ignore Damaging Self
 ^Ignore Damaging Group
^Ignore Damaging Spectators
0000,0001
        ^Cannot Use Stealthboy



============================================================================

ok
DEBR
Debris

capture_20081215_210904.png
capture_20090204_003412.png

Todo:
Unknown byte at the end of DATA % ok

DEBR/EDID 11
GoreBits01
DEBR/DATA 21
Percent 90
Model Filename "Gore\MeatBit02.NIF"
1 % Unknown byte

Unknown bits:
Model Filename "Gore\InsectBit02.NIF"
1
Model Filename "Gore\InsectBit03.NIF"
0
Model Filename "Effects\GlowingOneFXShader\GOGlowMesh04.NIF"
0
Model Filename "Vehicles\VertibirdHulk.NIF"
1

Is unknown byte based on NIF content?
How its value is used?
What if we change its value with a mod?

GoreBits01 has percents which sums to 200, not to 100 as in
many other.


============================================================================

ok
DIAL
Dialogue

capture_20081215_230759.png
capture_20081226_141614.png
capture_20081215_231828.png % Player Dialogue window


Dialogue Type:
0 Topics
1 Conversation
2 Combat
3 Persuasion  % Not in GECK Dialogue window but exists in Fallout3.esm
4 Detection
5 Service
6 Misc
7 Radio

DIAL/DATA 2
Dialogue Type 1 % 0 Topics 1 Conversation 2 Combat 3 Persuasion 4 Detection 5 Se
rvice 6 Misc
0000,0010
        ^Rumors
       ^Top-level


============================================================================

ok
DOBJ
Default Objects

capture_20081215_233832.png

Todo:
Add Use column to printout. % ok

Only DOBJ in Fallout3.esm:
DOBJ/EDID 21
DefaultObjectManager
Chunk name: DATA
DOBJ/DATA 84
86377 Stimpak
0
86376 RadX
86375 RadAway
331663 Morphine
438795 PerkParalyzingPalm
111268 PlayerFaction
391630 Stranger
521477 MysteriousStrangerFaction
592136 DefaultExplore
562557 DefaultBattle
562559 DefaultDeath
562560 DefaultSuccess
562560 DefaultSuccess
165179 PlayerVoiceMale
106446 MaleChild01
265538 PlayerVoiceFemale
106448 FemaleChild01
810271 FoodNoneAvailable
0
362103 Addiction01ISFX
End of DOBJ

The Use column seems to be fixed by the game.

Use column:
Stimpak
SuperStimpak
RadX
RadAway
Morphine
PerkParalysis
Player Faction
Mysterious Stranger NPC
Mysterious Stranger Faction
Default Music
Battle Music
Death Music
Success Music
Level Up Music
Player Voice (Male)
Player Voice (Male Child)
Player Voice (Female)
Player Voice (Female Child)
Eat Package Default Food
Every Actor Ability
Drug Wears Off Image Space


============================================================================

ok
DOOR
Door

capture_20081215_215223.png
capture_20081226_121040.png
capture_20090207_010619.png

Todo:
MODS % check the NIF file

CitadelDoorARingToLab
Model "Dungeons\Office\Doors\OffDoorMetalSmL01.NIF"
DOOR/MODS 66
2
OffDoorSmMetal01:18
40
3
OffDoorSmMetal01:19
40
4

Is MODS extracted from MODL automatically?
Or edited? Can it be done in GECK?

capture_20090207_010723.png 
The list of 3D Names is taken from the NIF.
The MODS lists only the rows which have New Texture.

Here I added one more New Texture:

CitadelDoorARingToLab
DOOR/MODS 97
3 % Number of New Textures
OffDoorSmMetal01:19
40
4
OffDoorSmMetal01:18
40
3
OffDoorSmMetal01:13 % 3D Name
192358 % New Texture FormID
1 % 3D Index




Flags:
DOOR/FNAM 1
0000,0000
0000,0100
0000,1000
0001,0000
0001,1000
0001,1100

============================================================================

ok, unknown byte stays unknown
ECZN
Encounter Zone

capture_20081215_215737.png
capture_20081226_121458.png
capture_20090106_211139.png
capture_20090204_013840.png

Todo:
Unknown byte with value -1: CitadelZone


ECZN/DATA 8
0
0
0
0
0 % Unknown 0 or -1
8 % Minimum Level
1 % Flags
0

0000,0001
        ^Never Resets
       ^Match PC Below Minimum Level

============================================================================

continue
EFSH
Effect Shader

capture_20081215_210959.png
capture_20081226_141724.png
capture_20090207_011006.png

Todo:
check mode names

Test 20090207:
Membrane Source Blend Mode: 5 1 3 9
Membrane Dest Blend Mode: 6 2 4 10
Membrane Blend Operation: 1 2 4 1
Membrane Z Test Function: 3 5 7 3
Particle Source Blend Mode 5 5 7 11
Particle Dest Blend Mode 6 6 8 11
Particle Blend Operation 1 3 5 1
Particle Z Test Function 4 8 4 8

Source Blend Mode:
1 Zero
2 One
3 Source Color
4 Source Inverse Color
5 Source Alpha
6 Source Inverted Alpha
7 Dest Alpha
8 Dest Inverse Alpha
9 Dest Color
10 Dest Inverse Color
11 Source Alpha SAT

1 Zero 2 One 3 Source Color 4 Source Inverse Color 5 Source Alpha 6 Source Inverted Alpha 7 Dest Alpha 8 Dest Inverse Alpha 9 Dest Color 10 Dest Inverse Color 11 Source Alpha SAT

Blend Operation:
1 Add
2 Subtract
3 Reverse Subtract
4 Minimum
5 Maximum

1 Add 2 Subtract 3 Reverse Subtract 4 Minimum 5 Maximum

Membrane Z Test Function: % does this set of choices vary?
3 Equal To
5 Greater Than
7 Greater Than or Equal To

3 Equal To 5 Greater Than 7 Greater Than or Equal To

Particle Z Test Function: % does this set of choices vary?
4 Normal
8 Always Show

4 Normal 8 Always Show


Verify:
Initial Speed Along Normal +-
Initial Rotation (deg)
Initial Rotation (deg) +-
Rotation Speed (deg/sec)
Rotation Speed (deg/sec) +-

Explosion Wind Speed

Holes Start Time
Holes End Time
Holes Start Val
Holes End Val
Edge Width

Texture Count U
Texture Count V

Addon Models
Fade In Time
Fade Out Time
Scale Start
Scale End
Scale In Time
Scale Out Time

effectAbsorb
Full Partical Birth Count 1.000000 % Editor displays 78.00
Persistant Particle Count 1.000000 % Editor displays 78.00

Perhaps 78 is the minimum. No, see below for Flames01.
But what happens if we type 78 to the field?
But what happens if we type 1 or 2 to the field?

Flames01
Full Partical Birth Count 30.000000
Persistant Particle Count 15.000000

Count 1.00 may be default which is 78.00.


============================================================================

continue
ENCH
Object Effect

capture_20081215_195124.png
capture_20090106_231325.png
capture_20090207_011748.png

Todo:
Types % ok
Unknown flag

Types:
0 (unused)
1 (unused)
2 Weapon
3 Apparel

Only types 2 and 3 are used in Fallout3.esm.


============================================================================

ok
EXPL
Explosion

capture_20081215_211944.png
capture_20081226_111312.png


EXPL/DATA 52
35.000000 % Force
50.000000 % Damage
500.000000 % Radius
84991 % Light FormID
221672 % Sound 1 FormID
73
770.000000 % IS Radius
605092 % Impact Data Set
221673 % Sound 2 FormID
0.000000
0.000000
0.000000
0

Flags:
Always Uses World Orientation
Ignore LOS Check
Push Explosion Source Ref Only
Ignore Imagespace Swap

Knock Down Living Actors
Always
By Formula
Never

0100,1001  0 % AmmoBoxExplosion       4 Loud   By Formula
0001,0011  1 % ArtilleryExplosion 1 2   Normal Never
0100,0011  1 % BloatFlyExplosion  1   4 Normal Never
0000,1011  0 % BusLargeExplosion  1     Loud   By Formula
0000,1011  1 % BusNukeExplosion   1     Normal By Formula
0100,0101  1 % GasTrapFireBurst       4 Normal Always
        ^Unknown
       ^Always Uses World Orientation
     ^^00 Never 01 Always 10 By Formula
   ^Ignore LOS Check
  ^Push Exposion Source Ref Only % Explosion Source Ref??
 ^Ignore Imagespace Swap


Radiation:
RAD Level
Radius
Dissipation Time

Sound Level:
0 Loud
1 Normal
2 Silent

============================================================================

ok
EYES
Eyes

capture_20081215_055314.png
capture_20081215_223921.png
capture_20081225_220752.png


============================================================================

ok
FACT
Faction

capture_20081215_055443.png
capture_20081225_220848.png
capture_20090207_004802.png

Todo:
When DATA size = 1, is the byte flags? yes. % ok
Rank Insignia % ok cannot be set in editor even the field exists
CNAM % ok cannot be set in editor even the field exists

When more rank data is added, the required rank references,
e.g., in interior Cell, are not changed.

Crime Gold Multiplier % could not be changed

Interfaction Relations / Disposition Modifier:
Interfaction Relations / Group Combat Reaction:
Neutral
Ally
Enemy
Friend


============================================================================

ok
FLST
Form List

capture_20081215_202845.png


============================================================================

continue
FURN
Furniture

capture_20081215_215943.png

Todo:
MNAM explanation
DEST? % ok


============================================================================

GLOB
Global

capture_20081215_232103.png

Todo:
FNAM

GLOB/EDID 24
AhzrukhalChemChanceNone
GLOB/FNAM 1
115
GLOB/FLTV 4
100.000000

GLOB/EDID 13
BehemothsMax
GLOB/FNAM 1
115 % short
GLOB/FLTV 4
5.000000

GLOB/EDID 15
CGCrippleTimer
GLOB/FNAM 1
102 % float
GLOB/FLTV 4
300.000000

GLOB/EDID 10
KarmaGood
GLOB/FNAM 1
108 % long
GLOB/FLTV 4
250.000000

Only FNAM values 102 108 115 exists in Fallout3.esm.


============================================================================

final check
GMST
Game Settings

capture_20081215_232040.png

Todo:
Print float 1.0000, string \"%s%\", etc??


============================================================================

ok
GRAS
Grass

capture_20081215_220648.png


============================================================================

ok
HAIR
Hair

capture_20081215_223843.png
capture_20081226_141245.png


============================================================================

HDPT
Head Part

capture_20081215_060227.png
capture_20081225_221110.png

Todo:
MODS


HDPT/EDID 23
BeardMustacheCurlyFull
HDPT/FULL 12
The Comrade
HDPT/MODS 68
2
BeardMustacheCurly:0
653607 % TXST FormID
-1
BeardMustacheCurly:0
653605 % TXST FormID
0


============================================================================

final check
IDLE

capture_20081215_232221.png
capture_20090106_234341.png
capture_20090111_141635.png

Todo:
Hierarchy % ok

Animation Group Section:
0 Idle
2 Left Arm
3 Left Hand
1 Movement
7 Special Idle
21 Upper Body
4 Weapon
6 Weapon Down
5 Weapon Up
20 Whole Body


Looping Loop Forever
Looping Min
Looping Max

IDLE/DATA
Looping Min 255 % 255 in both means Loop Forever = on
Looping Max 255

Replay Delay

Flags:
Must return a file
No attacking

New hierarchy structure is in ANAM.
IDLE/ANAM 8
0 % Parent IDLE FormID
513033 % Previous IDLE FormID


IDLE/ANAM 8
1101,1000
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file
59 % What is this?

Three unknown flags?

It looks like there is no hierarchy parent.
How the hierarchy has been defined?

IDLE/DATA 6
Hierarchy/Parent IDLE -855638015
Hierarchy/Previous IDLE 1145634816

IDLE/DATA 6
IDLE/DATA 8

DATA has both int and float data:
IDLE/DATA 8
1.999978
0.000000
IDLE/DATA 8
Hierarchy/Parent IDLE 7
Hierarchy/Previous IDLE 0

How the hierarchy +- entries have been defined?
They are also IDLE records.

IDLE/EDID 17
KnockedDownIdles
IDLE/MODL 27
Characters\_Male\IdleAnims
IDLE/ANAM 8
0000,0000
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file
0
0
0
0
0
0
0
IDLE/DATA 6
4
-13056
0
IDLE/EDID 12
GetUpFaceUp
IDLE/MODL 49
Characters\_Male\IdleAnims\MT_KnockDownFaceUp.kf
IDLE/ANAM 8
1101,1000
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file
59
0
0
0
0
0
0
IDLE/DATA 6
1
-13056
0

IDLE/EDID 14
GetUpFaceDown
IDLE/MODL 51
Characters\_Male\IdleAnims\MT_KnockDownFaceDown.kf
IDLE/MODB 4
0.000000
IDLE/ANAM 8
1101,1000
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file
59
0
0
217
59
0
0
IDLE/DATA 6
1  % Hierarchy Parent?
-13056
0

IDLE/EDID 13
1stPHitTorso
IDLE/MODL 46
Characters\_Male\IdleAnims\1stPMT_HitTorso.kf
IDLE/ANAM 8
0100,1000
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file
81
1 % No Attacking
0
0
0
0
0
IDLE/DATA 8
-134217744.000000
0.000000
End of IDLE

CowerIdles
000240    0  0 44 41 54 41  8  0  7  2  c cd   ..DATA......
000252    0  0  0  0 49 44 4c 45 70  0  0  0   ....IDLEp...

IDLE/EDID 20
MisterGutsyDialogue
Chunk name: MODL
IDLE/MODL 56
Art file "Creatures\MisterGutsy\IdleAnims\SpecialIdle_Dialogue.kf"
IDLE/ANAM 8
1100,1000
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file % XXXX Not true. The flag is on.
99
6 % Loop Forever + 1 No Attacking
0
0
0
0
0
Chunk name: DATA
IDLE/DATA 8
Hierarchy Parent 7
Looping Min -1
Looping Max -1
0
0
0
0
0

IDLE/EDID 7
mrYawn
Chunk name: MODL
IDLE/MODL 39
Art file "Creatures\MoleRat\IdleAnims\MT_Yawn.kf"
Chunk name: ANAM
IDLE/ANAM 8
1101,1101
      ^^^ 100 Special Idle 101 Whole Body
^~Must return a file
244
4
0
223
244
4
0
Chunk name: DATA
IDLE/DATA 6
7
-13056
12


============================================================================

ok
IDLM
Idle Marker

capture_20081215_203349.png


============================================================================

final check
IMAD
Imagespace Modifier

capture_20081215_212835.png
capture_20081226_113407.png
capture_20090201_092920.png % Test for number of keyframe points failed! Redo.
capture_20090202_005012.png % Test redone.

Todo:
Animation key frame counts % ok


IMAD/DNAM 244
0             % Animatable 0 Disabled 1 Enabled


These subrecords seems to hold similar data:
<number>IAD
BNAM
NAM1
NAM2
NAM4
RNAM
SNAM
UNAM
VNAM
WNAM
XNAM
YNAM

size = 8*N

And these:
NAM3 % Cinematic Fade Color
TNAM % Cinematic Tint Color

size = 20*N

00IAD % HDR Eye Adapt Speed Mult | HDR Bright Scale Mult
02IAD % HDR Skin Dimmer Mult
04IAD % HDR Target LUM Mult
06IAD % HDR Eye Adapt Speed Mult | HDR Bright Scale Mult
07IAD % HDR Bright Clamp Mult
17IAD % Cinematic Saturation Mult
18IAD % Cinematic Contrast Mult
19IAD % Cinematic Contrast Avg Lum Mult
20IAD % Cinematic Brightness Mult
65IAD % HDR Blur Radius Add
84IAD % Cinematic Brightness Add


Flags:
Radial Blur Use Target
Depth Of Field Use Target
Animatable
Display

Depth Of Field Mode:
Front/Back

============================================================================

final check
IMGS
Imagespace

capture_20081215_212308.png
capture_20081226_112411.png


IMGS/EDID 26
BasementDefaultImageSpace
Chunk name: DNAM
IMGS/DNAM 152
0.900000 % HDR Eye Adapt Speed
3.000000 % HDR Blur Radius
2.000000 % HDR Blur Passes % XXXXXX
1.600000 % HDR Emissive Mult
1.000000 % HDR Target LUM % XXXXXX
1.000000 % HDR Upper LUM Clamp % XXXXXX
1.250000 % HDR Bright Scale % XXXXXX
0.350000 % HDR Bright Clamp
1.250000 % HDR LUM Ramp No Tex % XXXXXX
0 % HDR LUM Ramp Min % XXXXXX
0 % HDR LUM Ramp Max % XXXXXX
2.000000 % HDR Sunlight Dimmer % XXXXXX
1.500000 % HDR Grass Dimmer
1.000000 % HDR Tree Dimmer % XXXXXX
1.000000 % HDR Skin Dimmer % XXXXXX
0.030000 % Bloom Blur Radius
0.800000 % Bloom Alpha Mult Interior
0.200000 % Bloom Alpha Mult Exterior
0.500000 % Get Hit Blur Radius % XXXX
0.500000 % Get Hit Blur Damping Constant % XXXX
0.020000 % Get Hit Damping Constant
0.207843 % Night Eye Tint Color R
0.498039 % Night Eye Tint Color G
0.776471 % Night Eye Tint Color B
2.500000 % Night Eye Brightness
0.600000 % Cinematic Saturation Value
0 % Cinematic Contrast Avg Lum Value
1.000000 % Cinematic Contrast Value
1.000000 % Cinematic Brightness Value
0.278431 % Cinematic Tint Color R
0.278431 % Cinematic Tint Color G
0.854902 % Cinematic Tint Color B
0.250000 % Cinematic Tint Value
15
0
0
0
0


BlackandWhitetest
7
0
0
0
0000,1100 BT
0000,1111 BTCS
0001,1001 B  S
        ^Cinematic Saturation Enable
       ^Cinematic Contrast Enable
      ^Cinematic Tint Enable
     ^Cinematic Brightness Enable

   ^What is this?

What are all the values here? Check if Imagespace Mod (IMAD) explains.
CaveLLImageSpace
0000,1111
     ^^^^Unknown flags
0
0
0
1240680
11919334
-1
0001,1001
61
76
0


Check if any has different values:
Get Hit Blur Radius ?? 0.500000
Get Hit Blur Damping Constant ?? 0.500000

============================================================================

final check
INFO

capture_20081215_080509.png % part of QUST
capture_20081215_230759.png % part of Dialogue
capture_20081226_141614.png % part of Dialogue
capture_20090106_195009.png % part of quest, edit response window
capture_20090111_135150.png
capture_20090204_014719.png % part of quest
capture_20090207_005957.png % part of quest, RadioTenpennySong1/Song1


Todo:
unknown int after TRDT/Emotion Value
SNAM % ok
LNAM % ok
SNDD % only SNDD has ref to TenpennySong1; quest is RadioTenpenny; Response Text "Song 1"; INFO formid 0x0001e5af % ok
SCHD % Not in Fallout3.esm
NAME % ok
TRDT Emotion Types and new data in F3 % ok
PNAM % assumed to be the same as in Oblivion, need to be verified


Does the two Sound File FormIDs match?
The editor did not write SNDD subrecord anymore; it was deleted.
The only appearance has matching FormIDs.


INFO/NEXT 0 % Separates the response texts inside INFO % wrong!
Separates begin and end scripts.


Info Details:

Prompt
"(47/80)" % what is this?
Speech Challenge % flag
Difficulty % greyed out
AV/Perk
Speaker

If INFO record has only one DATA, then these flags
are for all of the response texts.
Response text flags: % verify that they are response text flags
Run Immediately
Run For Rumors
Say Once
Say Once a Day
Always Darken
Info Refusal
Goodbye
Random
Random End

Flags tests:
test_quest_info01.esp
 ***
test_quest_info10.esp

INFO/DATA 4
Dialogue Type 2 % 0 Topics 1 Conversation 2 Combat 3 Persuasion 4 Detection 5 Service 6 Misc
Next Speaker 0 % 0 Target 1 Self 2 Either
0000,1010
        ^Goodbye
       ^Random
  ^----^Random End % Random End is only one bit, val 32
      ^Say Once
     ^Run Immediately
   ^Info Refusal
 ^Run For Rumors ??
0


INFO/TRDT 24
Emotion Type 7 % 0 Neutral 1 Anger 2 Disgust 3 ?? 4 Sad 5 Happy 6 Surprise
7 Pained

INFO/TRDT 24
Emotion Type 7 % 0 Neutral 1 Anger 2 Disgust 3 ?? 4 Sad 5 Happy 6 Surprise
Emotion Value 100
0
Response Choice Number 1
205
205
205
0 % Sound File FormID
1 % Use Emotion Animation % 0 Disabled 1 Enabled
205
205
205


INFO/NAM3 % verify that this is Edits

Info Detail Difficulty:
1 Very Easy(10)
Easy(40)
Average(55)
4 Hard(70)
Very Hard(80)

1 Very Easy(10) 2 Easy(40) 3 Average(55) 4 Hard(70) 5 Very Hard(80)


zcat p1.gz |grep "INFO/NAME\|formid ="|grep -B 1 INFO/NAME



============================================================================

Not used in Fallout3
INGR

Only INGR in Fallout3.esm is this:
INGR/EDID 51
DoNotCreateNewIngredientsWeArentUsingThemInFallout


============================================================================

ok
IPCT
Impact Data

capture_20081215_213356.png
capture_20090204_015017.png

Todo:
Has the unknown flags in DODT any meaning? Reduced editor theory.
Second sound? SNAM as well? No. It is NAM1. % ok
unknown int as last of DATA % Has Own Decal Data flag % ok


IPCT/EDID 15
AntFleshImpact
Chunk name: DATA
IPCT/DATA 24
0.250000 % Effect Duration
2 % Effect Orientation %% 0 Surface Normal 2 Projectile Reflection
15.000000 % Angle Threshold
16.000000 % Placement Radius
1 % Sound Level ?? %% 1 Normal
0
Chunk name: DODT
IPCT/DODT 36
8.000000 % Min Width
32.000000 % Max Width
8.000000 % Min Height
32.000000 % Max Height
32.000000 % Depth
4.000000 % Shininess
1.000000 Parallax Scale
4 % Parallax Passes
65 % Flags
110
116
255 % Color R
255 % Color G
255 % Color B
0

Flags:
0100,0001
1100,1010
0000,0101
0000,0010
        ^Parallax
       ^Alpha Blending
      ^Alpha Testing
     ^??
 ^??
^??

Has Own Decal Data % Not in Flags, existence of DODT?

Effect Orientation:
2 Projectile Reflection
Projectile Vector
0 Surface Normal


Sound Level:
?? 0 Loud % if exists
1 Normal
2 Silent

============================================================================

ok
IPDS
Impact Data Set

capture_20081215_214025.png

Stone
Dirt
Grass
Glass
Metal
Wood
Organic
Cloth
Water
Hollow Metal
Organic Bug
Organic Glow

============================================================================

final check
KEYM
Key

capture_20081215_200448.png

Add DEST?

============================================================================

continue
LAND
Land

capture_20090208_204826.png % textured land example tLandscape/(-3,0)


Example land:

capture_20090208_204826.png

WRLD tLandscape % at 265488910
cell (-3, 0) offset = 148897
? 265488910+148897
%1 = 265637807

Chunk name 0: CELL 4 265637807
formid = 219053 / formid = 0x000357ad
CELL/XCLC 8
Location X -3
Location Y 0
Chunk name 0: GRUP 4 265637862 265644648
219053
Grouptype = 6 Cell Children
Chunk name 0: GRUP 5 265637886 265644648
219053
Grouptype = 9 Cell Temporary Children
Chunk name 0: LAND 6 265637910
formid = 219056 / formid = 0x000357b0

Land Texture FormID:
219062 LooseRocksBarrenWaste01 / TXST 219061
219064 CrackedDirtBarrenWastes01 / TXST 219063
219066 DirtBarrenWastes01 / TXST 219065
219068 ChemicalBarrenWastes01 / TXST 219067
219070 ScrubBarrenWastes01 / TXST 219069


 -*-

Wasteland/AnacostiaCrossingExterior

LAND/DATA 4
0000,0000,0000,0000,0000,0000,0001,1111
Chunk name: VNML
LAND/VNML 3267
Chunk name: VHGT
LAND/VHGT 1096
1402.000000
0
0
0
Chunk name: VCLR
LAND/VCLR 3267
Chunk name: ATXT
LAND/ATXT 8
129368
0
-73
0
Chunk name: VTXT
LAND/VTXT 1136
  5   -1   -1 0.018958
  6   -1   -1 0.195875
  7   -1   -1 0.332974
  8   -1   -1 0.106183
 12   -1   -1 0.021227
 13   -1   -1 0.134223
 14   -1   -1 0.223794
 15  -66  -73 0.458068
 16   -1   -1 0.628522
etc.
LAND/ATXT 8
2590
0
-73
1
Chunk name: VTXT
LAND/VTXT 224
  0   -1   -1 1.000000
 31   -1   -1 1.000000
 32   -1   -1 1.000000
 33   -1   -1 0.676100
LAND/BTXT 8
129368
1
-73
-1
Chunk name: ATXT
LAND/ATXT 8
0
1
-73
0
Chunk name: VTXT
LAND/VTXT 992
  0   -1   -1 0.371478
  1   -1   -1 0.140246
  9   -1   -1 0.001552
LAND/ATXT 8
2590
1
-73
1
Chunk name: VTXT
LAND/VTXT 632
  2   -1   -1 0.009148
  3   -1   -1 0.675515
  4   -1   -1 1.000000
  5   -1   -1 1.000000
LAND/BTXT 8
2590
2
-73
-1
Chunk name: ATXT
LAND/ATXT 8
129368
2
-73
0
Chunk name: VTXT
LAND/VTXT 632
 17   -1   -1 0.001299
 18   -1   -1 0.001712
 19   -1   -1 0.001319
 34   -1   -1 0.001639
 35   -1   -1 0.003232
LAND/ATXT 8
0
2
-73
1
Chunk name: VTXT
LAND/VTXT 1264
  0   -1   -1 1.000000
  1   -1   -1 1.000000
  2   -1   -1 1.000000
  3   -1   -1 1.000000
LAND/BTXT 8
2590
3
-73
-1
Chunk name: ATXT
LAND/ATXT 8
0
3
-73
0
Chunk name: VTXT
LAND/VTXT 1184
  0   -1   -1 0.091576
 10   -1   -1 1.000000
 11   -1   -1 1.000000
LAND/ATXT 8
129368
3
-73
1
Chunk name: VTXT
LAND/VTXT 152
  6   -1   -1 0.637934
  7   -1   -1 1.000000
 23   -1   -1 0.905664


============================================================================

ok
LGTM
Light Template

capture_20081215_223636.png
capture_20081226_130844.png

Todo:
Is "Get values from cell" cell saved? No.


============================================================================

final check
LIGH
Light

capture_20081215_220737.png
capture_20090106_231812.png

Todo:
Verify flags

Verify:
0000,0000,0000,0000,0000,0000,0000,1000
                                     ^Can Carry
                                   ^Flicker % ok
                                ^Off by default
                               ^Flicker Slow
                              ^Pulse
                            ^Pulse Slow

Oblivion:
                                      ^Dynamic
                                     ^Can Carry
                                    ^Negative
                                   ^Flicker
                                ^Off by default
                               ^Flicker Slow
                              ^Pulse
                            ^Pulse Slow
                           ^Spot Light
                          ^Spot Shadow

============================================================================

final check
LSCR
Load Screen
capture_20081215_204031.png
capture_20090129_114920.png

Todo:
Displays in Main Menu flag % ok


LSCR/LNAM 12
FormID 175556
World Space FormID 0   % Not used in Fallout3.esm
WS Cell X Coordinate 0 % Not used in Fallout3.esm
WS Cell Y Coordinate 0 % Not used in Fallout3.esm

============================================================================

final check
LTEX
Land Texture

capture_20081215_203837.png
capture_20090129_115438.png

Todo:
More material types, otherwise ok
ICON % not in Fallout3.esm


Material Types:
0 Stone
1 Cloth
2 Dirt
3 Glass
4 Grass
5 Metal
6 Organic
7 Skin
8 Water
9 Wood
10 Heavy Stone
11 Heavy Metal
12 Heavy Wood
13 Chain
14 Bottlecap
15 Elevator
16 Hollow Metal
17 Sheet Metal
18 Sand
19 Broken Concrete
20 Vehicle Body
21 Vehicle Part Solid
22 Vehicle Part Hollow
23 Barrel
24 Bottle
25 Soda Can
26 Pistol
27 Rifle
28 Shopping Cart
29 Lunchbox
30 Baby Rattle
31 Rubber Ball

0 Stone 1 Cloth 2 Dirt 3 Glass 4 Grass 5 Metal 6 Organic 7 Skin 8 Water 9 Wood 10 Heavy Stone 11 Heavy Metal 12 Heavy Wood 13 Chain 14 Bottlecap 15 Elevator 16 Hollow Metal 17 Sheet Metal 18 Sand 19 Broken Concrete 20 Vehicle Body 21 Vehicle Part Solid 22 Vehicle Part Hollow 23 Barrel 24 Bottle 25 Soda Can 26 Pistol 27 Rifle 28 Shopping Cart 29 Lunchbox 30 Baby Rattle 31 Rubber Ball

============================================================================

ok
LVLC

capture_20081215_141433.png

Todo:
Perhaps delete the "XXXX LVLO unknown" prints.


============================================================================

ok
LVLI
Leveled Item

capture_20081215_200550.png
capture_20090204_020030.png

If Chance None is taken from a global variable/constant
with Use Global, the Chance None number field is disabled.

Where is Use All flag? In LVLF.

============================================================================

ok
LVLN
Leveled Character

capture_20081226_003625.png


============================================================================

final check
MESG
Message

capture_20081215_204212.png
capture_20081226_005609.png

Todo:
Auto-display flag % ok


Display Time is inactive when Message Box is checked.

MESG/NAM0, ..., NAM9 are all empty strings in Fallout3.esm.
Perhaps they are old and unused now.


============================================================================

continue
MGEF
Base Effect

capture_20081215_192537.png
capture_20090129_121501.png
capture_20090208_195729.png % Value Modifier types + Counter Effects


Todo:
Source code contains Oblivion version. % ok updated code


MGEF/DATA 72
0000,0001,0000,0000,0000,0000,0001,0000
0000,0000,0000,0000,0000,0000,0111,0110
0001,0000,0000,0000,0000,0100,0111,0101
0000,0000,0000,0000,0000,0001,0111,0000
0000,0001,0000,0000,0000,0011,1110,0010
0001,0000,0000,0000,0001,0000,0111,0101
0001,1000,0000,0000,0000,0011,1111,0000
0000,0001,0000,0000,0000,0000,0001,0000 % orig AddictionEFFECT
0000,0001,0000,0000,0010,0000,0001,0000 % Display Name Only + Ball
0000,0101,0000,1000,0010,0000,0001,0000 % Use Skill + Bolt
0000,0111,0001,1000,0010,0000,0001,0000 % Use Attribute + Fog
0000,0011,0001,1000,1010,0000,0001,0000 % Unnamed flag + Spray
0011,0000,0000,0000,0001,0100,0111,0101 % FlamerFireDamage
                                      ^Hostile
                                     ^Recover
                                    ^Detrimental
                                 ^Self
                                ^Touch
                               ^Target
                              ^No Duration
                            ^No Magnitude
                           ^No Area
                          ^FX Persist
                       ^Gory Visuals
                      ^Display Name Only
                    ^Unnamed flag
               ^Use Skill
             ^Use Attribute
        ^Painless
      ^^00 Ball 01 Spray 10 Bolt 11 Fog
     ^No Hit Effect
   ^No Death Dispel
  ^XXXX used in Fallout3.esm

<unnamed flag at left after FX Persist>

Resist Value
-1 NONE
18 Damage Resistance
19 Posion Resistance % Poison? typo in editor
20 Radiation Resistance
52 FireResist
58 ElectricResist
59 FrostResist
60 EnergyResist
61 EmpResist

Effect Archetype:
0 Value Modifier % full list of values: capture_20090129_122949.png
% These are in the Assoc. Item field but are not stored in
% "Assoc. Item FormID". They are stored in "Actor Value".
% See below for the list of values.
1 -1 Script % 1 8
2 49 Dispel
3 Cure Disease
11 48 Invisibility
12 49 Chameleon
13 -1 Light % 13 10
16 10 Lock
17 10 Open
18
19 8 Summon Creature
24 47 Paralysis
30 Cure Paralysis
31 Cure Addiction
32 Cure Poison
33 -1 Concussion
34 8 Value and Parts
Last int:
53 % when Archetype is 18
49 % otherwise


capture_20090129_122949.png
Actor Values for Value Modifier:
47 <empty>
-1 NONE
12 Action Points
 0 Aggression
10 Agility
57 Assistance
32 Barter
33 Big Guns
55 BloodyMess
31 BrainCondition
13 Carry Weight
49 Chameleon
 8 Charisma
26 Chest
 1 Confidence
14 Critical Chance
18 Damage Resistance
51 DetectLifeRange
58 ElectricResist
61 EmpResist
 7 Endurance
 2 Energy
34 Energy Weapons
60 EnergyResist
24 Experience Points
35 Explosives
22 Fatigue
52 FireResist
59 FrostResist
25 Head
15 Heal Rate
16 Health
72 Ignore Negative Effects
 9 Intelligence
48 Invisibility
23 Karma
27 Left Arm
29 Left Leg
36 Lockpick
11 Luck
37 Medicine
17 Melee Damage
38 Melee Weapons
 4 Mood
50 NightEye
 6 Perception
19 Posion Resistance
20 Radiation Resistance
54 Rads
39 Repair
 3 Responsibility
28 Right Arm
30 Right Leg
40 Science
41 Small Guns
42 Sneak
43 Speech
21 SpeedMult
 5 Strength
45 Unarmed
56 UnarmedDamage
62 Variable01
63 Variable02
64 Variable03
65 Variable04
66 Variable05
67 Variable06
68 Variable07
69 Variable08
70 Variable09
71 Variable10
53 WaterBreathing
46 Weight

Sorted by numbers:
-1 NONE
 0 Aggression
 1 Confidence
 2 Energy
 3 Responsibility
 4 Mood
 5 Strength
 6 Perception
 7 Endurance
 8 Charisma
 9 Intelligence
10 Agility
11 Luck
12 Action Points
13 Carry Weight
14 Critical Chance
15 Heal Rate
16 Health
17 Melee Damage
18 Damage Resistance
19 Posion Resistance
20 Radiation Resistance
21 SpeedMult
22 Fatigue
23 Karma
24 Experience Points
25 Head
26 Chest
27 Left Arm
28 Right Arm
29 Left Leg
30 Right Leg
31 BrainCondition
32 Barter
33 Big Guns
34 Energy Weapons
35 Explosives
36 Lockpick
37 Medicine
38 Melee Weapons
39 Repair
40 Science
41 Small Guns
42 Sneak
43 Speech
45 Unarmed
46 Weight
47 <empty>
48 Invisibility
49 Chameleon
50 NightEye
51 DetectLifeRange
52 FireResist
53 WaterBreathing
54 Rads
55 BloodyMess
56 UnarmedDamage
57 Assistance
58 ElectricResist
59 FrostResist
60 EnergyResist
61 EmpResist
62 Variable01
63 Variable02
64 Variable03
65 Variable04
66 Variable05
67 Variable06
68 Variable07
69 Variable08
70 Variable09
71 Variable10
72 Ignore Negative Effects


capture_20090208_200134.png / test_mgef74_addedcountereffects.esp
Resist Value -1
5 % Number of Counter Effects




============================================================================

ok
MICN
Menu Icon

capture_20081215_204158.png

============================================================================

final check
MISC
Misc Item

capture_20081215_200802.png

Todo:
Add DEST?

============================================================================

ok
MSTT
Movable Static

capture_20081215_220859.png
capture_20090129_123616.png
capture_20090204_020607.png

Todo:
DATA % verify against On Local Map flag in the header flag 1
DMDL % ok


Unknown:
MSTT/DATA 1
1 % Duplicate of On Local Map flag in the header flags 1

============================================================================

ok
MUSC
Music Type

capture_20081215_204617.png

MUSC/EDID 9
1NoMusic

MUSC/EDID 15
DefaultSuccess
MUSC/FNAM 20
special\success.mp3

MUSC/EDID 15
DefaultExplore
MUSC/FNAM 9
explore\

In DefaultExplore, how music files are selected?

Data/Music/Explore/
Data/Music/Explore/Explore_01.mp3
Data/Music/Explore/Explore_02.mp3
Data/Music/Explore/Explore_03.mp3
Data/Music/Explore/Explore_04.mp3
Data/Music/Explore/Explore_05.mp3
Data/Music/Explore/Explore_06.mp3
Data/Music/Explore/Explore_07.mp3


============================================================================

continue
NAVI


NAVI/NVMI
When the size is 32 the first int is 0.
When the size is larger than 32, the first int is 32.

 ---*---

NVCI

navm 410369 (0x00064301) in cell 5227 (0x0000146b) Wasteland BigTownSE (-4,3)
navm 410370 (0x00064302) in cell 5227 (0x0000146b) Wasteland BigTownSE (-4,3)
navm 450405 (0x0006df65) in cell 19573 (0x00004c75) Wasteland (-27,32)
navm 370570 (0x0005a78a) in cell 4899 (0x00001323) Wasteland FortConstantineExterior05 (-17,25)

NAVI/NVCI 20
450405 (0x0006df65)
1
450404 (0x0006df64)
0
0

NAVI/NVCI 40
410369 (0x00064301) % NAVM
2
477754 (0x00074a3a) % NAVM
410366 (0x000642fe)
0
4
175034 (0x0002abba) % Door Ref (teleport)
175033 (0x0002abb9)
175032 (0x0002abb8)
175035 (0x0002abbb)

NAVI/NVCI 36
410370 (0x00064302)
2
355804 (0x00056ddc)
477754 (0x00074a3a) % Why this is here? Not all in second group are listed here.
3
477754 (0x00074a3a) % NAVM % preferred triangles?
480257 (0x00075401)
440427 (0x0006b86b)
0


NAVI/NVCI 16
370570 (0x0005a78a)
0
0
0


Blue border edges are described like green border edges:

NAVI/NVCI 24
780415 (0x000be87f)
2
414280 (0x00065248)
780416 (0x000be880)
0
0

Setup:
Dock 0x000ab166
0x000be880
0x000be87f
Ship 0x00065248

Chunk name 0: CELL 4 85412653
formid = 3502 / formid = 0x00000dae
RivetCityExterior04
formid = 780416 / formid = 0x000be880
formid = 700774 / formid = 0x000ab166
Chunk name 0: CELL 4 85562800
formid = 3533 / formid = 0x00000dcd
RivetCityExterior03
formid = 780415 / formid = 0x000be87f
formid = 414280 / formid = 0x00065248

NAVI/NVCI 24
700774 (0x000ab166)
0
2
780416 (0x000be880)
354801 (0x000569f1)
0

NAVI/NVCI 24
780415 (0x000be87f)
2
414280 (0x00065248)
780416 (0x000be880)
0
0

NAVI/NVCI 24
780416 (0x000be880)
1
700774 (0x000ab166)
1
780415 (0x000be87f)
0

NAVI/NVCI 28
414280 (0x00065248)
1
780415 (0x000be87f)
0
2
365762 (0x000594c2)
683841 (0x000a6f41)


capture_20090213_110142.png

NAVI/NVCI 28
294154 (0x00047d0a)
1
518442 (0x0007e92a)
0
2
294454 (0x00047e36)
440974 (0x0006ba8e)

NAVI/NVCI 20
518442 (0x0007e92a)
1
294154 (0x00047d0a)
0
0

Are these NavMeshes in a NAVI?
capture_20090213_110128.png
formid = 518442 / formid = 0x0007e92a
formid = 294154 / formid = 0x00047d0a

NAVI/NVMI 210
32
NavMesh FormID 518442
World Space FormID 173450
Cell Coordinate X 0
Cell Coordinate Y 0
962.518982 % Center X
-5961.582031 % Center Y
-484.000763 % Center Z
877.888550
-6196.181641
-507.276337
1187.223755
-5635.315918
-457.442169
9 % Number of vertices
7 % Number of triangles
1187.223755
-5635.315918
-494.210480
1034.948486
-6162.060059
-457.442169

NAVM: vertex mean 962.518989 -5961.582031 -484.000760
NAVM: vertex min 877.888550 -6196.181641 -507.276337
NAVM: vertex max 1187.223755 -5635.315918 -457.442169

Some max values:
Number of vertices 169
Number of vertices 177
Number of vertices 220

Is there limit when the vertex/triangle data is in NAVI/NVMI?


NAVI/NVMI 32
0
NavMesh FormID 294154
World Space FormID 173450
Cell Coordinate X 0
Cell Coordinate Y 0
965.686340
-4291.445312
-469.838745
0.000000

NAVM: vertex mean 965.686331 -4291.445578 -469.838754
NAVM: Number of vertices 294

Why some NAVI/NVMI have vertex and triangle data?
The data can be found from the NAVM.


============================================================================

continue, almost complete
NAVM
NavMesh

capture_20081215_235736.png
capture_20090111_174746.png
capture_20090118_000739.png % AgathasHouseInterior
capture_20090119_161947.png
capture_20090121_231918.png
capture_20090208_200650.png % AgathasHouseInterior, 2-3 part navmeshes
capture_20090208_201444.png % AnchorageWM01

Todo:



falloutnavmesh-AnchorageWM01 contains navmesh of AnchorageWM01.
I have rendered it with nifviewer.
Navmesh FormID = 0x00078a9a.


Two triangles meshes which have only one common vertex
becomes two navmeshes. A common edge may be required for
the meshes to be included in one navmesh.


CELL/EDID 26
AnacostiaCrossingExterior

NavMesh (1 triangle)

NAVM/NVER 4
11
Chunk name: DATA
NAVM/DATA 24
3472 % Cell FormID
3 % Number of vertices
1 % Number of triangles % when int, warning status bit is at upper 4 bits
0
0
0
NAVM/NVVX 36 % Vertex data
76221.976562
-65362.839844
11056.000000
76206.335938
-65378.949219
11056.000000
76184.468750
-65405.804688
11056.000000
NAVM/NVTR 16 % Triangle vertex index data
2 % Vertex indices
0
1
-1 % ????
-1
-1
2048 % ????
65   % ????
Chunk name: NVGD
NAVM/NVGD 40
1
37.507812
42.964844
76184.468750 % Vertex 2
-65405.804688
11056.000000
76221.976562 % Vertex 0
-65362.839844
11056.000000
1
0
End of NAVM


NavMesh (207 triangles)

NAVM/NVER 4
11
Chunk name: DATA
NAVM/DATA 24
3472
177
207
23
29
1
Chunk name: NVVX
NAVM/NVVX 2124
77440.218750
-65206.250000
11072.000000
77549.507812
-65203.503906
11072.000000
 ***

NAVM/NVTR 3312
160
162
127
13
12
188
2051
0
0
3
1
5
-1
2
2048
64
1
2
0
184
-1
1
2048
320
4
5
3
 ***
NAVM/NVCA 58
2
6
21
23
35
52
60
73
76
79
85
95
99
111
 ***
NAVM/NVDP 8
94335 % FormID to Reference with REFR/XNDP pointing to this NavMesh
169 % ???? Triangle or vertex index?
Chunk name: NVGD
NAVM/NVGD 902
6
311.902344
542.645874
75952.585938
-65536.000000
10543.517578
77824.000000
-62280.125000
11228.863281
20
128
129
130
131
132
 ***
NAVM/NVEX 230
0
469340 % NavMesh FormID
60     % ???? Triangle or vetex index?
0
469340
172
0
469340
175
0
469340
189
 ***
End of NAVM


NavMesh (1 triangle)

NAVM/NVER 4
11
Chunk name: DATA
NAVM/DATA 24
3472
3
1
1
0
0
Chunk name: NVVX
NAVM/NVVX 36
77824.000000
-63263.296875
11076.738281
77456.835938
-63265.167969
11072.000000
77824.000000
-63494.968750
11072.000000
Chunk name: NVTR
NAVM/NVTR 16
0
1
2
-1
-1
0
2052
0
Chunk name: NVGD
NAVM/NVGD 40
1
367.164062
231.671875
77456.835938
-63494.968750
11072.000000
77824.000000
-63263.296875
11076.738281
1
0
Chunk name: NVEX
NAVM/NVEX 10
0
469340
179
End of NAVM


AnchorageWMEast

NavMesh (2 triangles)

NAVM/NVER 4
11
Chunk name: DATA
NAVM/DATA 24
3202
4
2
0
0
0
Chunk name: NVVX
NAVM/NVVX 48
37931.816406
-24673.886719
10594.687500
37891.214844
-24627.841797
10602.367188
37845.003906
-24691.910156
10591.125977
37749.199219
-24663.021484
10613.419922
Chunk name: NVTR
NAVM/NVTR 32
0
1
2
-1
1
-1
2048
0
1
3
2
-1
-1
0
2048
64
Chunk name: NVGD
NAVM/NVGD 42
1
182.617188
64.068359
37749.199219
-24691.910156
10591.125977
37931.816406
-24627.841797
10613.419922
2
0
1
End of NAVM


When a vertex was modified the following subrecord were written to esp:
NAVM/NVER 4
NAVM/DATA 24
NAVM/NVVX 2124
NAVM/NVTR 3312
NAVM/NVCA 58  % List of triangles which have cover edges.
NAVM/NVDP 8   % Linked door ref
NAVM/NVGD 900
NAVM/NVEX 230

zcat p1.gz |grep NAVM|sort|uniq|cut -b -9|uniq -c
   7198 Chunk nam
      1 End of NA
      1 NAVM/DATA
      1 NAVM/EDID
    165 NAVM/NVCA
     10 NAVM/NVDP
      1 NAVM/NVER
     79 NAVM/NVEX
   1912 NAVM/NVGD
   1110 NAVM/NVTR
    933 NAVM/NVVX


capture_20090111_175024.png
Vertex 68 was moved.
 Vertex 68:
-77456.835938
--63265.167969
+77576.265625
+-63296.191406
 11072.000000
NAVM/NVGD changed as well.

 V1           V135
  V68      V75


NAVM/NVTR format:
Triangle 65:
64  % Index to vertices
62
65
197 % Index to triangles
66
78
flags 4 bytes

NAVM/NVGD format:
int
8xfloat % size + two points
<number_of_triangle_indexes> <index_list>
etc.

6  % Grid size
311.902344
542.645874
75952.585938
-65536.000000
10543.517578
77824.000000
-62280.125000
11228.863281
Number of triangles in cell 20
128
129
 etc.
cat ztest_navmesh01.esp |grep -A 450 NAVM/NVGD|grep "Number of"|wc
     36     144     634

NAVM/NVEX format:
int
int % FormID
short % index to vertex? edge? triangle?


capture_20090111_175246.png
   V93
                   V94


                 V92

                       V41
     V91

When V94 was moved to other side of edge V93-V92:
Before.
Triangle 107:
92
94
93
-1
-1
106
0
8
0
0

After.
Triangle 107:
94
92
93
-1
-1
106 % This stays at the same location. Is this adjacent triangle of edge starting at vertex 93?
0
8
0
0

Note that the error may make the data inconsistent.

The above triangle refers to triangle 106:

Triangle 106:
92
93
91
107
-1
105
0
8
0
0

AgathasHouseInterior
REFR/XNDP 8
NavMesh FormID 168061
25 % Points to the green linked-door navmesh triangle.
0 (unused)
0 (unused)

Linked Door triangle has points 6 19 27.

NAVM/DATA 24
Cell FormID 188085
Number of vertices 28
Number of triangles 26
0
0
5 % Number of cover edges % wrong. It is Number of triangles with cover edges
1 % Number of linked door triangles
% First was revealed by one triangle test.
% Second by AnchorageWM01.

Triangle 19: % vertices: up 0 left 21 right 6
6  % vertex 0
0  % vertex 1
21 % vertex 2
-1 % edge 0-1
-1 % edge 1-2
15 % edge 2-0 % triangle connected to edge 21-6
0
8 % nothing special in this triangle
0
0

Triangle 15: % up 21 left 5 right 6
6  % order so far has been: starting from right-most vertex go CCW
21
5
19 % edge 0-1
-1 % edge 1-2
16 % edge 2-0
0
8
64 % edge 1-2 is cover:wall
0

Triangle 25:
6
19
27
16
-1
10
0
12 % bit valued 4 means the linked door (green) triangle
-128
2

Triangle 22:
26
18
17
-1
-1
24
0
8
0
6 % Blue cover on edge 1-2 (vertices 18 17) with height 128 units, left side cover

Triangle 2:
16
2
14
-1
18
3
0
8
40 % Blue cover on edge 0-1 (vertices 16 2) with height 128 units, right side cover
0

All forms of the last numbers:
0  8   1 0 / 0 5 7 10 % wall on edge 01
0  8   0 0 / 1 3 4 6 8 9 11 12 13 14 16 17 19 20 21 % all yellow or red
0  8  40 0 / 2 % blue cover, edge 01, right side, 128 units % 40 = 32 + 8, v0 = black
0  8  64 0 / 15 18 % wall on edge 12
0  8   0 6 / 22 % blue cover, edge 12, left side, 128 units % 6 = 4 + 2, v2 = black
0  8 192 1 / 23 % blue cover, edge 12, no side, 112 units % 192 = 128 + 64, no black
0  8 128 2 / 24 % blue cover, edge 12, no side, 160 units % no black
0 12 128 2 / 25 % blue cover, edge 12, no side, 160 units % no black

0000,0000,0000,0000
      ^Linked door
     ^Unknown
0000,0000,0000,0000
                  ^wall edge 01
            ^--^blue edge 01 right side, v0 black
           ^wall edge 12
        ^-^^blue edge 12, no black
       ^--^blue edge 12, no black
      ^^blue edge 12 left side, v2 black

Two yellow edges (tri 4) does not differ from one yellow edge (tri 1)
or from zero yellow edges (tri 3).

All navmesh triangle flags in Fallout3.esm:
navmeshtriangleflags1

Modified triangle 2 cover (edge 01):
0  8  40 0 / 2 % right side, 128 units % 40 = 32 + 8, v0 = black
0000,0000,0010,1000,0000,1000,0000,0000
0  8  24 0 / 2 % left side, 128 units % 24 = 16 + 8, v1 = black
0000,0000,0001,1000,0000,1000,0000,0000
0  8  36 0 / 2 % right side, 64 units % 36 = 32 + 4, v0 = black
0000,0000,0010,0100,0000,1000,0000,0000
0  8  37 0 / 2 % right side, 80 units % 37 = 32 + 4 + 1, v0 = black
0000,0000,0010,0101,0000,1000,0000,0000
0  8  46 0 / 2 % right side, 224 units % 46 = 32 + 8 + 4 + 2, v0 = black
0000,0000,0010,1110,0000,1000,0000,0000
0  8  47 0 / 2 % right side, max cover % 47 = 32 + 8 + 4 + 2 + 1, v0 = black
0000,0000,0010,1111,0000,1000,0000,0000
0  8   1 0 / 2 % wall, no NVCA entry: no cover
0000,0000,0000,0001,0000,1000,0000,0000
0  8   2 0 / 2 % ledge cover
0000,0000,0000,0010,0000,1000,0000,0000

Triangle tests:
0   8 0 0 / 4 / 0000,1000,0000,0000 % none (original)
64  8 0 0 / 4 / 0000,1000,0100,0000 % preferred
64 10 0 0 / 4 / 0000,1010,0100,0000 % preferred water
0  10 0 0 / 4 / 0000,1010,0000,0000 % water
16  8 0 0 / 4 / 0000,1000,0001,0000 % no large creature
                      ^Linked door


NAVM/NVCA 10 % list of triangles which have cover edges
2
22
23
24
25
NAVM/NVDP 8
323382 % Teleport REFR FormID
25     % Index of the linked door triangle


Cover flags / test_onetri*
0000,0011,1100,0000 % One max cover 1 0 2
0000,0011,1100,1111 % Two max covers 1 0 2
0000,0011,1100,1111 % Different two max covers 2 1 0
0000,0011,1110,1111 % Right cover to left edge 2 1 0
0000,0011,1101,1111 % Left cover to left edge 2 1 0
0000,0011,1111,1111 % Both left and right 2 1 0
0000,0111,1111,1111 % Left cover to right edge 2 1 0
0000,1011,1111,1111 % Right cover to right edge 2 1 0
0000,1111,1111,1111 % Both left and right 2 1 0
0000,0111,1111,1111 % Left cover to right-top edge 1 0 2
0000,1011,1111,1111 % Right cover 1 0 2
0000,1111,1111,1111 % Both left and right

test_navmesh01_morewalls.esp
The cover bits maps to edges this way:
0000,1111,1111,1111
            ^^^^^^^Edge 0-1
     ^^^^^^^Edge 1-2



formid = 19575 / formid = 0x00004c77
CELL/XCLC 12
Location X -28
Location Y 32

formid = 450404 / formid = 0x0006df64
NAVM/DATA 24
Cell FormID 19575
Number of vertices 119
Number of triangles 139
0 error status in highest 4 bits (short)
15
Number of cover edge triangles 0
Number of linked door triangles 0


WRLD Wasteland
formid = 19573 / formid = 0x00004c75
CELL/XCLC 12
Location X -27
Location Y 32

formid = 450405 / formid = 0x0006df65
NAVM/DATA 24
Cell FormID 19573
Number of vertices 104
Number of triangles 109
0
6  % XXXX what is this?
Number of cover edges 0 ?? Number of triangles with cover edges
Number of triangles with linked doors 0 ?? Number of linked doors


The NAVM below has the unknown in DATA but also two unknown flags
in the triangle data.


WRLD Wasteland
formid = 19573 / formid = 0x00004c75
CELL/XCLC 12
Location X -27
Location Y 32

formid = 450427 / formid = 0x0006df7b
NAVM/DATA 24
Cell FormID 19573
Number of vertices 81
Number of triangles 85
0
12 % Number of border triangles / Number of border edges?
Number of cover edges 0 ?? Number of triangles with cover edges
Number of triangles with linked doors 0 ?? Number of linked doors
Triangle 6:
5
7
8
5
-1
3 % Because edge 2 is marked as border edge, this is index to NVEX.
0000,1000,0000,0100
                ^Edge 2: border edge
             ^No large creature
           ^Preferred
       ^Water
      ^Linked door
     ^Unknown
0000,0000,0000,0000
Triangle 7:
77
9
1
10
-1
81
0000,1000,0000,0001
             ^No large creature
           ^Preferred
       ^Water
      ^Linked door
     ^Unknown
0000,0000,0000,0000

Triangle 28:
24
25
27
23
27
5
0000,1000,0000,0100
             ^No large creature
           ^Preferred
       ^Water
      ^Linked door
     ^Unknown
0000,0000,0000,0000

Triangle 31:
80
30
29
6
32
84
0000,1000,0000,0001
             ^No large creature
           ^Preferred
       ^Water
      ^Linked door
     ^Unknown


NAVM/NVEX unknown
0 unknown
1 unknown
2 unknown
3 unknown % separated navmesh (blue)

border edge unknown has value 0 in navm 485699 in cell 6089 0x000017c9 (0,6) Wasteland
border edge unknown has value 0 in navm 478536 in cell 6118 0x000017e6 (3,5) Wasteland

border edge unknown has value 1 in navm 294154 in cell 173450 0x0002a58a OasisCave03 Interiors
border edge unknown has value 1 in navm 664471 in cell 99422 0x0001845e HamiltonsHideaway01
border edge unknown has value 1 in navm 517546 in cell 122544 0x0001deb0 PPurity03
border edge unknown has value 1 in navm 453518 in cell 98105 0x00017f39 SpringvaleSchool02

border edge unknown has value 2 in navm 518442 in cell 173450 0x0002a58a OasisCave03
border edge unknown has value 2 in navm 664471 in cell 99422 0x0001845e HamiltonsHideaway01 Interiors
border edge unknown has value 2 in navm 517545 in cell 122544 0x0001deb0 PPurity03 Interiors
border edge unknown has value 2 in navm 288634 in cell 98105 0x00017f39 SpringvaleSchool02 Interiors

border edge unknown has value 3 in navm 780416 in cell 3502 0x00000dae RivetCityExterior04 (19,-17)
border edge unknown has value 3 in navm 780416 in cell 3502
border edge unknown has value 3 in navm 780416 in cell 3502
border edge unknown has value 3 in navm 700774 in cell 3502
border edge unknown has value 3 in navm 700774 in cell 3502
border edge unknown has value 3 in navm 700774 in cell 3502
border edge unknown has value 3 in navm 780415 in cell 3533 0x00000dcd RivetCityExterior03 (19,-18)
border edge unknown has value 3 in navm 414280 in cell 3533


CELL 0x0002a58a 173450 OasisCave03
NAVM 0x0007e92a 518442

Triangle 6:
Vertex 0: 0
Vertex 1: 8
Vertex 2: 7
Edge 0: adjacent triangle / border edge index 0
Edge 1: adjacent triangle / border edge index -1
Edge 2: adjacent triangle / border edge index 5
0000,1000,0000,0001
                  ^Edge 0: border edge

NAVM/NVEX 10
Border edge 0:
2 unknown % Drop Down edge (this is the higher edge; burble points down)
NavMesh FormID 294154 0x00047d0a
Triangle index 126

CELL 0x0002a58a 173450 OasisCave03
NAVM 0x00047d0a 294154

NAVM/NVEX 10
Border edge 0:
1 unknown % Drop Down edge (this is the lower edge; burble points up)
NavMesh FormID 518442 0x0007e92a
Triangle index 6

GECK Wiki / Navmesh_Disabling
Separating Navmesh

   You can create a separate navmesh from a subset of triangles: To do
   this, select a bunch of triangles and select "Move Selection to
   separate navmesh" in the Navmesh menu, as in Fig 1a.

   You'll end up with something looking like Fig 1b: Blue edges mean
   'special' navmesh portal. They only get created when you use this menu
   command.

============================================================================

final check
NOTE
Note

capture_20081215_200917.png


============================================================================

continue
NPC

capture_20081215_142035.png
capture_20081226_194005.png
capture_20090106_230657.png
capture_20090111_141050.png
capture_20090129_124934.png

Todo:
NAM4 % same as in Creature?
NAM5 % same as in Creature? no Creature has 4 bytes, here it is 2 bytes
EAMT % Use Animation in Creature % list is incomplete in Creature section
AI Data types % ok
Header flag in AbrahamWashington
DNAM % ok
FNAM


Editor does not have field for the skeleton NIF file:
NPC_/MODL 30
Characters\_Male\Skeleton.NIF
It could be fixed.

But LvlRaiderRandomMale has
NPC_/MODL 20
marker_creature.nif

If these are fixed at factory, then the editor perhaps is not
exactly what was used at Bethesda. Considering other oddities
in the editor, we could have a stripped down version of their editor.

Why AllenMack has Height and Weight 0?

NPC_/ACBS 24
0000,0000,0000,0000,0000,0000,0001,0000
0000,0000,0000,0000,0000,0000,1001,0000
0000,0000,0000,0000,0000,0000,0000,0001
0000,0000,0000,0000,0000,0010,0001,1001
                                      ^Female
                                     ^Essential
                                   ^Respawn
                                 ^Auto Calc Stats
                              ^PC Level Mult
                           ^No low level processing

Oblivion:
                                     ^Essential
                      ^No Rumors
                     ^Summonable
                    ^No Persuasion
             ^Can Corpse check

Base Spell Pts 50 % Fatigue
Fatigue 0
Barter Gold 1
Level 1
Calc Min 0
Calc Max 100
0.000000
35
0

Stats Speed Mult % 100
500.000000                 % XXXX what is this?
Traits Disposition Base 35


Inventory item is either CNTO or pair of CNTO and COED:
NPC_/CNTO 8
Item FormID 145112
Count 1
NPC_/COED 12
0
0
0
0
0
16192


NPC_/AIDT 20
Aggression 0 % ok
Confidence 4 % ok
Energy Level 50
Responsibility 50
0000,0000,0000,0000,0000,0000,0000,0011   % XXXX these are for Oblivion
                                      ^Weapons
                                     ^Armor
                                    ^Clothing
                                   ^Books
                                 ^Ingredients
                              ^Lights
                            ^Apparatus
                          ^Miscellaneous
                         ^Spells
                       ^Magic Items
                      ^Potions
                     ^Training
                  ^Recharge
                 ^Repair
Training Skill (Index) 0
Training Skill Value 0
0
0
1
0
0

AI Data / AI Attributes:

Aggression types:
0 Unaggressive
1 Aggressive
2 Very Aggressive
3 Frenzied

0 Unaggressive 1 Aggressive 2 Very Aggressive 3 Frenzied

Confidence types:
0 Cowardly
1 Cautious
2 Average
3 Brave
4 Foolhardy

0 Cowardly 1 Cautious 2 Average 3 Brave 4 Foolhardy

Assistance types:
0 Helps Nobody
1 Helps Allies
2 Helps Friends and Allies

0 Helps Nobody 1 Helps Allies 2 Helps Friends and Allies

Mood types:
0 Neutral
1 Afraid
2 Annoyed
3 Cocky
6 Angry
4 Drugged
5 Pleasant
7 Sad
UNDEFINED

0 Neutral 1 Afraid 2 Annoyed 3 Cocky 4 Drugged 5 Pleasant 6 Angry 7 Sad

NPC_/DATA 11
10 % Stats Base Health
0
0
0
6 % Stats Attributes Str
6 % Stats Attributes Per
5 % Stats Attributes End
3 % Stats Attributes Cha
3 % Stats Attributes Int
7 % Stats Attributes Agi
4 % Stats Attributes Luc
NPC_/DNAM 28
10  7 10 15 % Stats Skills Barter | Speech
14 15 10 13 % Stats Skills Big Guns
16 46 12 15 % Stats Skills Energy Weapons
16 23 12 15 % Stats Skills Explosives
16 23 27 15 % Stats Skills Lockpick
10 11 10 15 % Stats Skills Medicine | Repair
16 13 10 15 % Stats Skills Melee Weapons % Note: Ed. has 31 i.o. 16 when PCLM=1
10 11 10 15 % Stats Skills Medicine | Repair
10 11 10 40 % Stats Skills Science
37 40 14 40 % Stats Skills Small Guns
37 40 29 15 % Stats Skills Sneak
10  7 10 15 % Stats Skills Barter | Speech
0   0  0  0
33 15 10 38 % Stats Skills Unarmed
0
0
0
0
0
0
0
0
0
0
0
0
0
0

NPC_/EAMT 2
255
NPC_/NAM4 4
6
NPC_/NAM5 2
255
NPC_/NAM6 4
0.000000 % Weight?
NPC_/NAM7 4
0.000000 % Height?

Blood tab:
Impact Material Type:
Stone
Dirt
Grass
Glass
Metal
5 Wood
6 Organic
Cloth
Water
Hollow Metal
Organic Bug
Organic Glow


Traits / Alignment types:
-900.0 VeryEvil
-500.0 Evil
0.0 Neutral
500.0 Good
900.0 VeryGood

AllenMack Neutral
Arkansas Neutral
Beatrice Good
Biwwy Good


Template / Base Data:
Name
No low level processing
Essential
Respawn

============================================================================

final check
PACK

capture_20081215_060409.png
capture_20081225_222515.png
capture_20081226_195352.png % part of NPC
capture_20090106_175250.png
capture_20090111_133357.png
capture_20090129_130041.png
capture_20090129_130336.png % test_pack*
capture_20090201_162049.png

Todo:
Object Types
Accompany tab % ok
Ambush tab % ok
Dialogue tab % ok flags?
Eat tab
Escort tab
Find tab
Flee not Combat tab
Follow tab
Guard tab
Idles tab % ok
Patrol tab % ok
Sandbox tab
Sleep tab
Travel tab % ok
Use Item At tab
Use Weapon tab
Wander tab


Accompany tab
  Accompany Target Ref % Cell/Ref selector
  Accompany Distance
Ambush tab
  Wait Location % PLDT
    "Near editor location"
    Radius
  Ambush Location % PLD2
    "Near editor location"
    Radius
  Flags
    Hide while ambushing
  Ambush Target / flag % PTDT
    (radio btn)Specific Reference % Cell/Ref selector
    (radio btn)Any Object
      Object ID   % both or one at a time?
      Object Type
    Count
Dialogue tab
  Target
    (radio btn)Linked Reference
    (radio btn)Specific Reference
    Activate Distance
    Reference % Cell/Ref selector
  Dialogue Type
    (radio btn)Conversation
    (radio btn)Say To
  Flags
    Don't Control Target Movement
    No Headtracking
  Start/Wait Location / flag
    "Near editor location"
    Radius
  Trigger Location / flag
    "Edit"
    Radius
  FOV
  Topic
Eat tab
  Specify Food Type % PTDT
    Object ID   % both or one at a time?
    Object Type % both or one at a time?
  Eat Location % PLDT
    "Near editor location"
    Radius
  Allow Search / flag % PLD2 (flag is marked if PLD2 exists)
    "Edit"
    Radius
    Allow Buying / flag    % PKDT
    Allow Killing / flag   % PKDT
    Allow Stealing / flag  % PKDT
Escort tab
  Escort Target
    Linked Reference / radio btn
    Specific Reference / radio btn
       Cell/Ref selector
    Any Object / radio btn
      Object ID   % both or one at a time?
      Object Type
    Count
    Distance
  Destination
    "Near editor location"
    Radius
  Allow Search / flag
    "Edit"
    Radius
    Allow Buying / flag
    Allow Killing / flag
    Allow Stealing / flag
Find tab
  Find Target
    Linked Reference / radio btn
    Specific Reference / radio btn
       Cell/Ref selector
       Create Marker at Render Camera / button
    Any Object / radio btn
      Object ID   % both or one at a time?
      Object Type
      Object Count
  Allow Search / flag % PLDT
    "Near editor location"
    Radius
    Allow Buying / flag
    Allow Killing / flag
    Allow Stealing / flag
Flee not Combat tab
  Start Location / flag
    "Near editor location"
    Radius
  Flee From / flag
    Minimum Distance From Target
    Cell/Ref selector
Follow tab
  Follow Target
    Linked Reference / radio btn
    Specific Reference / radio btn
       Cell/Ref selector
    Any Object / radio btn
      Object ID   % both or one at a time?
      Object Type
    Follow Distance
  Start Location / flag
    "Near editor location"
    Radius
    Trigger Radius
  End Location / flag
    "Near editor location"
    Radius
Guard tab
  Reference to Guard % PTDT, Near Ref is Specific Ref in PTDT
    Linked Reference / radio btn
    Near Reference / radio btn
       Cell/Ref selector
    Guard Radius
    Warn/Attack Behaviour / flag
  Guard Location / flag  % this is Specific Reference in PLDT
    "Near editor location"
    Radius
  Continue in Combat Behavior
    Remain Near Guard Location / radio btn
    Remain Near Reference to Guard / radio btn
Patrol tab
  Starting Location
    "'(none)' in '(none)'" / button
    Radius
  Flags
    Repeatable / flags
  Patrol Point List
Sandbox tab
  Wander Location
    "'(none)' in '(none)'" / button
    Radius
  Allowed Behavior
    Eating / flags
    Sleeping / flags
    Conversation / flags
    Idle Markers / flags
    Furniture (other than beds) / flags
    Wandering / flags
Sleep tab
  Sleep Location
    "'(none)' in '(none)'" / button
    Radius
Travel tab
  Destination
    "'(none)' in '(none)'" / button
    Radius
Use Item At tab
  Item to Use
    Specific Reference / radio btn
       Cell/Ref selector
    Any Object / radio btn
      Object ID   % both or one at a time?
      Object Type
  Location
    "'(none)' in '(none)'" / button
    Radius
    Sit Down / flag
  Allow Search / flag
    "Near editor location"
    Radius
    Allow Buying / flag
    Allow Killing / flag
    Allow Stealing / flag
Use Weapon tab
  Weapon
    Specific Reference / radio btn
       Cell/Ref selector
    Any Object / radio btn
      Object ID   % both or one at a time?
      Object Type
      Count
  Location
    "'(none)' in '(none)'" / button
    Radius
  Target / flag
    Cell/Ref selector
  Target Location / flag
    "Edit"
    Radius
  Flags
    Hold fire when blocked / flag
    Crouch to reload / flag
    Always Hit / flag
    Do No Damage / flag
  Fire Rate
    Auto fire / radio btn
    Volley fire / radio btn
    Shots per volley Min
    Shots per volley Max
    Pause between volleys Min
    Pause between volleys Max
  Fire Count
    Repeat fire / radio btn
    Number of bursts / radio btn
      Count
Wander tab
  Wander Location
    "'(none)' in '(none)'" / button
    Radius
  Allowed Behavior
    Eating / flags
    Sleeping / flags
    Conversation / flags
    Idle Markers / flags
    Furniture (other than beds) / flags
    Wandering / flags


The flags "allow search" etc. are not stored.
The data subrecords exists or not.

Find / CG03AmataRuntoClass
PACK/PTDT 16
Type 2 % 0 Specific Reference 1 Any Object 3 Linked Ref
Target FormID 11 % Object Type

Object Types: capture_20090129_131425.png
19 All: Combat Wearable
20 All: Wearable
0 NONE
1 Activators
24 Actor Effects: Any
27 Actor Effects: Range Self
25 Actor Effects: Range Target
26 Actor Effects: Range Touch
28 Actors: Any
17 Alchemy
13 Ammo
2 Armor
3 Books
4 Clothing
5 Containers
15 Creatures
6 Doors
10 Flora
18 Food
11 Furniture
7 Ingredients
16 Keys
8 Lights
9 Miscellaneous
14 NPCs
12 Weapons: Any
22 Weapons: Melee
21 Weapons: NONE
23 Weapons: Ranged

0 NONE
1 Activators
2 Armor
3 Books
4 Clothing
5 Containers
6 Doors
7 Ingredients
8 Lights
9 Miscellaneous
10 Flora
11 Furniture
12 Weapons: Any
13 Ammo
14 NPCs
15 Creatures
16 Keys
17 Alchemy
18 Food
19 All: Combat Wearable
20 All: Wearable
21 Weapons: NONE
22 Weapons: Melee
23 Weapons: Ranged
24 Actor Effects: Any
25 Actor Effects: Range Target
26 Actor Effects: Range Touch
27 Actor Effects: Range Self
28 Actors: Any

0 NONE 1 Activators 2 Armor 3 Books 4 Clothing 5 Containers 6 Doors 7 Ingredients 8 Lights 9 Miscellaneous 10 Flora 11 Furniture 12 Weapons: Any 13 Ammo 14 NPCs 15 Creatures 16 Keys 17 Alchemy 18 Food 19 All: Combat Wearable 20 All: Wearable 21 Weapons: NONE 22 Weapons: Melee 23 Weapons: Ranged 24 Actor Effects: Any 25 Actor Effects: Range Target 26 Actor Effects: Range Touch 27 Actor Effects: Range Self 28 Actors: Any



PACK/PTDT 16
Type 0 % 0 Specific Reference 1 Any Object 3 Linked Ref
Target FormID 207665
Distance/Count 1500
0   % Warn/Attack Behaviour ????

Eat / ArmitageEat9x2
PACK/PLD2 12
Type 7 % 0 Specific reference 2 Near current location 3 Near editor location 6 N
ear linked reference
Location FormID 0
Radius 0
% 7 At package location


PACK/EDID 14
87bSMLabScare
Chunk name: PKDT
PACK/PKDT 12
0000,0010,1000,0000,0010,0010,0000,0110
XXXX
XXXX
XXXX
Chunk name: PLDT
PACK/PLDT 12
0
367522 % Travel Destination FormID
0 % Radius?
Chunk name: PSDT
PACK/PSDT 8
255
255
0
255
0
Chunk name: POBA
PACK/POBA 0
Chunk name: INAM
PACK/INAM 4
0
Chunk name: SCHR
PACK/SCHR 20
0
0
0
0
65536
Chunk name: TNAM
PACK/TNAM 4
0
Chunk name: POEA
PACK/POEA 0
Chunk name: INAM
PACK/INAM 4
129909
Chunk name: SCHR
PACK/SCHR 20
0
0
0
0
65536
Chunk name: TNAM
PACK/TNAM 4
0
Chunk name: POCA
PACK/POCA 0
Chunk name: INAM
PACK/INAM 4
0
Chunk name: SCHR
PACK/SCHR 20
0
0
0
0
65536
Chunk name: TNAM
PACK/TNAM 4
0
End of PACK

This flag info is copied from NOTES_ESPTEST.

0000,0010,1000,0000,0010,0010,0000,0110
0000,0000,1000,0000,0000,0000,0000,0000
0000,0000,0000,0000,0001,0000,0000,0000
0000,0000,0100,1100,0010,0000,0000,0000
0000,0100,0000,0000,0000,0000,0000,0000 % DefaultGuardinCombatInterior
0001,0100,1100,0000,0000,0010,0000,0000 % DefaultGuardLinkedRef1024StayAtEdLoc128
0000,0000,0100,0000,0001,0000,0000,0000 % FFER27RegulatorFollowLeader
0000,1000,0000,0000,0001,0000,0000,0000 % MS01MutantConversationA
                                      ^Offers Services
                                     ^Must Reach Location
                                    ^Must Complete
                                   ^Start/Lock Doors
                                 ^End/Lock Doors
                                ^AtLoc/Lock Doors
                               ^Start/Unlock Doors
                              ^End/Unlock Doors
                            ^AtLoc/Unlock Doors
                           ^Continue if PC near
                          ^Once Per Day
                         ^??
                       ^~Enable Fallout Behavior % Ob:Skip Fallout Behavior XXXX not in F3
                      ^Always Run
                     ^??
                    ^??
                  ^??
                 ^Always Sneak
                ^Allow Swimming
               ^Allow Falls
             ^HeadTracking Off
            ^Weapons Unequipped
           ^XXXX ???? % Ob: Defensive Combat XXXX not in F3
          ^Weapon Drawn % Ob:Use Horse XXXX not in F3
        ^No Idle Anims
       ^Pretend In Combat
      ^Continue During Combat
     ^No Combat Alert
   ^XXXX ????

HeadTracking Off



Package Type:
0 Find
1 Follow
2 Escort
3 Eat
4 Sleep
5 Wander
6 Travel
7 Accompany
8 Use Item At
9 Ambush
10 Flee not Combat
11 Cast Magic  XXXX in Oblivion, not in Fallout3
12 SandBox
13 Patrol
14 Guard
15 Dialogue
16 Use Weapon


Two flag bytes in PKDT:
1100,1101,1100,1101 % when Fallout Behavior is 1, these have no meaning (0xcdcd)
0000,0001,0101,0000
0000,0001,0011,0100
1100,1101,1100,1101 % Fallout Behavior = 0 but 0xcdcd!!!!
0000,0000,0011,0001
0000,0001,1111,0100
                  ^Hellos to player
                 ^Random conversations?
                ^Observe combat behavior
               ^??
             ^Reaction to player actions
            ^Friendly fire comments
           ^Aggro Radius Behavior
          ^Allow Idle Chatter
        ^Avoid Radiation
       ^Random conversations?

Strange: When Combat Style was changed from "default",
the above flags went all to 0.


After flags in PKDT:
DefaultGuardinCombatInterior
2
0
-124
5 % 4 Warn/Attack Behaviour?
% Remain Near Guard Location = 1
% Remain Near Reference to Guard = 0
% Warn/Attack Behaviour = 1

DefaultGuardLinkedRef1024StayAtEdLoc128
6 % Package related flags?
0
3
0
% Remain Near Guard Location = 0
% Remain Near Reference to Guard = 1
% Warn/Attack Behaviour = 0

verify
PACK/IDLF


Unknown in PKDT:
0
3

PLDT is used for multiple packages:
Travel: Destination + Radius
SandBox: Wander Location + Radius
Eat: Eat Location + Radius
Dialogue: Start/Wait Location + Radius and Trigger Location
Patrol: Starting Location + Radius
Find: Allow Search Location + Radius
Ambush: Wait Location
Guard: Guard Location

PTDT is used for multiple packages:
Dialogue: Target + Activate Distance
Accompany: Accompany Target + Accompany Distance
Find: Find Target
Follow: Follow Target + Follow Distance

Package SandBox data:
Allowed Behavior flags / AbrahamWashingtonCPS11x14
Eating 0
Sleeping 0
Conversation 1
Idle Markers 1
Furniture (other than beds) 1
Wandering 1

Package Use Weapon data:
PACK/PKW3 24
0
0
257 % Flags: Any Object + Target + Volley fire + Repeat fire
1
1 % Fire Rate Shots per volley min
6 % Fire Rate Shots per volley max
1.000000 % Fire Rate Pause between volleys min
2.000000 % Fire Rate Pause between volleys max
0
PACK/PTD2 16
0
655843 % Target Ref FormID
0
0

FFEU18Raider2Hit:
PACK/PLDT 12 % Location
0 % "Specific reference" text not shown, only the reference EDID
Location FormID 703441
Radius 0
PACK/PTDT 16 % Weapon/Any Object
1 % 1 Any Object
Target FormID 16924 % Object ID
Distance 1 % Count
0
PACK/PKW3 24
256
0
1
1
Fire Rate Shots per volley min 1
Fire Rate Shots per volley max 3
Fire Rate Pause between volleys min 0.500000
Fire Rate Pause between volleys max 1.000000
0
Chunk name: PTD2
PACK/PTD2 16
0
Target Ref FormID 703441
0
0





Package Dialogue data:
PACK/PLDT 12 % Start/Wait Location
2 % 2 Near current location
Location FormID 0
Radius 0
Chunk name: PLD2
PACK/PLD2 12 % Trigger Location  XXXX again this comes twice
2 % 2 Near current location
0
420
PACK/PTDT 16
0 % 0 Specific Reference
Target FormID 20 % Target Ref FormID
Distance 420 % Activate Distance
0
% different record follows
PACK/PKDD flags
0100,0010,0100,1000
0100,0010,1100,1000
          ^0 Say To 1 Conversation

PACK/CTDA 28
0000,0001
        ^0 AND 1 OR
       ^Run on Target
^^^000 == 001 != 010 > 011 >= 100 < 101 <=
0
0
0
Value 1.000000
Function ID 161
Parameter 1: 125770 % SisterDrinkSS20x6 FormID
Parameter 2: 0
2   % R flag
124758 % SisterRef FormID

MS01MutantConversationA follows:




Package Patrol data:
PACK/PKPT 2
1 % Flags? 1 Repeatable

Patrol Point List is formed by following XLKR data in the REFRs
starting from the PACK/PLDT Start Location.
PACK/PLDT 12
0
Location FormID 143740
Radius 0

143740 PaladinGladeTeachGrenadeMARKER has XLKR = 124261
124261 PaladinGladeTeachRifleMarker has XLKR = 124262
124262 PaladinGladeTeachPistolMarker has XLKR = 143740
They form a closed triangle path.


Package Accompany data:
Uses PTDT.


Package Find data:
PACK/PTDT 16
0 % ?? 0 Specific Reference
Target FormID 124771
0
0

Where are flags Allow Buying, Killing, Stealing?

Package Follow data:
PACK/PKFD 4
0
PACK/PTDT 16
1 % 1 Any Object
Target FormID 433051
Distance 210
0

Package Ambush data:
PACK/PLDT 12 % Wait Location
3 % 0 Specific reference 3 Near editor location
Location FormID 0
Radius 256
PACK/PLD2 12 % Ambush Location
6 % 6 Near linked reference
0
1024 % Radius
PACK/PKAM 0  % XXXX what this means? Hide while Ambushing?
PACK/PLD2 12 % XXXX second time?
6
0
1024

Package Guard data:
PACK/PLDT 12 % Guard Location
2 % 2 Near current location
Location FormID 0
Radius 512
PACK/PTDT 16 % Reference to Guard
3 % 3 Linked Ref
Target FormID 0
Distance 0
0

Where are flags?
Warn/Attack Behaviour
Remain Near Guard Location | Remain Near Reference to Guard

Package Sleep data:
PACK/PLDT 12 % Sleep Location
6
Location FormID 0
Radius 0

Package Travel data:
PACK/PLDT 12 % Destination
2
Location FormID 0
Radius 0
PACK/PLDT 12
3
Location FormID 0
Radius 0

Package Flee not Combat data:
PACK/PTDT 16 % Flee From
0
Target FormID 20
Distance 2000 % Minimum Distance From Target
0


BobVote / FOV = 50
PACK/PKDD 24
0
0
72
66

BobVote / FOV = 53
PACK/PKDD 24
0
0
84 % 72 + 4*3 = 84
66

FOV seems to be a byte value because the short values are too large.

XXXX The formula is wrong.

Val FOV
50  72
53  84
60  112
80  160
90  180
120 240

240/2 = 120


PACK/PSDT 8
Month -1 % -1 Any
Day of week -1 % -1 Any
Date 0 % 0 Any
Time -1 % -1 Any
Duration 0

PACK/PSDT 8
Month 0 % -1 Any
Day of week 0 % -1 Any
Date 31 % 0 Any
Time 18 % -1 Any
Duration 2

Day of week:
-1 Any
0 Sunday
1 Monday
2 Tuesday
3 Wednesday
4 Thursday
5 Friday
6 Saturday
7 Weekdays (MTWTF)
8 Weekends (SS)
9 Monday, Wednesday, Friday
10 Tuesday, Thursday

-1 Any 0 Sunday 1 Monday 2 Tuesday 3 Wednesday 4 Thursday 5 Friday 6 Saturday 7 Weekdays (MTWTF) 8 Weekends (SS) 9 Monday, Wednesday, Friday 10 Tuesday, Thursday

Month:
-1 Any
0 January
1 February
2 March
3 April
4 May
5 June
6 July
7 August
8 September
9 October
10 November
11 December
12 Spring (MAM)
13 Summer (JJA)
14 Autumn (SON)
15 Winter (DJF)

-1 Any 0 January 1 February 2 March 3 April 4 May 5 June 6 July 7 August 8 September 9 October 10 November 11 December 12 Spring (MAM) 13 Summer (JJA) 14 Autumn (SON) 15 Winter (DJF)


============================================================================

PERK
Perk

capture_20081215_080125.png
capture_20081225_230251.png
capture_20090106_192858.png
capture_20090111_133911.png
capture_20090129_124532.png % list of perks

Todo:
Flags % ok
Perk Entry % more Operation/Function byte values in esps
EPFT
EPF3

Infiltrator
Perk Entry:
Rank: 1
Priority: 0
Type: Entry Point
Data1: Ignore Broken Lock
Data2: Set Value
Data3: 1.0000

PERK/PRKE 3
2
0
0
Chunk name: DATA
PERK/DATA 3
32     % Entry Point type
1 % Function %% 1 Set Value 2 Add Value 3 Multiply Value
1     % what is this?
Chunk name: EPFT
PERK/EPFT 1
1     % what is this?
Chunk name: EPFD
PERK/EPFD 4
1.000000 % Function FloatValue
Chunk name: PRKF
PERK/PRKF 0

IntenseTraining
PERK/DATA 5
0
2
10 % Num Ranks
1
0

YaoGuaiMeatPerk
PERK/DATA 5
0 % 0 Traint off 1 Trait on
Level 0
Num Ranks 1
0 % 0 Playable off 1 Playable on
1 % 0 Hidden off 1 Hidden on

Rank: 1
Priority: 0
Type: Entry Point
Data1: Calculate Weapon Damage
Data2: Multiply Value
Data3: 1.10

PERK/DATA 3
0
3
3
Chunk name: EPFT
PERK/EPFT 1
1
Chunk name: EPFD
PERK/EPFD 4
1.100000
Chunk name: PRKF
PERK/PRKF 0


MS03Perk3E
PERK/DATA 4 % All flags are unmarked, Hidden byte is missing
0
Level 0
Num Ranks 1
0

Values:
PERK/DATA 3
0
3 % 1 2 3 8 9
3 % 1 2 3

First byte has values:
0
2
4
6
8
9
10
11
17
20
21
23
25
26
27
28
29
31
32
33
35
36

Perk Conditions are a list of CTDA subrecords.

Perk Entry Conditions.
Tab choices depend on what?
How CTDA are divided to Perk Owner, Attacker, and Attacker Weapon tabs?
PRKC = 0 Perk Owner % verify other choices: 1 Target

First DATA is for the main perk data.
DATA following PRKE are for Perk Entries.
DATA following PRKE depends on the PRKE Type.

Perk Entry window:
capture_20081225_230251.png

Rank
Priority
Case (1): Quest
Case (2): Ability
Case (3): Entry Point

(1) Quest FormID / Stage No
(2) Ability FormID % refs to Actor Effect
(3) Entry Point (DATA 3) / Function (EPFT) / Function Data (EPFD)
Function choices depend on the Entry Point.

(1)
Rank
Priority
Type: Quest
Data1 <Quest FormID>

PERK/DATA 8
Data1 FormID 14514 % rename as Quest FormID?
Data2 10           % rename as Stage?
-51
-51
-51

(3)
Rank
Priority
Type: Entry Point
Data1 <Entry Point>
Data2 <Function>
Data3 <Function Data>
Data4

PERK/DATA 3
6  % Adjust Limb Damage
3
3
PERK/EPFT 1
1  % Function % 1 Multiply Value
PERK/EPFD 4
0.500000 % Multiplier
PERK/PRKF 0

PRKF ends the function data.


XXXX Value type of EPFD depends on the function.


% This list has all valid function choices.
Entry Points: % in DATA 3

27 9 2 Activate / tabs: Perk Owner, Target
F: Add Activate Choice(EPFT) Button Label(EPF2) Run Immediately(EPF3) Start Script(SCHR)

21 8 2 Add Leveled List On Death / tabs: Perk Owner, Target
F: 3 Add Leveled List(EPFT) Leveled List FormID(EPFD) 

11 2 1 Adjust Book Skill Points / tabs: Perk Owner
BaseFunctionSet
F: Absolute Value(EPFT) % Value = Abs(Value)
F: Add Actor Value Mult % Value = Value + ActorValue*0.0 % * not displayed
F: Add Range To Value % Value = Value + rand(0.0,0.0)
F: 1 Add Value(EPFT) FloatValue(EPFD) % Value = Value + 0.0
F: Multiply Value(EPFT) FloatValue(EPFD) % Value = Value*0.0
F: Negative Absolute Value % Value = -Abs(Value)
F: Set Value % Value = 0.0

26 3 1 Adjust Drinking Radiation / tabs: Perk Owner
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

9 3 1 Adjust Experience Points / tabs: Perk Owner
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

10 2 1 Adjust Gained Skill Points / tabs: Perk Owner
BaseFunctionSet
F: 1 Add Value(EPFT) FloatValue(EPFD)

6 3 3 Adjust Limb Damage / tabs: Perk Owner, Attacker, Attacker Weapon
BaseFunctionSet
F: Absolute Value
F: Add Actor Value Mult
F: Add Range To Value
F: Add Value
F: 1 Multiply Value(EPFT) FloatValue(EPFD)
F: Negative Absolute Value
F: Set Value

Adjust Range Penalty / tabs: Perk Owner, Weapon
BaseFunctionSet

17 3 2 Calculate Buy Price / tabs: Perk Owner, Item
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

Calculate Gun Spread / tabs: Perk Owner, Weapon
BaseFunctionSet

Calculate Inventory AP Cost / tabs: Perk Owner
BaseFunctionSet

4 1 2 Calculate Mine Explode Chance / tabs: Perk Owner, Item
BaseFunctionSet
F: 1 Set Value(EPFT) FloatValue(EPFD)

Calculate My Critical Hit Chance / tabs: Perk Owner, Weapon, Target
BaseFunctionSet

2 3 3 Calculate My Critical Hit Damage / tabs: Perk Owner, Weapon, Target
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

8 3 3 Calculate To Hit Chance / tabs: Perk Owner, Weapon, Target
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

Calculate Weapon Attack AP Cost / tabs: Perk Owner, Weapon
BaseFunctionSet

0 3 3 Calculate Weapon Damage / tabs: Perk Owner, Weapon, Target
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

Calculate Weapon Range / tabs: Perk Owner, Weapon
BaseFunctionSet

Get Bad Karma / tabs: Perk Owner
BaseFunctionSet

Get Disposition / tabs: Perk Owner, Target
BaseFunctionSet

Get Good Karma / tabs: Perk Owner
BaseFunctionSet

Get Max Carry Weight / tabs: Perk Owner
BaseFunctionSet

Get Should Assist / tabs: Perk Owner, Attacker, Attackee
BaseFunctionSet

Get Should Attack / tabs: Perk Owner, Attacker
BaseFunctionSet

Hacking Science Bonus / tabs: Perk Owner
BaseFunctionSet

33 1 1 Has Concentrated Fire / tabs: Perk Owner
BaseFunctionSet
F: 1 Set Value(EPFT) FloatValue(EPFD)

29 1 1 Has Paralyzing Palm / tabs: Perk Owner
BaseFunctionSet
F: 1 Set Value(EPFT) FloatValue(EPFD)

32 1 1 Ignore Broken Lock / tabs: Perk Owner
BaseFunctionSet
F: 1 Set Value(EPFT) FloatValue(EPFD)

20 1 1 Ignore Locked Terminal / tabs: Perk Owner
BaseFunctionSet
F: 1 Set Value(EPFT) FloatValue(EPFD)

Ignore Running During Detection / tabs: Perk Owner
BaseFunctionSet

23 3 1 Modify Addiction Chance / tabs: Perk Owner
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

Modify Addiction Duration / tabs: Perk Owner
BaseFunctionSet

36 3 3 Modify Enemy Critical Hit Chance / tabs: Perk Owner, Weapon, Target
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

25 3 1 Modify Positive Chem Duration / tabs: Perk Owner
BaseFunctionSet
F: 1 Multiply Value(EPFT) FloatValue(EPFD)

Modify Recovered Health / tabs: Perk Owner
BaseFunctionSet

28 1 1 Mysterious Stranger / tabs: Perk Owner
BaseFunctionSet
F: 1 Set Value(EPFT) FloatValue(EPFD)

35 2 3 Player Kill AP Reward / tabs: Perk Owner, Weapon, Target
BaseFunctionSet
F: 1 Add Value(EPFT) FloatValue(EPFD)




PERK/DATA 3
27
9
2 % Number of tabs?



Entry Point types:
0 Calculate Weapon Damage
2 Calculate My Critical Hit Damage
4 Calculate Mine Explode Chance
6 Adjust Limb Damage
8 Calculate To Hit Chance
9 Adjust Experience Points
10 Adjust Gained Skill Points
11 Adjust Book Skill Points
17 Calculate Buy Price
20 Ignore Locked Terminal
21 Add Leveled List On Death
23 Modify Addiction Chance
25 Modify Positive Chem Duration
26 Adjust Drinking Radiation
27 Activate
28 Mysterious Stranger
29 Has Paralyzing Palm
32 Ignore Broken Lock
33 Has Concentrated Fire
35 Player Kill AP Reward
36 Modify Enemy Critical Hit Chance
Adjust Range Penalty
Calculate Gun Spread
Calculate Inventory AP Cost
Calculate My Critical Hit Chance
Calculate Weapon Attack AP Cost
Calculate Weapon Range
Get Bad Karma
Get Disposition
Get Good Karma
Get Max Carry Weight
Get Should Assist
Get Should Attack
Hacking Science Bonus
Ignore Running During Detection
Modify Addiction Duration
Modify Recovered Health


Functions:
1 Set Value
2 Add Value
3 Multiply Value
8 Add Leveled List
9 Add Activate Choice


EPFT is unknown.


============================================================================

continue
PGRE
Projectile reference ??

PGRE/DATA
PGRE/EDID
PGRE/NAME
PGRE/XESP
PGRE/XHLP
PGRE/XOWN
PGRE/XPWR
PGRE/XRGD
PGRE/XSCL

Reference to projectile:
PGRE/NAME 4
17402 formid?
Chunk name: DATA
PGRE/DATA 24
20560.000000
-13568.023438
-1662.629639
0.000640
-0.000877
0.023119


============================================================================

continue
PROJ
Projectile

capture_20081215_214059.png
capture_20081226_120035.png
capture_20090106_205902.png


Todo:
Destructible Object Data: VATS Targetable flag % ok
Destructible Object Stage: Replacement Model
Light % ok
Projectile Types
S and H flags % ok
Destruction Data % ok except replacement model


Projectile Type:
1 Missile
2 Lobber
8 Flame

Flags:
0000,0000,1000,1101 S MF H
0000,0000,0000,0010        E TI
0000,0000,0110,0110        E AT CbD CbPU
0000,0010,0000,1100   MF     AT          PT
0000,0001,0100,1000   MF     TI     CbPU    CE
                  ^Supersonic | Hitscan (Visible in VATS Only)
                 ^Explosion
                ^0 Trigger on Impact 1 Alt. Trigger
               ^Muzzle Flash
            ^Can be Disabled
           ^Can be Picked Up
          ^Supersonic | Hitscan (Visible in VATS Only)
        ^Crit Effect: Pins Limbs
       ^Pass Through Small Transparent


Detection Sound Level:
0 Loud
1 Normal
2 Silent

test_projectile03.esp
FusionCarBatteryProjectile % Has destruction data
PROJ/DEST 8 % Destructible Object Data
Health 5
0000,0001
        ^Enabled
42
68
84
PROJ/DSTD 20 % Destructible Object Stage
Health Percentage 12
0
Model Damage Stage 7
0000,0101
        ^Cap Damage
       ^Disable Object
      ^Destroy Object
Self Damage Per Second 3
0
0
0
Explosion FormID 117384
Debris FormID 391607
Debris Count 4
PROJ/DSTF 0

Destructible Object Data window:
Flags:
 Enabled
 VATS Targetable
Health
List of Destructible Object Stages

Destructible Object Stage window:
Health Percentage
Self Damage Per Second
Model Damage Stage
Explosion
Debris
Debris Count
Replacement Model
Flags:
 Cap Damage
 Disable Object
 Destroy Object


test_projectile03.esp
PROJ/DEST 8
5
0
10753
68
84
Chunk name: DSTD
PROJ/DSTD 20
12
0
7
2
3
0
0
0
136
202
1
0
183
249
5
0
4
0
0
0
Chunk name: DSTF
PROJ/DSTF 0


============================================================================

ok
PWAT
Placeable Water

capture_20081215_221051.png
capture_20081226_122053.png

Todo:
check the flags with esp files % ok

Flags:
0001,0000,0000,0011,0000,0110,0100,0011 % 1 2   4           10 11    13 14 16 17    BathtubWater
0001,0000,0000,0111,0000,1110,0100,0111 % 1 2 3 4           10 11 12 13 14 16 17 18 BuzzardPointWaterPlane
0001,0000,0000,0100,0000,1010,0100,0001 % 1     4           10    12       16 17 18 CreekWater2048x2048
0001,0000,0000,0011,0000,1110,0100,1111 % 1 2 3 4 5         10 11 12 13 14 16 17    DemoWastelandPuddle
0001,0000,0000,0011,0000,1110,0111,1100 %     3 4 5 6 7     10 11 12 13 14 16 17    DukovFountainWater
0001,0000,0000,0011,0000,1110,0111,1101 % 1   3 4 5 6 7     10 11 12 13 14 16 17    DupontCircle01Water
0001,0000,0000,0011,0000,0110,0000,0011 % 1 2               10 11    13 14 16 17    IndoorWaterP1x2
0001,0000,0000,0000,0000,0010,0100,0001 % 1     4           10             16 17    LamplightMainCaveWater
0001,0000,0000,0011,0000,0110,0000,0001 % 1                 10 11    13 14 16 17    LamplightPierWater
0000,0000,0000,0011,0000,1111,1100,0111 % 1 2 3 4       8 9 10 11 12 13 14    17    lInteriorWaterSquare01
0001,0000,0000,0011,0000,1110,1100,0011 % 1 2   4         9 10 11 12 13 14 16 17    OasisWater1x1
0001,0000,0000,0111,0000,1111,0101,1110 %   2 3 4 5 6   8   10 11 12 13 14 16 17 18 PoolWastelandWater01
0000,0000,0000,0000,0000,1010,0100,1101 % 1   3 4 5         10    12          17    TenPenWater01
0001,0000,0000,0011,0000,0110,1000,0011 % 1 2             9 10 11    13 14 16 17    Vault101eWater


                                      ^1
                                     ^2
                                    ^3
                                   ^5
                                 ^6
                                ^7
                               ^4
                              ^9
                            ^8
                           ^10 | 17
                          ^11 | 13 | 14
                         ^12
                  ^11 | 13 | 14
                 ^11 | 13 | 14
                ^18
   ^16

1 Reflects: % this is flag too
2 Actors
3 Land
4 Sky
5 LOD Land
6 LOD Buildings
7 LOD Trees
8 Dead Bodies
9 Dynamic objects

10 Refracts: % this is flag too
11 Actors
12 Land
13 Dead Bodies
14 Dynamic objects

15 Object texture coordinates
16 Depth
17 Underwater fog
18 Silhouette reflections


============================================================================

final check
QUST
Quest

capture_20081215_080441.png
capture_20081225_231816.png
capture_20081215_231846.png
capture_20090106_193955.png
capture_20090106_234008.png

Todo:
DATA % ok
QSDT % ok
QSTA % ok
QOBJ % ok
NNAM % ok
NAM0 % ok


QUST/DATA 8
0001,0101
Priority 25
9
59
0
0
0
0

Flags tests:
capture_20081225_235055.png % original
capture_20081225_235059.png
capture_20081225_235249.png
capture_20081225_235332.png

Flags:
0001,0101
0001,1101 % added: Allow repeated stages
0001,1001
        ^Start Game Enabled
      ^Script Processing Delay Default
     ^Allow repeated stages
   ^Allow repeated conversation topics

Bit valued 2 is always 0 in Fallout3.esm.


Conversations tab lists all DIALs which have QSTI == this quest.
DIAL/EDID 15
BigTownGoodbye
Chunk name: QSTI
DIAL/QSTI 4
Quest FormID 178469


QUST
DIAL --> QSTI to QUST
GRUP Topic Children
INFO --> QSTI to QUST
INFO --> QSTI to QUST
 ***
ENDGRUP

Records with:
ICON % nothing
CNAM % ok Log Entry
SCRI
INDX
QSDT FFRadioSignals09
QSTA
QOBJ
NNAM
NAM0

capture_20081215_231915.png % AndaleTalk1


Quest Stage structure:
QUST/INDX
QUST/QSDT
QUST/CNAM % Log Entry
QUST/SCHR % Result Script
QUST/SCDA
QUST/SCTX
QUST/SCRO ***
QUST/NAM0 % Next quest FormID
QUST/INDX % next stage


QUST/QSDT 1
0000,0000
QUST/SCHR 20
0
Number of the script objects (SCRO) and refs (SCRV) 4
Size of the compiled script (SCDA) 41
Number of the script variables 0
Script Type 0 % 0 Object 1 Quest 256 Effect
1 % What is this? Script Type "Quest Stage"?


Quest Objectives:

QUST/QOBJ
QUST/NNAM
QUST/QSTA % QSTA + CTDA possibly multiple times
QUST/CTDA

============================================================================

continue
RACE
Race

capture_20081215_080813.png
capture_20081215_224341.png % continue later?
capture_20081225_235953.png
capture_20090208_212724.png % XNAM

Todo:
DATA has skill values which seems to be unused in F3
Second byte in CNAM
ATTR
MODD
SNAM
XNAM % ok


RACE/VTCK 8
106446 % Default Voice Type Male % VTYP record
46 % Default Voice Type Female ???? Why children have adult voices?

RACE/CNAM 2
Default Hair Color ID 12 (GMST sHairColor12)
1 % XXXX What is this?

RACE/ATTR 2
5
5

RACE/MODD 1
2

RACE/SNAM 2
27
-115

RACE/ATTR 2
5
5

============================================================================

ok
RADS
Radiation Levels

capture_20081215_231957.png

RADS/EDID 5
Rad1
Chunk name: DATA
RADS/DATA 8
200 % Rads
208366 % Sickness FormID

============================================================================

continue
REFR
Reference

capture_20081215_234135.png
capture_20090107_002331.png
capture_20090111_143823.png
capture_20090119_174039.png
capture_20090122_045444.png
capture_20090124_223525.png
capture_20090125_003249.png % Editor's toolbar includes REFR creation buttons
capture_20090126_095507.png

Todo:
XESP Enable Parent FormID ---> Enable Parent Ref FormID % ok
capture_20090122_075910.png shows radius 254.75 but XRDS = -1.254456
XLOC other subrecord sizes
XLOC Level ranges; both 80 and 100 are Very Hard


REFR/DATA
REFR/EDID
REFR/FNAM
REFR/FULL
REFR/INAM
REFR/NAME
REFR/ONAM
REFR/RCLR
REFR/SCDA
REFR/SCHR
REFR/SCRO
REFR/TNAM
REFR/XACT
REFR/XAMC
REFR/XAMT
REFR/XAPD
REFR/XAPR
REFR/XCLP
REFR/XCNT
REFR/XEMI
REFR/XESP
REFR/XHLP
REFR/XIBS
REFR/XLCM
REFR/XLKR
REFR/XLOC
REFR/XLOD
REFR/XLRM
REFR/XLTW
REFR/XMBO
REFR/XMBP
REFR/XMBR
REFR/XMRK
REFR/XNDP
REFR/XOCP
REFR/XORD
REFR/XOWN
REFR/XPOD
REFR/XPPA
REFR/XPRD
REFR/XPRM
REFR/XPWR
REFR/XRAD
REFR/XRDO
REFR/XRDS
REFR/XRGB
REFR/XRGD unknown
REFR/XRMR
REFR/XSCL
REFR/XSED
REFR/XTEL
REFR/XTRG
REFR/XTRI


Toolbar includes REFR creation buttons:
Create a cubic activator
Create a cubic multibound
Create a spherical multibound
Create an occlusion plane
Join or break planes
Create a roombound
Enter portal mode
Draw a portal
Link portal to roombound
Detach portal from roombound
Join a room with a multibound
Create a sound emitter
Create an acoustic space
Create a collision plane
Create a collision box
Create a collision sphere


Reference Editor ID
Base Object
Encounter Zone

Flags:
Persistent Reference
Turn Off Fire
No AI Acquire
Initially Disabled
Hidden From Local Map
Inaccessible
Open By Default
Motion Blur
Casts Shadows
Visible When Distant
High Priority LOD
Reflected By Auto Water
Refracted By Auto Water
Ignored By Sandbox

What controls what flags are greyed out?
When Visible When Distant flag is on, High Priority LOD flag is active.

FormID 0x00055ca1 has Visible When Distant on, but it is not
in the header flags. The VWD flag is greyed out.
Does this flag inherit from the base object? Yes.
What flags are inherited? The greyed out flags?

flags 1 = 0000,0000,0000,0000,0000,1100,0000,0000 % REFR:Persistent Reference & REFR:Initially Disabled

Tabs:
3D Data
  Position XYZ + 1.000,1.000,1.000
  Rotation XYZ + 1.000,1.000,1.000 % Editor displays in degrees, ESP in radians
  Scale + 0.100
  Test Radius
Ownership
  NPC
  Faction
  Required Rank
Extra
  Count
  Health%
  Charge
  Time Left
  Radius
  Radiation
  Ammo Count
  Soul
Reflected by
  References % list of refs
Refracted by
  References % list of refs
Decals
  Linked Decals % list of decal refs
Linked Ref
  Reference Linked To:
   Cell
   Reference
  Link Start Color
  Link End Color
Activate Parents
  Activate Parent Ref | Delay % list of refs
  Parent Activate Only % flag
Enable Parent
  Copy Enable State From:
   Cell
   Reference
  Set Enable State to Opposite of Parent % flag
  Pop In % flag
Emittance
  Interior Light
  Exterior Light
MultiBound
  MultiBound Reference:
   Cell
   Reference
Marker Data
  Name
  Type: % TNAM
    1 City
    2 Settlement
    3 Encampment
    4 Natural Landmark
    5 Cave
    6 Factory
    7 Monument
    8 Military
    9 Office
    10 Town Ruins
    11 Urban Ruins
    12 Sewer Ruins
    13 Metro
    14 Vault
1 City 2 Settlement 3 Encampment 4 Natural Landmark 5 Cave 6 Factory 7 Monument 8 Military 9 Office 10 Town Ruins 11 Urban Ruins 12 Sewer Ruins 13 Metro 14 Vault
  Flags:
    Visible
    Can Travel To
    "Show All" hidden
NavMesh Import Option
Primitive
  Primitive Type
  Collision Layer:
21 Acoustic space
22 Actorzone
2 Animstatic
31 Avoidbox
8 Biped
35 Camerapick
33 Camerasphere
30 Charcontroller
16 Cloudtrap
4 Clutter
32 Collisionbox
39 Custompick1
40 Custompick2
29 Deadbip
20 Debris Large
19 Debris Small
34 Doordetection
42 Droppingpick
24 Gastrap
17 Ground
27 Invisible Wall
36 Itempick
37 Lineofsight
15 Noncollidable
38 Pathpick
18 Portal
6 Projectile
23 Projectilezone
10 Props
25 Shellcasing
7 Spell
41 Spellexplosion
1 Static
13 Terrain
3 Transparent
26 Transparent Small
28 Transparent Small Anim
14 Trap
9 Trees
12 Trigger
0 Unidentified
11 Water
5 Weapon

0 Unidentified
1 Static
2 Animstatic
3 Transparent
4 Clutter
5 Weapon
6 Projectile
7 Spell
8 Biped
9 Trees
10 Props
11 Water
12 Trigger
13 Terrain
14 Trap
15 Noncollidable
16 Cloudtrap
17 Ground
18 Portal
19 Debris Small
20 Debris Large
21 Acoustic space
22 Actorzone
23 Projectilezone
24 Gastrap
25 Shellcasing
26 Transparent Small
27 Invisible Wall
28 Transparent Small Anim
29 Deadbip
30 Charcontroller
31 Avoidbox
32 Collisionbox
33 Camerasphere
34 Doordetection
35 Camerapick
36 Itempick
37 Lineofsight
38 Pathpick
39 Custompick1
40 Custompick2
41 Spellexplosion
42 Droppingpick

0 Unidentified 1 Static 2 Animstatic 3 Transparent 4 Clutter 5 Weapon 6 Projectile 7 Spell 8 Biped 9 Trees 10 Props 11 Water 12 Trigger 13 Terrain 14 Trap 15 Noncollidable 16 Cloudtrap 17 Ground 18 Portal 19 Debris Small 20 Debris Large 21 Acoustic space 22 Actorzone 23 Projectilezone 24 Gastrap 25 Shellcasing 26 Transparent Small 27 Invisible Wall 28 Transparent Small Anim 29 Deadbip 30 Charcontroller 31 Avoidbox 32 Collisionbox 33 Camerasphere 34 Doordetection 35 Camerapick 36 Itempick 37 Lineofsight 38 Pathpick 39 Custompick1 40 Custompick2 41 Spellexplosion 42 Droppingpick

  Origin XYZ
  Bounds XYZ
  Color RGB
Patrol Data
  Idle Time
  Topic
  Result Script
Teleport
  Linked Door Reference
  Flag: No alarm % in the record header flags
Lock
Lit Water
  Reflected by ref % list
Radio Data
Bound Contents % formid 0x000c0c72

 ---*---

Marker Data tab subrecords / AnacostiaCrossingMapMarkerREF

REFR/XMRK
REFR/FNAM
REFR/FULL
REFR/TNAM

REFR/TNAM 2
12 % Sewer Ruins
0

Marker has Extra tab with radius 1000.0.
That may be default radius as it is not in the record.

Marker has NavMesh Import Option tab.
Where is the flag Inherit From Base Object?
It is enabled by default.
 
REFR/XRDS
Radius % in Extra tab

 ---*---

Primitive tab subrecords / formid = 509731 / formid = 0x0007c723

Types:
(standard)
Acoustic Space
Collision Object
Room (master)
Room (slave)
Occlusion Plane
Portal


REFR/XPRM
116.563255
647.944153
586.061646
1.000000 % Color
0.000000
0.000000
0.370000
1
REFR/XMBO
116.563255
647.944153
586.061646

Editor has bound twice as much as in XMBO.
Origin is the same as in 3D Data tab.

Primitive with "Room (slave)" (box greyed-out, empty collision layer):
REFR/XMBO ***
REFR/XPRM ***
REFR/XRMR 4
1  % Number of XLRM subrecords
0  % flag? 0 = slave???
REFR/XLRM 4
789617 % Linked Room REFR FormID
REFR/XMBP 0 % Multibound?  Not necessary: only XRMR + XLRM in 0x0003a838

How it has been made? Check base object 0x0000001f for hints.

XRMR values:
1 1 0x0001c250
1 0 0x0001c24f
2 0 0x000c3593
2 1 0x000c359c
0 1 0x0009e501
3 0 0x000a6f09
6 1 0x0003a838
3 1 0x000b3795

FFEn7p12Trigger:
Primitive Type: box
Collision layer: Actorzone

Only collision layer choices are: Why only three choices?
Actorzone % no XTRI subrecord
Projectilezone % 23 in XTRI
Trigger % 12 in XTRI

When primitive type is None, subrecord XPRM is not written.
Primitive types:
1 Box
2 Sphere


 ---*---

capture_20081215_234135.png

formid = 361305 / formid = 0x00058359
flags 2 = 0000,0000,0010,1011,0011,1111,0001,0011
flags 3 = 0000,0000,0000,0001,0000,0000,0000,1111
        = 65551
Chunk name: NAME
REFR/NAME 4
Base Object FormID 134359
Chunk name: XSCL
REFR/XSCL 4
Scale 1.060000
Chunk name: DATA
REFR/DATA 24
Position X -17828.406250
Position Y 115694.828125
Position Z 16503.423828
Rotation X 0.000000
Rotation Y -0.000000
Rotation Z 4.050000
End of REFR


REFR/XPRM 32
116.563255
647.944153
586.061646
1.000000
0.000000
0.000000
0.370000
1

REFR/XMBO 12
116.563255
647.944153
586.061646

Note: It looks like XMBO is displayed and generated if XMBO
is missing. For example: While formid 0x0001c26b has
REFR/XPRM 32
Bounds X 64.000107 % Not displayed in Editor
Bounds Y 1.000000 % Not displayed in Editor
Bounds Z 87.999611 % Not displayed in Editor
the Editor displays 0.0 instead of 0.0.
Value 1.0 is not rounded because we have other case with both
XPRM and XMBO where XMBO has the displayed values.


REFR/XLOD 12
-0.057570
-0.786901
0.614388

Does XLOD always exists when Visible When Distant flag is enabled?
What the XLOD value mean? It seems to be a direction vector.


Portal Marker:
REFR/NAME 4
Base Object FormID 32
REFR/XPRM
Primitive Type 3 % 1 Box 2 Sphere 3 Plane
REFR/XPOD
Portal Ref 1 FormID 115273
Portal Ref 2 FormID 115231

Note: How the portal works? Where the portal polygon is defined?
Is this at all the portal used in the portal based rendering?
The references points to room markers.

Enabling Open by Default added
REFR/XACT 4
13              % Fallout3.esm has values 5 and 13
and
REFR/ONAM 0

Note: XACT appears without ONAM: NAME XACT XSCL DATA.
That is 0x0009cffb with XACT value 5.
ONAM has always XACT.

Enabling Ignored By Sandbox added
REFR/XIBS 0

Enabling lock added
REFR/XLOC 20
0
0
250
1
0
4096
0
0

Linked Ref added
REFR/XCLP 8
Link Start Color R 128
Link Start Color G 0
Link Start Color B 255
0
Link End Color R 217
Link End Color G 38
Link End Color B 87
0
REFR/XLKR 4
Linked Ref FormID 250699

Enable Parent tab added:
REFR/XESP 8
Parent FormID 192178
0000,0011
        ^Set Enable State to Opposite of Parent
       ^Pop In
0 (unused)
0 (unused)
0 (unused)

Emittance tab added:
REFR/XEMI 4
251312 % Interior Light refs to LIGH, Exterior Light refers to REGN

Leveled Actor tab:
ACHR/XLCM
1 % Level Modifier % 0 Easy 1 Medium 2 Hard 3 Boss (no-XLCM is None)

Enable of Patrol Data added
REFR/XPRD 4
0.123400 % Idle Time
Chunk name: XPPA
REFR/XPPA 0
Chunk name: INAM
REFR/INAM 4
0
Chunk name: SCHR
REFR/SCHR 20
0
Number of the script objects (SCRO) and refs (SCRV) 0
Size of the compiled script (SCDA) 0
Number of the script variables 0
Script Type 0 % 0 Object 1 Quest 256 Effect
1
Chunk name: TNAM
REFR/TNAM 4
22 % Topic FormID
67
4
0

Change of Primitive tab's Collision Layer added
REFR/XTRI 4
13

What is default? Transparent but what value?
xx Transparent % No XTRI
13 Terrain
9 Trees
0 Unidentified
11 Water

Radio Data tab:
REFR/XRDO 16
0.123000
0 % 
0.321000
0


X Target Data tab:
REFR/XTRG 4
422782

Refracts tab of formid = 463935 / formid = 0x0007143f
Where the objects are listed?
Are the list of objects generated automatically?

Water Lights tab of formid = 463935 / formid = 0x0007143f
Where the objects are listed?
Are the list of objects generated automatically?

Marker Data tab:
REFR/XMRK 0
REFR/FNAM 1
0
REFR/FULL 15
Name "Agatha's House" % Marker Data
REFR/TNAM 2
2 % Type
0



formid = 143736 / formid = 0x00023178
flags 2 = 0000,0000,0111,0011,0100,0010,0001,1011
flags 3 = 0000,0000,0000,1001,0000,0000,0000,1111
        = 589839
Chunk name: EDID
ACHR/EDID 16
FragPracticeRef
Chunk name: NAME
ACHR/NAME 4
Base Object FormID 143734
Chunk name: XESP
ACHR/XESP 8
598227
46660096  % what is this? flags see REFR/XESP


Activate Parents tab:
When the flag Parent Activate Only flag was enabled,
subrecord XAPD appeared.


capture_20090122_050502.png
REFR/XPRM 32
Bounds X 128.000000 % Editor displays 2xValue = 256.000000
Bounds Y 1.000000 % Editor displays 2xValue = 2.000000
Bounds Z 144.000000 % Editor displays 2xValue = 288.000000
REFR/XMBO 12
Bounds X Orig 128.000000
Bounds Y Orig 0.000000 % This is displayed as Bounds.
Bounds Z Orig 144.000000

capture_20090122_050502.png
Shows Occlusion Plane:
REFR/XPRM 32
 ***
Primitive Type 3 % 1 Box 2 Sphere 3 Plane

Primitive is Plane, but it is used as occlusion plane.
capture_20090122_050846.png shows the Occlusion Plane in the scene.
We may figure out details when we render the cell in our own
renderer.

REFR/XOCP 36
128.000000  % This is X and Z bounds.
144.000000
4832.000000 % This is the same as position in DATA.
9152.000000
6880.000000
0.000000    % Normal?
0.000000
-1.000000
1.570796    % Plane equation constant in some form?
REFR/XORD 16
0
0
0
0

REFR/XLOC 20
Level 80 % -1 Requires Key 0 Very Easy 25 Easy 50 Average 75 Hard 100 Very Hard
80 and 100 are Very Hard
Fallout3.esm has values -1 0 7 20 25 40 50 75 80 99 100

RCLR is perhaps old version of Linked Ref's XCLP.


0x0003b345 has flags1's highest bit set but it has no XMBR subrecord.

============================================================================

final check, looks the same as in Oblivion CS
REGN
Region

capture_20081215_222653.png
capture_20090106_220214.png


Enabling No Color flag means only that color goes to (0,0,0).
Disabling the color is impossible.


REGN/RDAT 8
Region Data Type 2
0000,0000
        ^Override
Priority 0
0
0

Region Data Type (RDAT types):
2 Objects
3 Weather
4 Map
5 Landscape
6 Grass % Not in Fallout3.esm
7 Sound

These are unused because change in WEAP record changed them too.
REGN/RDOT/02c 141
REGN/RDOT/02d 60
REGN/RDOT/12c 78
REGN/RDOT/12d 62


============================================================================

final check?
RGDL
Ragdoll

capture_20081215_081408.png
capture_20081226_001156.png


Chunk name 0: RGDL 1 288761275
flags 1 = 0000,0000,0000,0000,0000,0000,0000,0000
formid = 415969 / formid = 0x000658e1
flags 2 = 0000,0000,0010,1010,0100,0000,0000,0100
131087
Chunk name: EDID
RGDL/EDID 11
AntRagdoll
Chunk name: NVER
RGDL/NVER 4
1
Chunk name: DATA
RGDL/DATA 14
8
0
0
0
1
0
1
49
Chunk name: XNAM
RGDL/XNAM 4
118657 % Preview Actor FormID
Chunk name: TNAM
RGDL/TNAM 4
84995 % Body Part Data FormID
Chunk name: RAFD
RGDL/RAFD 60
0.800000 % Feedback Dynamic/Keyframe Blend Amount
0.170000 % Feedback Hierarchy Gain
0.200000 % Feedback Position Gain
0.600000 % Feedback Velocity Gain
1.000000 % Feedback Acceleration Gain
0.100000 % Feedback Snap Gain
0.000000 % Feedback Velocity Damping
3.000000 % Feedback Snap Max Settings Linear Velocity
0.300000 % Feedback Snap Max Settings Linear Distance
0.300000 % Feedback Snap Max Settings Angular Velocity
3.000000 % Feedback Snap Max Settings Angular Distance
14.000000 % Feedback Position Max Velocity Linear
18.000000 % Feedback Position Max Velocity Angular
5000 % Feedback Applied Impulse Projectile %% Value/1000 is displayed
10000 % Feedback Applied Impulse Melee %% Value/1000 is displayed
Chunk name: RAFB
RGDL/RAFB 16
11 % Dynamic Bone % XXXX taken from NIF model? preview actor's record?
15
19
26
29
33
34
1
Chunk name: RAPS
RGDL/RAPS 24
0
1
11
1
-51
3500.000000
3.000000
0.390000
3.000000
Chunk name: ANAM
RGDL/ANAM 43
Creatures\GiantAnt\IdleAnims\DeathPose.psa
End of RGDL

Pose Matching Match Bone 1
Pose Matching Match Bone 2
Pose Matching Match Bone 3
Pose Matching Motors Strength % min 0.0 max 10000.0
Pose Matching Pose Activation Delay Time % min 0.0 max 10.0
Pose Matching Match Error Allowance % min 0.0 max 1.0
Pose Matching Displacement to disable % min 0.0 max 10.0

RGDL/RAPS 24
Pose Matching Match Bone 1 0
Pose Matching Match Bone 2 3
Pose Matching Match Bone 3 14
0000,0000
        ^Disable on move
21
3000.000000
2.000000
0.280000
1.000000

Where are Foot IK, Look IK, and Grab IK data stored?
Modified data was not stored to esp. Was it stored at all?

============================================================================

final check
SCOL
Static Collection

capture_20081215_221641.png


SCOL/DATA is multiple of 28 bytes (7 floats).
Position X Y Z
Rotation X Y Z
Scale

============================================================================

final check?
SCPT
Script

capture_20081215_204701.png
capture_20090208_184440.png % MQ05PipeSpeakerActivatorScript, last in SCHR = 1

Todo:
Last number in SCHR
Move common code to espparser.c
Decompile expressions


Script Type: % Second last number in SCHR: 0 Object 1 Quest 256 Effect
Object
Quest
Effect

SCPT/SCHR 20
0
2
65 % Compiled script size % SCDA subrecord
1
65536
Chunk name: SCDA
SCPT/SCDA 65
Chunk name: SCTX
SCPT/SCTX 314
scn 87bEntranceChargeSCRIPT

short playerTriggered		; set to 1 when player triggers

begin onTriggerEnter Player
	
	;if the player hasnt done it before...
	if playerTriggered == 0
		set playerTriggered to 1

		;spawn the SuperMutant and start him running
		mrk87bSMEntranceCharge.enable
		
	endif
end
Chunk name: SLSD
SCPT/SLSD 24
1
0
0
0
1
0
0
0
0

000072    0  1  0  0  0  0  0  1  0 53 43 44   .........SCD
000084   41 41  0 1d  0  0  0 10  0  b  0 1a   AA..........
000096    0 2e  0  0  0  1  0 72  2  0 16  0   .......r....
000108    d  0  2  0  9  0 20 73  1  0 20 30   ...... s.. 0
000120   20 3d 3d 15  0  7  0 73  1  0  2  0    ==....s....
000132   20 31 1c  0  1  0 21 10  2  0  0  0    1....!.....
000144   19  0  0  0 11  0  0  0 53 43 54 58   ........SCTX

mrk87bSMEntranceCharge.enable
1c  0  1  0 21 10  2  0  0  0
How to skip the "enable" if we don't want parse functions?

Opposing to UESP Wiki doc, it looks like RefSCRO includes
the Function as parameter. This is because JmpOps of If counts
RefSCRO as one opcode. This also solves the function skipping
problem for RefSCROs.

Check how standalone functions are parsed?
They are part of the Expression and have opcode 0x58.

Set command:
variable 1st byte 47
variable 1st byte 66
variable 1st byte 72
variable 1st byte 73



Check this:

SCPT/SLSD 24
Index of the script variable 1
1701147239
0
0
Type of the script variable 1
99
116
114
1866621801 -- 60160271409963492933650874368.000000

============================================================================

ok
SOUN
Sound

capture_20081215_204826.png
capture_20081226_005856.png

Todo:
Loop start and end
Attenuation tab


0000,0000,0000,0000,0000,0000,0001,0000
0000,0000,0000,0000,0000,0010,0000,0000
0000,0000,0000,0000,0000,0001,0000,0000
                                      ^Random Frequency Shift
                                     ^Play At Random % Not used in Fallout3.esm
                                    ^Environment Ignored % Not used in Fallout3.esm
                                   ^Random Location % Not used in Fallout3.esm
                                 ^Loop
                                ^Menu Sound
                               ^2D
                              ^360 LFE
                            ^Dialogue Sound
                           ^Envelope Fast
                          ^Envelope Slow ???? XXXX
                         ^2D Radius
                       ^Mute When Submerged % ok



SNDD = SNDX + ANAM + GNAM + HNAM = 12 + 10 + 2 + 4 bytes = 28
36 - 28 = 8 bytes are unknown

Attenuation tab:
Reverb Attenuation Control / min 0 max 100

NPCRobotMrHandyMovementLPM
% capture_20081226_010102.png
Attenuation Curve 1: 100
Attenuation Curve 2: 50
Attenuation Curve 3: 20
Attenuation Curve 4: 5
Attenuation Curve 5: 0
0
128
12768
57183

% capture_20081226_010356.png / test_sound02.esp
Attenuation Curve 1: 100
Attenuation Curve 2: 50
Attenuation Curve 3: 20
Attenuation Curve 4: 5
Attenuation Curve 5: 2
100
1 % Priority % min = 1 max = 255 according test_sound03.esp
12768
57183


============================================================================

final check
SPEL
Actor Effect

capture_20081215_191942.png
capture_20081226_003851.png
capture_20090106_174821.png


Actor Effect types:
0 Actor Effect
1 Disease
2 Power
3 Lesser Power
4 Ability
5 Poison
10 Addiction

Oblivion's Immune to Silence is maybe used when SEAA flag = 1:

SPEL/SPIT 16
Type 4 % 0 Actor Effect 1 Disease 2 Power 3 Lesser Power 4 Ability 5 Poison 10 Addiction
0
0
0010,1010
        ^~Auto-Calculate
     ^+^Immune to Silence (in Oblivion) % Bits used in F3.esm, not in Editor.
      ^PC Start Effect
   ^Area Effect Ignores LOS
  ^Script Effect Always Applies
 ^Disallow Absorb/Reflect
^Force Touch Explode


============================================================================

final check
STAT
Static

capture_20081215_221426.png

Flags:
Quest Item % in header flags
On Local Map % in header flags
Has Tree LOD % in header flags
Has Platform/Language Specific Textures
Obstacle % in header flags

NavMesh Generation Import Option:
Collision geometry
Filter
Bounding Box
Ground

============================================================================

final check
TACT
Talking Activator

capture_20081215_190844.png
capture_20090107_001620.png

Todo:
More flags % ok
Looping Sound  SNAM % ok
Destruction Data DEST etc.


============================================================================

continue
TERM
Terminal

capture_20081215_221749.png
capture_20081226_122619.png
capture_20090106_211524.png
capture_20090208_184017.png
capture_20090209_213647.png

Todo:
Base Hack Difficulty values % ok
SCVR
SCRV
DNAM % last byte if size is 4
ANAM % check flags % ok
TNAM % ok


Base Hack Difficulty:
0 Very Easy
1 Easy
2 Average
3 Hard
4 Very Hard
5 Requires Key
0 Unlocked % This is a flag. Difficulty value = 0 but reads Unlocked.


Server Type:
Server 1
 ***
Server 10

ok
Flags:
Base Hack Difficulty Leveled
Hide when displaying image % text not fully visible, a bug of some sort


TERM/DNAM 3
TERM/DNAM 4

AbrahamWashingtonTerminal
TERM/DNAM 4
1
1
0
0
% Easy / Leveled 1 / Server 1

AWMTerminal
TERM/DNAM 4
2
0
8
0
% Average / Leveled 0 / Server 9


MQ06VaultTecTerminalSubMenuVault76nfo has schrunknown2 values: 1 1 0.
When I changed the order so that the last was moved to first,
all schrunknown2 were 1.


============================================================================

continue
TES4


============================================================================

final check
TREE
Tree

capture_20081215_221949.png

Todo:
DEST


============================================================================

final check
TXST
Texture Set

capture_20081215_205329.png
capture_20081226_010935.png

Todo:
What DNAM means?


Maps:
TX00 Diffuse             .dds
TX01 Normal/Gloss      _n.dds % is gloss map in the alpha channel?
TX02 Environment Mask  _m.dds % check the name
TX03 Glow/Skin/Hair    _g.dds//_hl.dds
TX04 Height            _p.dds
TX05 Environment       _e.dds

Check models which use TX02 TX03 TX04 TX05 and check them in GECK.

TX03:
1stPersonGatlingLaserBackpackTexture
1stPersonFatmanTexture02
TeslaPowerArmorHelmet
BeardFullT

TX04:
DecalWoodBallistic
DecalMetalPhysical
RubblePileLooseRocksBarrenWastes01

TX05:
1stPersonSwitchBladeTexture
1stPersonChineseOfficerSwordTexture
1stPersonPlasmaRifle01Texture
RadiationSuitGlass


1950sCasual02OldF % where is Has Specular Map flag?
NullTextureSet % has specular map marked even it does not have texture maps

TXST/DNAM 2
PoliceHatKid
RubblePileGroundLitterLight01

TXST/DODT 36
DecalBloodPlaceable1
DecalOrganicBallisticBB
DecalLitterPlaced

TXST/EDID 24
DecalOrganicBallisticBB
TXST/DODT 36
2.000000
2.000000
2.000000
2.000000
10.000000
65.000000
1.000000
4
-86
-86
-86
100
52
TXST/DNAM 2
0 % only values 0 and 1
0 % always 0

Changed DNAM from byte+byte to short.


TXST/EDID 18
DecalLitterPlaced
TXST/DODT 36
25.000000 % Min Width
45.000000 % Max Width
25.000000 % Min Height
45.000000 % Max Height
32.000000 % Depth
10.000000 % Shininess
1.000000 % Scale
4
-52
-51
-51
-1  % Color RGBA
255 % Color RGBA

No DNAM in the latter.

Parallax Passes? ok
Alpha blending and testing flags? ok



============================================================================

ok
VTYP

capture_20081215_081741.png
capture_20081215_230206.png



============================================================================

final check
WATR
Water Type

capture_20081215_205827.png
capture_20081226_105632.png

Todo:
Update DNAM. Copy DNAM to DATA. % ok 20081231


WATR/EDID 15
BathtubWater01
WATR/ANAM 1
Opacity 50 % ok
WATR/DNAM 196
XX Wind Velocity 0.100000
Wind Direction 90.000000 % wind dir?
Wave Amplitude 0.500000 % amp? bias? gain?
Wave Frequency 1.000000 % Reflect Amount? % Refl HDR Mult? % Light brightness? Fog Amount?
Sun Power 188.000000 % ok
Reflectivity Amount 1.000000 % Reflect Amount? % Refl HDR Mult? % Light brightness?
Fresnel Amount 0.590000 % verify because editor has 0.5800
Scroll X Speed 0.000000 % Amplitude Scale? UV Scale? Depth Falloff Start?
Fog Distance - Near Plane 0.000000 % Amplitude Scale? UV Scale? Depth Falloff Start?
Fog Distance - Far Plane 41.000000
Shallow Color R 175 % ok
Shallow Color G 191
Shallow Color B 164
0
Deep Color R 62 % ok
Deep Color G 63
Deep Color B 29
0
Reflection Color R 137 % ok
Reflection Color G 162
Reflection Color B 169
0
XX Texture Blend 0
XX Texture Blend Color R (from the texture image) 205
XX Texture Blend Color G (from the texture image) 205
XX Texture Blend Color B (from the texture image) 205
RainSim/Force 0.100000 % RainSim ok
RainSim/Velocity 0.600000
RainSim/Falloff 0.985000
RainSim/Dampner 2.000000
RainSim/Starting Size 0.050000
DispSim/Force 0.400000 % DispSim ok
DispSim/Velocity 0.600000
DispSim/Falloff 0.940000
DispSim/Dampner 10.000000
DispSim/Starting Size 0.050000
1.090000 % Noise Scale
90.000000 % Wind Direction
250.000000
0 % Amplitude Scale? UV Scale? Depth Falloff Start?
0.051000 % Wind Speed
0.022000
0.011000
0 % Amplitude Scale? UV Scale? Depth Falloff Start?
0.036200 % Depth Falloff End
1.000000 % Reflect Amount? % Refl HDR Mult? Fog Amount?
101.400002
0.350000
0 % Amplitude Scale? UV Scale? Depth Falloff Start?
65.000000
786.200012 % Distortion Amount
500.000000 % Shininess
1.000000 % Reflection HDR Multplier
10000.000000 % Light Radius
1.000000 % Light Brightness
0 % Amplitude Scale? UV Scale? Depth Falloff Start?
0 % Amplitude Scale? UV Scale? Depth Falloff Start?
100.000000
0 % Amplitude Scale
0.405800
0.076100

Could not find data for noise gen tab.
Where is Fog / Above Water?

Different set of values for both?
Above Water
Under Water

Different set of values for all?
Texture Select:
Noise Layer One
Noise Layer Two
Noise Layer Three
Normals

Noise Type:
Perlin
Fractal Brownian Motion
Ridged Multifractal

The preview images?
Reflection
Refraction
Noise Heightmap One
Noise Heightmap Two
Noise Heightmap Three
Noise Normalmap


BuzzardPointWater

PPurityWater01Murky % has DATA

============================================================================

continue
WEAP
Weapon

capture_20081215_201117.png
capture_20081226_143135.png
capture_20090106_221100.png
capture_20090207_002723.png

Todo:
Game Data/On Hit + Resist
Art and Sound/Reload Anim
Damage per second (two numbers at top)
Game Data/Embedded Weapon Actor Value
Rumble/Firing Rumble Alternate flag
Unknown data in DNAM
WEAP/EAMT % Use Animation type
Ammo Use and Aim Arc % ok
Attack Anim % see Use Animation types
Animation Type % ok
Skills % may be listed in other sections; capture_20090207_002723.png
DMDL % ok


Game Data / Burst Shot flag stayed off at first time, then
after modding flags, Burst Shot flag could be turned on.
Is that controlled by Automatic flag?

Change of Animation type deleted Object Effect.
Change of Animation type greyed-out Object Effect, etc.


Equip Types are listed at end of this doc.

Skill:
34 Energy Weapons
37 Medicine
38 Melee Weapons
41 Small Guns
45 Unarmed


WEAP/DNAM 136
7
  7 DemoLaserRifle
  4 ElderLyonsLaserPistol
  3 FollowersButch10mmPistol
 11 MQ04Mine
1.000000
1.000000 % Reach
64
-1
1
1
0.000000 % Min Spread
1.500000 % Spread
0.000000  % What is this? MQ04Mine has 10.0000 but it is not in UI.
55.000000 % Sight FOV
0
84751 % Projectile FormID
45 % Base VATS To-Hit Chance
44
  44 DemoLaserRifle
  38 ElderLyonsLaserPistol
  32 FollowersButch10mmPistol
1
0
512.000000 % Range Min
1750.000000 % Range Max
1 % On Hit ??
  1 DemoLaserRifle
  1 ElderLyonsLaserPistol
  0 FollowersButch10mmPistol
8
0.750000 % Animation Attack Multiplier
1.000000 % Fire Rate
17.000000 % Override Action Points
0.200000 % Firing Rumble Left motor strength
0.500000 % Firing Rumble Right motor strength
0.250000 % Firing Rumble Duration
0.000000 % Override Damage to Weapon Mult
2.045459 % Animation Attack Shots per Sec
2.500000 % Animation Reload Time
1.333300 % Animation Jam Time
0.000000
34 % Skill %% 34 Energy Weapons
3 % Firing Rumble Pattern %% 0 Constant 1 Square 3 Sawtooth
0.250000 % Firing Rumble Wavelength
1.000000 % Limb Dmg Mult
60 % Resist ??  -1 NONE 60 EnergyResist
1.500000 % Sight Usage
0.100000 % Semi-Automatic Fire Delay Min
2.000000 % Semi-Automatic Fire Delay Max

Where is Animation Multiplier?

WEAP/CRDT 16
10 % Crit Dmg
0
0
20.000000 % Crit %% Mult
1
0
0
0
776752 % Crit Effect FormID

WEAP/VNAM 4
1
  0 DemoLaserRifle
  1 ElderLyonsLaserPistol
  1 FollowersButch10mmPistol


Attack Anim:
  Attack4 DemoLaserRifle
  Attack3 ElderLyonsLaserPistol
  AttackRight FollowersButch10mmPistol

Reload Anim types:
ReloadA --> ReloadK

Detection Sound Level types:
Loud
Normal
Silent

Hand Grip types:
DEFAULT
HandGrip1
HandGrip2
HandGrip3
1111,1111 % DEFAULT
1010,1011 % HandGrip1
1010,1100 % HandGrip2
1010,1101 % HandGrip3
    ^^^Hand Grip somewhere here

10101011 171 HandGrip1
10101100 172 HandGrip2
10101101 173 HandGrip3

Attack Anim:        % check Use Animation of NPC and Creature
1111,1111 DEFAULT
0010,0110 Attack3
0010,1100 Attack4
0011,0010 Attack5
0011,1000 Attack6
0011,1110 Attack7
0100,0100 Attack8
0001,1010 AttackLeft
0100,1010 AttackLoop
0010,0000 AttackRight
0101,0000 AttackSpin
0101,0110 AttackSpin2
0110,1101 AttackThrow
0111,0011 AttackThrow2
0111,1001 AttackThrow3
0111,1111 AttackThrow4
1000,0101 AttackThrow5
0110,0001 PlaceMine
0110,0111 PlaceMine2

00011010 26 AttackLeft
00100000 32 AttackRight
00100110 38 Attack3
00101100 44 Attack4
00110010 50 Attack5
00111000 56 Attack6
00111110 62 Attack7
01000100 68 Attack8
01001010 74 AttackLoop
01010000 80 AttackSpin
01010110 86 AttackSpin2
01100001 97 PlaceMine
01100111 103 PlaceMine2
01101101 109 AttackThrow
01110011 115 AttackThrow2
01111001 121 AttackThrow3
01111111 127 AttackThrow4
10000101 133 AttackThrow5


Animation Type:
0 HandToHandMelee
10 OneHandGrenade
12 OneHandLunchboxMine
1 OneHandMelee
11 OneHandMine
3 OneHandPistol
4 OneHandPistolEnergy
6 TwoHandAutomatic
8 TwoHandHandle
9 TwoHandLauncher
2 TwoHandMelee
5 TwoHandRifle
7 TwoHandRifleEnergy

0 HandToHandMelee
1 OneHandMelee
2 TwoHandMelee
3 OneHandPistol
4 OneHandPistolEnergy
5 TwoHandRifle
6 TwoHandAutomatic
7 TwoHandRifleEnergy
8 TwoHandHandle
9 TwoHandLauncher
10 OneHandGrenade
11 OneHandMine
12 OneHandLunchboxMine

0 HandToHandMelee 1 OneHandMelee 2 TwoHandMelee 3 OneHandPistol 4 OneHandPistolEnergy 5 TwoHandRifle 6 TwoHandAutomatic 7 TwoHandRifleEnergy 8 TwoHandHandle 9 TwoHandLauncher 10 OneHandGrenade 11 OneHandMine 12 OneHandLunchboxMine


Flags:
NPCs Use Ammo
Ignores Normal Weapon Resistance
Automatic
Can't Drop
Not Used in Normal Combat
Quest Item
Playable
Player Only
No Jam After Reload
Minor Crime
Hide Backpack

Game Data flags:
Embedded Weapon
Crit Effect On Death
Range Fixed
Override Action Points
Override Damage to Weapon Mult

Art and Sound flags:
Has Scope
Don't Use 1st Person IS Animations
Don't Use 3rd Person IS Animations

Rumble:
Firing Rumble Alternate

Unknowns in DNAM:
zcat p1.gz |grep -A 1 "WEAP/EDID\|^Ammo Use\|^Spread\|^Sight FOV\|^#Projectiles\|^Range Max\|^Limb Dmg Mult"|more


Resist:
-1 NONE
18 DamageResist
58 ElectricResist
61 EmpResist
60 EnergyResist
52 FireResist
59 FrostResist
19 PoisonResist
20 RadResist

18 DamageResist
19 PoisonResist
20 RadResist
52 FireResist
58 ElectricResist
59 FrostResist
60 EnergyResist
61 EmpResist

-1 NONE 18 DamageResist 19 PoisonResist 20 RadResist 52 FireResist 58 ElectricResist 59 FrostResist 60 EnergyResist 61 EmpResist

1 Dismember only
2 Explode only
3 No dismember/explode
0 Normal formula behavior

0 Normal formula behavior
1 Dismember only
2 Explode only
3 No dismember/explode

0 Normal formula behavior 1 Dismember only 2 Explode only 3 No dismember/explode

Embedded Weapon Actor Value:
?? NONE
6 BrainCondition
1 EnduranceCondition
2 LeftAttackCondition
4 LeftMobilityCondition
0 PerceptionCondition
3 RightAttackCondition
5 RightMobilityCondition

??????
0 NONE
0 PerceptionCondition
1 EnduranceCondition
2 LeftAttackCondition
3 RightAttackCondition
4 LeftMobilityCondition
5 RightMobilityCondition
6 BrainCondition

0 PerceptionCondition 1 EnduranceCondition 2 LeftAttackCondition 3 RightAttackCondition 4 LeftMobilityCondition 5 RightMobilityCondition 6 BrainCondition

Rumble/Alternate flag changed only these:
-Animation Attack Shots per Sec 1.500000 % on
+Animation Attack Shots per Sec 1.428572 % off

hexdump revealed nothing.


============================================================================

continue
WRLD
World Space

capture_20081215_222345.png
capture_20081226_123517.png
capture_20090106_214824.png
capture_20090129_092712.png
capture_20090129_101645.png % cell ranges of DCworld18 for OFST

Todo:
PNAM two highest bits
PNAM had bug; check PNAM again % ok except two highest bits
flags % ok
swap lists; IMPF subrecord, when Swaps Impact Data is enabled % ok
list of footstep material? IMPF % ok
list of impact data? IMPS % ok


OFST is ok; verified with DCworld18.
There is no problem! This feature is part of semantics.
Problem with OFST:
cell (3, -18) offset = 4954 % this is smallest of DCworld18, should be (8,-10)
cell (4, -18) offset = 5173
Chunk name 0: WRLD 1 266220928
Chunk name 0: GRUP 1 266222038 267166391
Chunk name 0: CELL 2 266222062            % offset 1134
Chunk name 0: GRUP 2 266222117 266225786
Chunk name 0: GRUP 3 266222141 266225786
Chunk name 0: REFR 4 266222165
Chunk name 0: REFR 4 266225670
Chunk name 0: GRUP 2 266225786 266225834
Chunk name 0: GRUP 3 266225810 266225834
Chunk name 0: GRUP 2 266225834 267166295
Chunk name 0: GRUP 3 266225858 266236717
Chunk name 0: CELL 4 266225882            % offset 4954
Chunk name 0: GRUP 4 266225961 266226101
Chunk name 0: GRUP 5 266225985 266226101
Chunk name 0: LAND 6 266226009
Chunk name 0: CELL 4 266226101
Chunk name 0: GRUP 4 266226180 266227559
Chunk name 0: GRUP 5 266226204 266227559
Chunk name 0: LAND 6 266226228
Chunk name 0: CELL 4 266227559
Chunk name 0: GRUP 4 266227638 266228704
Chunk name 0: GRUP 5 266227662 266228704
Chunk name 0: LAND 6 266227686
Chunk name 0: CELL 4 266228704

Last cell has offset 943833.

WRLD
GRUP World Children
CELL
flags 1 = 0000,0000,0000,0000,0000,0100,0000,0000
CELL/XCLC 8
Location X 0
Location Y 0
GRUP Cell Children
GRUP Cell Persistent Children
REFR 0x000cc232  % But this actually is in Cell (8,-10).
   WRLD/OFST says there is no Cell (0,0)
   Are these REFS' cells computed? From their positions?
   What if the world has cell (0,0)? Would this cell be
   at different location?
   How WRLD cell offset affects? Only REFR position computation?
   Or are REFR positions all in the same space?

Chunk name 0: CELL 2 266222062 % the cell containing 0x000cc232 is at different level
Chunk name 0: CELL 4 266225882


verify
WRLD/OFST

There is no Swaps Impact Data flag. Existence of IMPF works
as a flag.
There is no PNAM is there is no parent.

Canopy Shadow? ok NNAM

WRLD/DATA 1
0000,0001 DCworld03
0000,0001 GNRroofWorld
        ^Small World
       ^Can't Fast Travel From Here
   ^No LOD Water

Parent Space related flags? Sharable Data is only available if
parent space exists. Does PNAM tell what is available? Or what
is used?

WRLD/PNAM 2
0001,0101 -1 DCworld03 6 7 12
0001,1010  0 GNRroofWorld
0001,1011  0 ParadiseFalls 2 3 4 5 6 d7 d8 d10 12
0000,0011  0 Oasis 4 6 d7 12
1100,0100

Flags:
1 Use LOD Data
2 Use Image Space Data
3 Use Climate Data
4 Use Land Data
5 Use Water Data
6 Use Map Data
7 Small World
8 Can't Fast Travel From Here
9 Can't Wait
10 No LOD Water
11 No LOD Noise
12 Allow NPC Fall Damage
13 Swaps Impact Data

List of Impact Data ?
List of Footstep Material ?


============================================================================

check if todo is valid
WTHR
Weather

capture_20081215_222045.png
capture_20081226_122914.png
capture_20090106_211925.png
capture_20090111_135443.png

Todo:
General tab % layers, time change effects
Precipitation tab % ok
Sound tab % ok
HDR tab % ok not in use, use Imagespace Modifiers instead (HDR = INAM)
PNAM what is this? is it extension over NAM0?
ONAM % ok
LNAM
BNAM
DNAM
ImageSpace Modifier FormID % ok all four times of day


Change of Time (Sunrise, Day, Sunset, Night) may change
the Imagespace Modifier. Check MegatonFalloutDecay for an example.


Trans Delta
  0 0.01
 87 0.092
255 0.25

Sun Glare 255 / 1.0
Sun Damage 255 / 1.0


Weather Class:
0000,0001
        ^Pleasant
       ^Cloudy
      ^Rainy % Not in Fallout3.esm but is in editor
     ^Snow % Not in Fallout3.esm but is in editor
 ^???? % Not in Fallout3.esm
^???? % Not in Fallout3.esm
     ^^^^0 = None


WTHR/DNAM 14
Cloud Textures/Upper Layer "Sky\Alpha.dds"
Chunk name: CNAM
WTHR/CNAM 32
Cloud Textures/Lower Layer "Sky\WastelandCloudHorizon02.dds"
Chunk name: ANAM
WTHR/ANAM 14
Sky\Alpha.dds
Chunk name: BNAM
WTHR/BNAM 14
Sky\Alpha.dds
Chunk name: LNAM
WTHR/LNAM 4
4                % Number of cloud layers?
Chunk name: ONAM
WTHR/ONAM 4  % Cloud speed per layer?
22
0
0
58

============================================================================
============================================================================

List of object types in the object window:
capture_20081215_191854.png

Actor Data:
Body Part Data / BPTD
Class / CLAS
Eyes / EYES
Faction / FACT
Head Part / HDPT
Package / PACK
Perk / PERK
Quest / QUST
Race / RACE
Ragdoll / RGDL
Voice Type / VTYP

Actors:
Creature / CREA
Leveled Creature / LVLC
Leveled Character / LVLN
NPC / NPC_
Talking Activator / TACT

Game Effects:
Actor Effect / SPEL
Base Effect / MGEF
Ingestible / ALCH
Object Effect / ENCH

Items:
Ammo
Armor
Armor Addon
Book
Key
Leveled Item
Misc Item
Note
Weapon

Miscellaneous:
Anim Object
Combat Style
Form List
Global
Idle Marker
Land Texture
Load Screen
Menu Icon
Message
Music Type
Script
Sound
Texture Set
Water Type

Special Effects:
Acoustic Space
AddOn Node
Camera Shot
Debris
Effect Shader
Explosion
Imagespace
Imagespace Modifier
Impact Data
Impact Data Set
Projectile

World Objects:
Activator
Climate
Container
Door
Encounter Zone
Furniture
Grass
Light
Movable Static
Placeable Water
Static
Static Collection
Terminal
Tree
Weather



============================================================================

Todo:
Actor Values in menu; have screenshots already but where?

capture_20081215_223721.png % World LOD
capture_20081226_131040.png % World LOD

capture_20081226_003856.png % Effect Item (EFID + EFIT)
capture_20081226_005016.png % Effect Item (EFID + EFIT)

capture_20081225_222652.png % Condition Item (CTDA)

capture_20081215_231828.png % Player Dialogue window
capture_20081215_231922.png % Player Dialogue window

capture_20081215_231957.png % Radiation Levels

capture_20081215_232040.png % Game Settings

capture_20090125_003408.png % Height Map editor

============================================================================

flags 1 = 0000,0000,0000,0000,0000,0100,0000,0000
flags 1 = 0000,0000,0000,0000,0000,0110,0000,0000
flags 1 = 0101,0000,0000,0010,0000,0000,0000,0000 % MQ04RadioBroadcast
flags 1 = 0100,0000,0000,0010,0000,0000,0000,0000 % FFRadioSignal09
flags 1 = 0000,0000,0000,0010,0000,0000,0000,0000 % AlienRadioBeacon
flags 1 = 0000,0000,0000,0000,0010,0000,0000,0000 % Harold
flags 1 = 0010,0000,0000,0000,0000,0000,0000,0000
flags 1 = 0000,0010,0000,0000,0000,0000,0000,0000
flags 1 = 0000,1000,0000,0000,0000,0000,0000,0000 % AntEggClutchCont03a
flags 1 = 0000,0000,0000,0001,0000,0000,0000,0000 % tSmokePillerMesh01
flags 1 = 0000,0000,0000,0000,0000,0010,0100,0000 % TreeHardwoodPebblesDirt01
flags 1 = 0000,0000,0000,0000,1000,0000,0000,0000 % GTStoreC01
flags 1 = 0000,0000,0000,1000,0000,0000,0000,0000 % AgathasHouseInterior
flags 1 = 0000,0000,0000,0000,0000,0000,0100,0000 % BehemothsMax
flags 1 = 0000,0000,0000,0000,0000,1100,0000,0000
flags 1 = 1000,0000,0000,0000,0000,1100,0000,0000 % formid = 0x000692c8 REFR
flags 1 = 0000,0000,0000,0000,0000,1100,1000,0000 % MS16WaterChipEngineSmoke03REF
                                         ^STAT:Has Tree LOD + GLOB:Constant
                                     ^On Local Map
                                    ^Quest Item + LSCR:Displays in Main Menu + REFR:Persistent Reference
                                   ^REFR:Initially Disabled
                                ^No Voice Filter
                              ^Visible When Distant
                            ^Random Anim Start
                           ^Radio Station
                          ^Compressed record data
                         ^CELL: Can't Wait + ARMO:Has Platform/Language Specific Textures
                 ^Obstacle
               ^NavMesh Generation Import Option: Bounding Box (two bits??)
             ^Non-Pipboy
            ^Child Can Use
           ^Cont. Broadcast
          ^????

flags 1 = 0000,0000,0000,0100,0000,0000,0000,0000 % LAND
flags 1 = 0000,0000,0000,0000,0000,1100,0000,0000 % REFR:Persistent Reference & REFR:Initially Disabled

All used bits in Fallout3.esm
flags 1 = 1111,1110,0000,1111,1010,1111,1100,0001
flags 1 = 1000,0000,0000,0100,0000,0000,1000,0001 % unknown bits
                                                ^TES4:Master
                          ^Compressed record data
          ^ used by slide projectors and rublepile which are off boundary, guess

flags 1 = 0000,0000,0000,0000,0000,0100,0000,0000
                                    ^What is this for CELL?
It is in CELL after WRLD at level 2 instead of level 4 as true cells.
Level 2 cell's content can be found as additional objects in
the true cells.
                                    ^Persistent (after WRLD)

============================================================================

Run on 0 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference
Run on 1 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference
Run on 20 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference
Run on 2 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference
Run on 3 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference
Run on 4 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference
Run on 7 % 0 Subject 1 Target 2 Reference 3 Combat Target 4 Linked Reference

7? 20?

============================================================================

Equip Types:
(see ALCH ARMA ARMO WEAP)

13 Alcohol
0 BigGuns
7 BodyWear
10 Chems
1 EnergyWeapons
12 Food
9 HandWear
8 HeadWear
3 MeleeWeapons
6 Mine
2 SmallGuns
11 Stimpack
5 ThrowWeapons
4 UnarmedWeapons

0 BigGuns
1 EnergyWeapons
2 SmallGuns
3 MeleeWeapons
4 UnarmedWeapons
5 ThrowWeapons
6 Mine
7 BodyWear
8 HeadWear
9 HandWear
10 Chems
11 Stimpack
12 Food
13 Alcohol

0 BigGuns 1 EnergyWeapons 2 SmallGuns 3 MeleeWeapons 4 UnarmedWeapons 5 ThrowWeapons 6 Mine 7 BodyWear 8 HeadWear 9 HandWear 10 Chems 11 Stimpack 12 Food 13 Alcohol


============================================================================

Condition functions:

capture_20090106_200054.png % every condition function
capture_20090201_125119.png % first part, list taken multiple times
capture_20090201_161811.png % second part
capture_20090202_004741.png % IsTorchOut
capture_20090202_013552.png % in csscreenshots20090202/ has O funcs


Taken from NOTES_ESPTEST. Verified and updated for F3.
O = in Oblivion
F = in Fallout 3
m = modified

153 OF CanHaveFlames
127 O- CanPayCrimeGold
415 -F Exists <ObjectReferenceID> % [TARGET]
118 -F GetActorAggroRadiusViolated
459 -F GetActorCrimePlayerEnemy
460 -F GetActorFactionPlayerEnemy
557 -F GetActorsInHigh
 14 OF GetActorValue <Actor Value>
 61 OF GetAlarmed
190 OF GetAmountSoldStolen
  8 OF GetAngle <Axis> % X Y Z
219 -F GetAnimAction
 81 OF GetArmorRating
274 OF GetArmorRatingUpperBody
 63 OF GetAttacked
264 OF GetBarterGold
277 OF GetBaseActorValue <Actor Value>
227 -F GetCannibal
397 -F GetCauseofDeath
229 OF GetClassDefaultMatch
 41 OF GetClothingValue
489 -F GetConcussed
122 OF GetCrime <Actor> <Crime Type> % [TARGET]
116 O- GetCrimeGold
110 OF GetCurrentAIPackage
143 OF GetCurrentAIProcedure
 18 OF GetCurrentTime
148 OF GetCurrentWeatherPercent
170 OF GetDayOfWeek
 46 OF GetDead
 84 OF GetDeadCount <Actor Base> % NPC: 'Abhuki'
215 -F GetDefaultOpen
203 OF GetDestroyed
471 -F GetDestructionStage
 45 OF GetDetected <Actor> % [TARGET]
180 OF GetDetectionLevel <Actor> % [TARGET]
435 -F GetDialogueEmotion
436 -F GetDialogueEmotionValue
 35 OF GetDisabled
 39 OF GetDisease
 76 OF GetDisposition <Actor> % [TARGET]
  1 OF GetDistance <ObjectReferenceID> % [TARGET]
215 O- GetDoorDefaultOpen
182 OF GetEquipped <ObjectID> % MiscItem: 'aaaObeisanceToken'
411 -F GetFactionCombatReaction <Faction> <Faction>
 73 OF GetFactionRank <Faction>
 60 OF GetFactionRankDifference <Faction> <Actor> % [TARGET]
450 -F GetFactionRelation <Actor> % [TARGET]
128 OF GetFatiguePercentage
288 Om GetFriendHit <Actor> % [TARGET]
288 mF GetFriendHit % ok
160 OF GetFurnitureMarkerID
 74 OF GetGlobalValue <Global>
 48 OF GetGold
416 -F GetGroupMemberCount
417 -F GetGroupTargetCount
382 -F GetHasNote <Note>
 99 OF GetHeadingAngle <ObjectReferenceID> % [TARGET]
431 -F GetHealthPercentage
391 -F GetHitLocation
318 OF GetIdleDoneOnce
192 -F GetIgnoreCrime
338 OF GetIgnoreFriendlyHits
 67 OF GetInCell <Cell>
230 OF GetInCellParam <Cell> <ObjectReferenceID> % [TARGET]
 71 OF GetInFaction <Faction>
 32 OF GetInSameCell <ObjectReferenceID> % [TARGET]
305 O- GetInvestmentGold
310 OF GetInWorldspace <WorldSpace>
446 -F GetInZone <EncounterZone>
 91 OF GetIsAlerted
474 -F GetIsAlignment <AlignmentValue> % Evil Good Neutral VeryEvil VeryGood
 68 OF GetIsClass <Class>
228 OF GetIsClassDefault <Class>
 64 OF GetIsCreature
438 -F GetIsCreatureType <Integer>
161 OF GetIsCurrentPackage <Package>
149 OF GetIsCurrentWeather <Weather ID> % CamoranWeather
237 OF GetIsGhost
 72 OF GetIsID <ObjectID>
522 -F GetIsLockBroken
433 -F GetIsObjectType <Form Type> % e.g., Acoustic Space
254 OF GetIsPlayableRace
224 O- GetIsPlayerBirthsign <Birthsign>
 69 OF GetIsRace <Race>
136 OF GetIsReference <ObjectReferenceID> % [TARGET]
 70 OF GetIsSex <Sex> % 0 Male 1 Female
246 OF GetIsUsedItem <ObjectID>
480 -F GetIsUsedItemEquipType <EquipType>
247 OF GetIsUsedItemType <Form Type>
427 -F GetIsVoiceType <VoiceType>
 47 OF GetItemCount <ObjectID>
496 -F GetKillingBlowLimb
107 OF GetKnockedState
510 -F GetLastHitCritical
367 -F GetLastPlayerAction
 80 OF GetLevel
 27 OF GetLineOfSight <ObjectReferenceID> % [TARGET]
  5 OF GetLocked
 65 OF GetLockLevel
117 -F GetMajorCrimeCount
492 -F GetMapMarkerVisible
116 -F GetMinorCrimeCount
320 OF GetNoRumors
255 OF GetOffersServicesNow
157 OF GetOpenState
197 -F GetPCEnemyofFaction <Faction>
193 OF GetPCExpelled <Faction>
199 OF GetPCFactionAttack <Faction>
195 OF GetPCFactionMurder <Faction>
197 O- GetPCFactionSteal <Faction>
201 O- GetPCFactionSubmitAuthority <Faction>
249 O- GetPCFame
132 OF GetPCInFaction <Faction>
251 O- GetPCInfamy
129 OF GetPCIsClass <Class>
130 OF GetPCIsRace <Race>
131 OF GetPCIsSex <Sex> % Female Male
312 O- GetPCMiscStat <Integer> % 0
312 -F GetPCMiscStat <Miscellaneous>
495 -F GetPermanentActorValue <Actor Value>
225 OF GetPersuasionNumber
428 -F GetPlantedExplosive
 98 O- GetPlayerControlsDisabled
 98 -F GetPlayerControlsDisabled % two strange parameters, see capture_20090106_202137.png % XXXX caused program failure and exit, Function ID not verified
362 OF GetPlayerHasLastRiddenHorse
454 -F GetPlayerTeammate
455 -F GetPlayerTeammateCount
365 O- GetPlayerInSEWorld
  6 OF GetPos <Axis> % X Y Z
546 -F GetQuestCompleted <Quest>
 56 OF GetQuestRunning <Quest>
 79 OF GetQuestVariable <Quest> <Variable Name> % Variable names?
503 -F GetRadiationLevel
 77 OF GetRandomPercent
244 OF GetRestrained
226 -F GetSandman
 24 OF GetScale
 53 OF GetScriptVariable <ObjectReferenceID> <Variable Name> % includes NONE
 12 OF GetSecondsPassed
 66 OF GetShouldAttack <Actor> % [TARGET]
159 OF GetSitting
 49 OF GetSleeping
555 -F GetSpellUsageNum <Magic Item> % AlienDisintegrationFXSpell
 58 OF GetStage <Quest>
 59 OF GetStageDone <Quest> <Stage> % NONE 10
 11 OF GetStartingAngle <Axis> % X Y Z
 10 OF GetStartingPos <Axis> % X Y Z
 50 OF GetTalkedToPC
172 OF GetTalkedToPCParam <Actor> % [TARGET]
478 -F GetThreatRatio <Actor> % [TARGET]
361 OF GetTimeDead
315 OF GetTotalPersuasionNumber
144 OF GetTrespassWarningLevel
242 OF GetUnconscious
259 OF GetUsedItemActivate
258 OF GetUsedItemLevel
 40 OF GetVampire
520 -F GetVATSBackAreaFree <**ESObjectREFR> % TESObjectREFR??
527 -F GetVATSBackTargetVisible <**ESObjectREFR> % TESObjectREFR??
521 -F GetVATSFrontAreaFree <**ESObjectREFR> % TESObjectREFR??
528 -F GetVATSFrontTargetVisible <**ESObjectREFR> % TESObjectREFR??
519 -F GetVATSLeftAreaFree <**ESObjectREFR> % TESObjectREFR??
526 -F GetVATSLeftTargetVisible <**ESObjectREFR> % TESObjectREFR??
224 -F GetVATSMode
518 -F GetVATSRightAreaFree <**ESObjectREFR> % TESObjectREFR??
525 -F GetVATSRightTargetVisible <**ESObjectREFR> % TESObjectREFR??
235 -F GetVatsTargetHeight
408 -F GetVATSValue <VATS Value> <Data (Optional)>
142 OF GetWalkSpeed
108 OF GetWeaponAnimType
500 -F GetWeaponHealthPerc
109 O- GetWeaponSkillType
147 OF GetWindSpeed
533 -F GetXPForNextLevel
127 -F HasBeenEaten
154 OF HasFlames
403 -F HasFriendDisposition
558 -F HasLoaded3D
214 OF HasMagicEffect <Magic Effect> % <Base Effect>
449 -F HasPerk <Perk>
227 O- HasVampireFed
353 OF IsActor
314 OF IsActorAVictim
313 OF IsActorEvil
430 -F IsActorTalkingThroughActivator
306 OF IsActorUsingATorch
280 OF IsCellOwner <Cell> <Owner(optional)> % NPC: 'Abhuki'
365 -F IsChild
267 OF IsCloudy
515 -F IsCombatTarget <Actor> % [TARGET]
150 OF IsContinuingPackagePCNear
163 O- IsCurrentFurnitureObj <Furniture>
163 -F IsCurrentFurnitureObj <Furniture> % Form List:'AlchoholicDrinks'
162 OF IsCurrentFurnitureRef <ObjectReferenceID> % [TARGET]
354 OF IsEssential
106 OF IsFacingUp
550 -F IsGoreDisabled
123 -F IsGreetingPlayer
125 OF IsGuard
282 OF IsHorseStolen
112 OF IsIdlePlaying
289 OF IsInCombat
531 -F IsInCriticalStage <CriticalStage>
332 OF IsInDangerousWater
300 OF IsInInterior
372 -F IsInList <Form List> % FLST record FormID
146 OF IsInMyOwnedCell
409 -F IsKiller <Actor> % [TARGET]
410 -F IsKillerObject <Form List>
451 -F IsLastIdlePlayed <Idle Form>
285 OF IsLeftUp
398 -F IsLimbGone <Integer> % 0
 25 -F IsMoving
278 OF IsOwner <Owner(optional)> % NPC: 'Abhuki'
392 -F IsPC1stPerson
176 OF IsPCAMurderer
175 OF IsPCSleeping
368 -F IsPlayerActionActive <Integer> % 0
464 -F IsPlayerGrabbedRef <***ESObjectREFR> % [TARGET] % TESObjectREFR
171 O- IsPlayerInJail
358 OF IsPlayerMovingIntoNewSpace
339 OF IsPlayersLastRiddenHorse
266 OF IsPleasant
523 -F IsPS3
 62 OF IsRaining
327 OF IsRidingHorse
287 OF IsRunning
103 OF IsShieldOut
286 OF IsSneaking
 75 OF IsSnowing
223 OF IsSpellTarget <Magic Item> % Spell, Enchantment, Potion, what else?
185 OF IsSwimming
141 OF IsTalking
370 -F IsTalkingActivatorActor <Actor> % [TARGET]
265 OF IsTimePassing
102 OF IsTorchOut
145 OF IsTrespassing
329 O- IsTurnArrest
 26 -F IsTurning
111 OF IsWaiting
304 -F IsWaterObject
399 -F IsWeaponInList <Form List>
101 OF IsWeaponOut
109 OF IsWeaponSkillType <Actor Value>
524 OF IsWin32
309 OF IsXBox
104 O- IsYielding
 36 OF MenuMode <Integer> % 0
 42 OF SameFaction <Actor> % [TARGET]
133 OF SameFactionAsPC
 43 OF SameRace <Actor> % [TARGET]
134 OF SameRaceAsPC
 44 OF SameSex <Actor> % [TARGET]
135 OF SameSexAsPC
323 OF WhichServiceMenu

Condition Functions with parameter details:
(These are listed above as well.)

 14 OF GetActorValue <Actor Value>
  F: ActionPoints Aggression Agility Assistance Barter BigGuns BloodyMess BrainCondition CarryWeight Chameleon Charisma Confidence CritChance DamageResist DetectLifeRange ElectricResist EmpResist Endurance EnduranceCondition Energy EnergyResist EnergyWeapons Explosives Fatigue FireResist FrostResist HealRate Health IgnoreCrippledLimbs Intelligence InventoryWeight Invisibility Karma LeftAttackCondition LeftMobilityCondition Lockpick Luck Medicine MeleeDamage MeleeWeapons Mood NightEye Paralysis Perception 25 PerceptionCondition PoisonResist RadiationRads RadResist Repair Responsibility RightAttackCondition RightMobilityCondition Science SamllGuns Sneak Speech SpeedMult Strength Unarmed UnarmedDamage Variable01 Variable02 Variable03 Variable04 Variable05 Variable06 Variable07 Variable08 Variable09 Variable10 WaterBreathing XP

122 OF GetCrime <Actor> <Crime Type> % [TARGET]
  F: Crime Types: ANY Attack Murder Pickpocket Steal Trespass

480 -F GetIsUsedItemEquipType <EquipType> % Alcohol BigGuns BodyWear Chems EnergyWeapons Food HandWear HeadWear MeleeWeapons Mine SmallGuns Stimpack ThrowWeapons UnarmedWeapons
247 OF GetIsUsedItemType <Form Type>
  F: Form Types: Acoustic Space, Activator, Actor Effect, AddOn Node, Ammo, Anim Object, Armor, Armor Addon, Base Effect, Body Part Data, Book, Camera Shot, Class, Climate, Combat Style, Constructible Object, Container, Creature, Debris, Door, Effect Shader, Encounter Zone, Explosion, Eyes, Faction, Flora, Form List, Furniture, Global, Grass, Head Part, Idle Marker, Imagespace, Imagespace Modifier, Impact Data, Impact Data Set, Ingestible, Ingredient, Key, Land Texture, Leveled Creature, Leveled Item, Leveled Spell, LeveledCharacter, Light, Load Screen, Menu Icon, Message, Misc Item, Movable Static, Music Type, Note, NPC, Object Effect, Package, Perk, Placeable Water, Projectile, Quest, Race, Ragdoll, Script, Sound, Static, Static Collection, Talking Activator, Terminal, Texture Set, Tree, Water Type, Weapon, Weather, Voice Type


312 -F GetPCMiscStat <Miscellaneous> % Bobbleheads Found, Books Read, Captives Rescued, Chems Taken, Computers Hacked, Contracts Completed, Corpses Eaten, Creatures Killed, Locations Discovered, Locks Picked, Mines Disarmed, Mysterious Stranger Visits, Pants Exploded, Paralyzing Punches, People Killed, People Mezzed, Pockets Picked, Quests Completed, RadAway Taken, Rad-X Taken, Robots Disabled, Sandman Kills, Speech Successes, Stimpaks Taken, Times Addicted, Weapons Created
495 -F GetPermanentActorValue <Actor Value>
  6 Perception
  7 Endurance
  8 Charisma
  9 Intelligence
 10 Agility
 11 Luck
 32 Barter
 34 EnergyWeapons
 36 Lockpick
 37 Medicine
 40 Science
 41 SmallGuns
 45 Unarmed

408 -F GetVATSValue <VATS Value> <Data (Optional)>
F: VATS Values: % parameters capture_20090106_202723.png
 Cripple Part
 Crit Effect In List <> % INVALID: NONE choices % what that means? no list with crit effects?
 Crit Effect Is <> % NONE AlienDisintegrationFXSpell
 Dismember Part
 Explode Part
 Is Critical
 Is Fatal
 Is Paralyzing Palm
 Is Stranger
 Is Success
 Target Distance
 Target In List <> % NONE CG02NPCList
 Target Is <> % AbrahamWashington
 Targeted Part <> % BrainCondition EnduranceCondition LeftAttackCondition LeftMobilityCondition PerceptionCondition RightAttackCondition RightMobilityCondition
 Vats Action <> % Crouch, Fire Handle Weapon, Fire Launcher, Fire Pistol, Fire Rifle, Heal, One Hand Melee Attack, Place Mine, Player Death, Reload, Stand, Switch Weapon, Throw Grenade, Toggle Weapon Drawn, Two Hand Melee Attack, Unarmed Attack
 Weapon In List <> % NONE BaseballBatsList
 Weapon Is <> % NONE CentaurSpitMissile
 Weapon Type Is <> % HandToHandMelee OneHandGrenade OneHandLunchboxMine OneHandMelee OneHandMine OneHandPistol OneHandPistolEnergy TwoHandAutomatic TwoHandHandle TwoHandLauncher TwoHandMelee TwoHandRifle TwoHandRifleEnergy

531 -F IsInCriticalStage <CriticalStage>
  0 None
  1 GooStart
  2 GooEnd
  3 DisintegrateStart
  4 DisintegrateEnd


Modified functions:

 98 -F GetPlayerControlsDisabled % two strange parameters, see capture_20090106_
202137.png % XXXX caused program failure and exit, Function ID not verified
 98 O- GetPlayerControlsDisabled

109 OF IsWeaponSkillType <Actor Value>
109 O- GetWeaponSkillType

116 -F GetMinorCrimeCount
116 O- GetCrimeGold

127 -F HasBeenEaten
127 O- CanPayCrimeGold

163 -F IsCurrentFurnitureObj <Furniture> % Form List:'AlchoholicDrinks'
163 O- IsCurrentFurnitureObj <Furniture>

197 -F GetPCEnemyofFaction <Faction>
197 O- GetPCFactionSteal <Faction>

215 -F GetDefaultOpen
215 O- GetDoorDefaultOpen

224 -F GetVATSMode
224 O- GetIsPlayerBirthsign <Birthsign>

227 -F GetCannibal
227 O- HasVampireFed

288 mF GetFriendHit % ok
288 Om GetFriendHit <Actor> % [TARGET]

312 -F GetPCMiscStat <Miscellaneous>
312 O- GetPCMiscStat <Integer> % 0

365 -F IsChild
365 O- GetPlayerInSEWorld


============================================================================

cat p1 |grep "increased by"|sort|uniq

Your Agility has been permanently increased by 1.
Your Charisma has been permanently increased by 1.
Your Endurance has been permanently increased by 1.
Your Intelligence has been permanently increased by 1.
Your Luck has been permanently increased by 1.
Your Perception has been permanently increased by 1.
Your Strength has been permanently increased by 1.

Your Barter skill has been permanently increased by 10 points.
Your Big Guns skill has been permanently increased by 10 points.
Your Energy Weapons skill has been permanently increased by 10 points.
Your Explosives skill has been permanently increased by 10 points.
Your Lockpick skill has been permanently increased by 10 points.
Your Medicine skill has been permanently increased by 10 points.
Your Melee Weapons skill has been permanently increased by 10 points.
Your Repair skill has been permanently increased by 10 points.
Your Science skill has been permanently increased by 10 points.
Your Small Guns skill has been permanently increased by 10 points.
Your Sneak skill has been permanently increased by 10 points.
Your Speech skill has been permanently increased by 10 points.
Your Unarmed skill has been permanently increased by 10 points.

you are now 25%% resistant to fire.


============================================================================

20081206
Unimplemented records:

ADDN
ARMA
AVIF
BPTD
CAMS
CPTH
DEBR
DOBJ
ECZN
EXPL
FLST
IDLM
IMAD
IMGS
IPCT
IPDS
LGTM
LVLN
MESG
MUSC
NAVI
NAVM
NOTE
PERK
PGRE
PROJ
PWAT
RADS
RGDL
VTYP

============================================================================

Todo:

Move SCRO and other script subrecords to espparser.c.



============================================================================

Reference tabs:

3D Data / DATA XSCL
Ownership / XOWN XRNK
Extra / XCNT XHLP XCHG XRDS XRAD XAMC % Time Left?? Soul??
Reflected by / XPWR
Refracted by / XPWR
Decals / ????
Linked Ref / XLKR XCLP RCLR % verify that when RCLR then XLKR
Activate Parents / XAPR XAPD
Enable Parent / XESP
Emittance / XEMI
MultiBound / XMBR
Marker Data / XMRK FNAM FULL TNAM(2)
NavMesh Import Option / in record header flags 1
Primitive / XPRM XRMR XTRI XPOD XOCP XORD XMBO
Patrol Data / XPRD XPPA INAM SCHR TNAM(4)
Teleport / XTEL XNDP
Lock / XLOC
Lit Water / XLTW
Radio Data / XRDO
Leveled Actor / XLCM
X Target Data / XTRG
Merchant Container / XMRC
Bound Contents

============================================================================

Reference subrecords:

zcat p1.gz |grep "^ACRE/\|^REFR/\|^PGRE/\|^ACHR/"|cut -b -9|sort|uniq|tr '/' ' ' | sort -k 2 |uniq

ACHR DATA
ACRE DATA
PGRE DATA
REFR DATA
ACHR EDID
ACRE EDID
PGRE EDID
REFR EDID
REFR FNAM
REFR FULL
ACHR INAM
ACRE INAM
REFR INAM
ACHR NAME
ACRE NAME
PGRE NAME
REFR NAME
REFR ONAM
REFR RCLR
REFR SCDA
ACHR SCHR
ACRE SCHR
REFR SCHR
REFR SCRO
ACHR TNAM
ACRE TNAM
REFR TNAM
REFR XACT
REFR XAMC
REFR XAMT
ACRE XAPD
REFR XAPD
ACRE XAPR
REFR XAPR
REFR XCLP
REFR XCNT
ACRE XEMI
REFR XEMI
ACHR XESP
ACRE XESP
PGRE XESP
REFR XESP
ACHR XEZN
ACRE XEZN
PGRE XHLP
REFR XHLP
ACHR XIBS
REFR XIBS
ACHR XLCM
ACRE XLCM
REFR XLCM
ACHR XLKR
ACRE XLKR
REFR XLKR
REFR XLOC
REFR XLOD
REFR XLRM
REFR XLTW
REFR XMBO
REFR XMBP
REFR XMBR
ACHR XMRC
ACRE XMRC
REFR XMRK
REFR XNDP
REFR XOCP
REFR XORD
ACRE XOWN
PGRE XOWN
REFR XOWN
REFR XPOD
ACHR XPPA
ACRE XPPA
REFR XPPA
ACHR XPRD
ACRE XPRD
REFR XPRD
REFR XPRM
PGRE XPWR
REFR XPWR
REFR XRAD
REFR XRDO
ACHR XRDS
ACRE XRDS
REFR XRDS
ACHR XRGB
ACRE XRGB
REFR XRGB
ACHR XRGD
ACRE XRGD
PGRE XRGD
REFR XRGD
REFR XRMR
ACHR XSCL
ACRE XSCL
PGRE XSCL
REFR XSCL
REFR XSED
REFR XTEL
REFR XTRG
REFR XTRI

============================================================================
